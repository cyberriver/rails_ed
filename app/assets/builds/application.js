(()=>{var bc=Object.defineProperty;var yc=(i,t)=>{for(var e in t)bc(i,e,{get:t[e],enumerable:!0})};(function(){if(window.Reflect===void 0||window.customElements===void 0||window.customElements.polyfillWrapFlushCallback)return;let i=HTMLElement,t={HTMLElement:function(){return Reflect.construct(i,[],this.constructor)}};window.HTMLElement=t.HTMLElement,HTMLElement.prototype=i.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,i)})();(function(i){if(typeof i.requestSubmit=="function")return;i.requestSubmit=function(n){n?(t(n,this),n.click()):(n=document.createElement("input"),n.type="submit",n.hidden=!0,this.appendChild(n),n.click(),this.removeChild(n))};function t(n,r){n instanceof HTMLElement||e(TypeError,"parameter 1 is not of type 'HTMLElement'"),n.type=="submit"||e(TypeError,"The specified element is not a submit button"),n.form==r||e(DOMException,"The specified element is not owned by this form element","NotFoundError")}function e(n,r,s){throw new n("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+r+".",s)}})(HTMLFormElement.prototype);var Ro=new WeakMap;function Ec(i){let t=i instanceof Element?i:i instanceof Node?i.parentElement:null,e=t?t.closest("input, button"):null;return e?.type=="submit"?e:null}function Ac(i){let t=Ec(i.target);t&&t.form&&Ro.set(t.form,t)}(function(){if("submitter"in Event.prototype)return;let i;if("SubmitEvent"in window&&/Apple Computer/.test(navigator.vendor))i=window.SubmitEvent.prototype;else{if("SubmitEvent"in window)return;i=window.Event.prototype}addEventListener("click",Ac,!0),Object.defineProperty(i,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return Ro.get(this.target)}})})();var $t;(function(i){i.eager="eager",i.lazy="lazy"})($t||($t={}));var Ct=class extends HTMLElement{constructor(){super(),this.loaded=Promise.resolve(),this.delegate=new Ct.delegateConstructor(this)}static get observedAttributes(){return["disabled","loading","src"]}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){let{src:t}=this;this.src=null,this.src=t}attributeChangedCallback(t){t=="loading"?this.delegate.loadingStyleChanged():t=="src"?this.delegate.sourceURLChanged():this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(t){t?this.setAttribute("src",t):this.removeAttribute("src")}get loading(){return wc(this.getAttribute("loading")||"")}set loading(t){t?this.setAttribute("loading",t):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(t){t?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){var t,e;return(e=(t=this.ownerDocument)===null||t===void 0?void 0:t.documentElement)===null||e===void 0?void 0:e.hasAttribute("data-turbo-preview")}};function wc(i){switch(i.toLowerCase()){case"lazy":return $t.lazy;default:return $t.eager}}function J(i){return new URL(i.toString(),document.baseURI)}function he(i){let t;if(i.hash)return i.hash.slice(1);if(t=i.href.match(/#(.*)$/))return t[1]}function Pr(i,t){let e=t?.getAttribute("formaction")||i.getAttribute("action")||i.action;return J(e)}function Sc(i){return(Lc(i).match(/\.[^.]*$/)||[])[0]||""}function Cc(i){return!!Sc(i).match(/^(?:|\.(?:htm|html|xhtml))$/)}function _c(i,t){let e=Rc(t);return i.href===J(e).href||i.href.startsWith(e)}function bi(i,t){return _c(i,t)&&Cc(i)}function ar(i){let t=he(i);return t!=null?i.href.slice(0,-(t.length+1)):i.href}function un(i){return ar(i)}function xc(i,t){return J(i).href==J(t).href}function Tc(i){return i.pathname.split("/").slice(1)}function Lc(i){return Tc(i).slice(-1)[0]}function Rc(i){return Dc(i.origin+i.pathname)}function Dc(i){return i.endsWith("/")?i:i+"/"}var fn=class{constructor(t){this.response=t}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return J(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(t){return this.response.headers.get(t)}};function tt(i,{target:t,cancelable:e,detail:n}={}){let r=new CustomEvent(i,{cancelable:e,bubbles:!0,detail:n});return t&&t.isConnected?t.dispatchEvent(r):document.documentElement.dispatchEvent(r),r}function hn(){return new Promise(i=>requestAnimationFrame(()=>i()))}function Oc(){return new Promise(i=>setTimeout(()=>i(),0))}function kc(){return Promise.resolve()}function Do(i=""){return new DOMParser().parseFromString(i,"text/html")}function Oo(i,...t){let e=Pc(i,t).replace(/^\n/,"").split(`
`),n=e[0].match(/^\s+/),r=n?n[0].length:0;return e.map(s=>s.slice(r)).join(`
`)}function Pc(i,t){return i.reduce((e,n,r)=>{let s=t[r]==null?"":t[r];return e+n+s},"")}function yi(){return Array.apply(null,{length:36}).map((i,t)=>t==8||t==13||t==18||t==23?"-":t==14?"4":t==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)).join("")}function dn(i,...t){for(let e of t.map(n=>n?.getAttribute(i)))if(typeof e=="string")return e;return null}function lr(...i){for(let t of i)t.localName=="turbo-frame"&&t.setAttribute("busy",""),t.setAttribute("aria-busy","true")}function cr(...i){for(let t of i)t.localName=="turbo-frame"&&t.removeAttribute("busy"),t.removeAttribute("aria-busy")}var Y;(function(i){i[i.get=0]="get",i[i.post=1]="post",i[i.put=2]="put",i[i.patch=3]="patch",i[i.delete=4]="delete"})(Y||(Y={}));function Ic(i){switch(i.toLowerCase()){case"get":return Y.get;case"post":return Y.post;case"put":return Y.put;case"patch":return Y.patch;case"delete":return Y.delete}}var Ei=class{constructor(t,e,n,r=new URLSearchParams,s=null){this.abortController=new AbortController,this.resolveRequestPromise=o=>{},this.delegate=t,this.method=e,this.headers=this.defaultHeaders,this.body=r,this.url=n,this.target=s}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){var t,e;let{fetchOptions:n}=this;(e=(t=this.delegate).prepareHeadersForRequest)===null||e===void 0||e.call(t,this.headers,this),await this.allowRequestToBeIntercepted(n);try{this.delegate.requestStarted(this);let r=await fetch(this.url.href,n);return await this.receive(r)}catch(r){if(r.name!=="AbortError")throw this.delegate.requestErrored(this,r),r}finally{this.delegate.requestFinished(this)}}async receive(t){let e=new fn(t);return tt("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:e},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,e):e.succeeded?this.delegate.requestSucceededWithResponse(this,e):this.delegate.requestFailedWithResponse(this,e),e}get fetchOptions(){var t;return{method:Y[this.method].toUpperCase(),credentials:"same-origin",headers:this.headers,redirect:"follow",body:this.isIdempotent?null:this.body,signal:this.abortSignal,referrer:(t=this.delegate.referrer)===null||t===void 0?void 0:t.href}}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isIdempotent(){return this.method==Y.get}get abortSignal(){return this.abortController.signal}async allowRequestToBeIntercepted(t){let e=new Promise(r=>this.resolveRequestPromise=r);tt("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:t,url:this.url,resume:this.resolveRequestPromise},target:this.target}).defaultPrevented&&await e}},ur=class{constructor(t,e){this.started=!1,this.intersect=n=>{let r=n.slice(-1)[0];r?.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)},this.delegate=t,this.element=e,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}},de=class{constructor(t){this.templateElement=document.createElement("template"),this.templateElement.innerHTML=t}static wrap(t){return typeof t=="string"?new this(t):t}get fragment(){let t=document.createDocumentFragment();for(let e of this.foreignElements)t.appendChild(document.importNode(e,!0));return t}get foreignElements(){return this.templateChildren.reduce((t,e)=>e.tagName.toLowerCase()=="turbo-stream"?[...t,e]:t,[])}get templateChildren(){return Array.from(this.templateElement.content.children)}};de.contentType="text/vnd.turbo-stream.html";var Vt;(function(i){i[i.initialized=0]="initialized",i[i.requesting=1]="requesting",i[i.waiting=2]="waiting",i[i.receiving=3]="receiving",i[i.stopping=4]="stopping",i[i.stopped=5]="stopped"})(Vt||(Vt={}));var Ut;(function(i){i.urlEncoded="application/x-www-form-urlencoded",i.multipart="multipart/form-data",i.plain="text/plain"})(Ut||(Ut={}));function Nc(i){switch(i.toLowerCase()){case Ut.multipart:return Ut.multipart;case Ut.plain:return Ut.plain;default:return Ut.urlEncoded}}var fe=class{constructor(t,e,n,r=!1){this.state=Vt.initialized,this.delegate=t,this.formElement=e,this.submitter=n,this.formData=Mc(e,n),this.location=J(this.action),this.method==Y.get&&Wc(this.location,[...this.body.entries()]),this.fetchRequest=new Ei(this,this.method,this.location,this.body,this.formElement),this.mustRedirect=r}static confirmMethod(t,e){return confirm(t)}get method(){var t;let e=((t=this.submitter)===null||t===void 0?void 0:t.getAttribute("formmethod"))||this.formElement.getAttribute("method")||"";return Ic(e.toLowerCase())||Y.get}get action(){var t;let e=typeof this.formElement.action=="string"?this.formElement.action:null;return((t=this.submitter)===null||t===void 0?void 0:t.getAttribute("formaction"))||this.formElement.getAttribute("action")||e||""}get body(){return this.enctype==Ut.urlEncoded||this.method==Y.get?new URLSearchParams(this.stringFormData):this.formData}get enctype(){var t;return Nc(((t=this.submitter)===null||t===void 0?void 0:t.getAttribute("formenctype"))||this.formElement.enctype)}get isIdempotent(){return this.fetchRequest.isIdempotent}get stringFormData(){return[...this.formData].reduce((t,[e,n])=>t.concat(typeof n=="string"?[[e,n]]:[]),[])}get confirmationMessage(){return this.formElement.getAttribute("data-turbo-confirm")}get needsConfirmation(){return this.confirmationMessage!==null}async start(){let{initialized:t,requesting:e}=Vt;if(!(this.needsConfirmation&&!fe.confirmMethod(this.confirmationMessage,this.formElement))&&this.state==t)return this.state=e,this.fetchRequest.perform()}stop(){let{stopping:t,stopped:e}=Vt;if(this.state!=t&&this.state!=e)return this.state=t,this.fetchRequest.cancel(),!0}prepareHeadersForRequest(t,e){if(!e.isIdempotent){let n=Bc(Co("csrf-param"))||Co("csrf-token");n&&(t["X-CSRF-Token"]=n),t.Accept=[de.contentType,t.Accept].join(", ")}}requestStarted(t){var e;this.state=Vt.waiting,(e=this.submitter)===null||e===void 0||e.setAttribute("disabled",""),tt("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(t,e){this.result={success:e.succeeded,fetchResponse:e}}requestSucceededWithResponse(t,e){if(e.clientError||e.serverError)this.delegate.formSubmissionFailedWithResponse(this,e);else if(this.requestMustRedirect(t)&&Fc(e)){let n=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,n)}else this.state=Vt.receiving,this.result={success:!0,fetchResponse:e},this.delegate.formSubmissionSucceededWithResponse(this,e)}requestFailedWithResponse(t,e){this.result={success:!1,fetchResponse:e},this.delegate.formSubmissionFailedWithResponse(this,e)}requestErrored(t,e){this.result={success:!1,error:e},this.delegate.formSubmissionErrored(this,e)}requestFinished(t){var e;this.state=Vt.stopped,(e=this.submitter)===null||e===void 0||e.removeAttribute("disabled"),tt("turbo:submit-end",{target:this.formElement,detail:Object.assign({formSubmission:this},this.result)}),this.delegate.formSubmissionFinished(this)}requestMustRedirect(t){return!t.isIdempotent&&this.mustRedirect}};function Mc(i,t){let e=new FormData(i),n=t?.getAttribute("name"),r=t?.getAttribute("value");return n&&r!=null&&e.get(n)!=r&&e.append(n,r),e}function Bc(i){if(i!=null){let e=(document.cookie?document.cookie.split("; "):[]).find(n=>n.startsWith(i));if(e){let n=e.split("=").slice(1).join("=");return n?decodeURIComponent(n):void 0}}}function Co(i){let t=document.querySelector(`meta[name="${i}"]`);return t&&t.content}function Fc(i){return i.statusCode==200&&!i.redirected}function Wc(i,t){let e=new URLSearchParams;for(let[n,r]of t)r instanceof File||e.append(n,r);return i.search=e.toString(),i}var Ve=class{constructor(t){this.element=t}get children(){return[...this.element.children]}hasAnchor(t){return this.getElementForAnchor(t)!=null}getElementForAnchor(t){return t?this.element.querySelector(`[id='${t}'], a[name='${t}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){return this.element.querySelector("[autofocus]")}get permanentElements(){return[...this.element.querySelectorAll("[id][data-turbo-permanent]")]}getPermanentElementById(t){return this.element.querySelector(`#${t}[data-turbo-permanent]`)}getPermanentElementMapForSnapshot(t){let e={};for(let n of this.permanentElements){let{id:r}=n,s=t.getPermanentElementById(r);s&&(e[r]=[n,s])}return e}},mn=class{constructor(t,e){this.submitBubbled=n=>{let r=n.target;if(!n.defaultPrevented&&r instanceof HTMLFormElement&&r.closest("turbo-frame, html")==this.element){let s=n.submitter||void 0;(s?.getAttribute("formmethod")||r.method)!="dialog"&&this.delegate.shouldInterceptFormSubmission(r,s)&&(n.preventDefault(),n.stopImmediatePropagation(),this.delegate.formSubmissionIntercepted(r,s))}},this.delegate=t,this.element=e}start(){this.element.addEventListener("submit",this.submitBubbled)}stop(){this.element.removeEventListener("submit",this.submitBubbled)}},pn=class{constructor(t,e){this.resolveRenderPromise=n=>{},this.resolveInterceptionPromise=n=>{},this.delegate=t,this.element=e}scrollToAnchor(t){let e=this.snapshot.getElementForAnchor(t);e?(this.scrollToElement(e),this.focusElement(e)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(t){this.scrollToAnchor(he(t))}scrollToElement(t){t.scrollIntoView()}focusElement(t){t instanceof HTMLElement&&(t.hasAttribute("tabindex")?t.focus():(t.setAttribute("tabindex","-1"),t.focus(),t.removeAttribute("tabindex")))}scrollToPosition({x:t,y:e}){this.scrollRoot.scrollTo(t,e)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(t){let{isPreview:e,shouldRender:n,newSnapshot:r}=t;if(n)try{this.renderPromise=new Promise(a=>this.resolveRenderPromise=a),this.renderer=t,this.prepareToRenderSnapshot(t);let s=new Promise(a=>this.resolveInterceptionPromise=a);this.delegate.allowsImmediateRender(r,this.resolveInterceptionPromise)||await s,await this.renderSnapshot(t),this.delegate.viewRenderedSnapshot(r,e),this.finishRenderingSnapshot(t)}finally{delete this.renderer,this.resolveRenderPromise(void 0),delete this.renderPromise}else this.invalidate()}invalidate(){this.delegate.viewInvalidated()}prepareToRenderSnapshot(t){this.markAsPreview(t.isPreview),t.prepareToRender()}markAsPreview(t){t?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}async renderSnapshot(t){await t.render()}finishRenderingSnapshot(t){t.finishRendering()}},hr=class extends pn{invalidate(){this.element.innerHTML=""}get snapshot(){return new Ve(this.element)}},gn=class{constructor(t,e){this.clickBubbled=n=>{this.respondsToEventTarget(n.target)?this.clickEvent=n:delete this.clickEvent},this.linkClicked=n=>{this.clickEvent&&this.respondsToEventTarget(n.target)&&n.target instanceof Element&&this.delegate.shouldInterceptLinkClick(n.target,n.detail.url)&&(this.clickEvent.preventDefault(),n.preventDefault(),this.delegate.linkClickIntercepted(n.target,n.detail.url)),delete this.clickEvent},this.willVisit=()=>{delete this.clickEvent},this.delegate=t,this.element=e}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}respondsToEventTarget(t){let e=t instanceof Element?t:t instanceof Node?t.parentElement:null;return e&&e.closest("turbo-frame, html")==this.element}},dr=class{constructor(t){this.permanentElementMap=t}static preservingPermanentElements(t,e){let n=new this(t);n.enter(),e(),n.leave()}enter(){for(let t in this.permanentElementMap){let[,e]=this.permanentElementMap[t];this.replaceNewPermanentElementWithPlaceholder(e)}}leave(){for(let t in this.permanentElementMap){let[e]=this.permanentElementMap[t];this.replaceCurrentPermanentElementWithClone(e),this.replacePlaceholderWithPermanentElement(e)}}replaceNewPermanentElementWithPlaceholder(t){let e=Hc(t);t.replaceWith(e)}replaceCurrentPermanentElementWithClone(t){let e=t.cloneNode(!0);t.replaceWith(e)}replacePlaceholderWithPermanentElement(t){let e=this.getPlaceholderById(t.id);e?.replaceWith(t)}getPlaceholderById(t){return this.placeholders.find(e=>e.content==t)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}};function Hc(i){let t=document.createElement("meta");return t.setAttribute("name","turbo-permanent-placeholder"),t.setAttribute("content",i.id),t}var Ai=class{constructor(t,e,n,r=!0){this.currentSnapshot=t,this.newSnapshot=e,this.isPreview=n,this.willRender=r,this.promise=new Promise((s,o)=>this.resolvingFunctions={resolve:s,reject:o})}get shouldRender(){return!0}prepareToRender(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}createScriptElement(t){if(t.getAttribute("data-turbo-eval")=="false")return t;{let e=document.createElement("script");return this.cspNonce&&(e.nonce=this.cspNonce),e.textContent=t.textContent,e.async=!1,jc(e,t),e}}preservingPermanentElements(t){dr.preservingPermanentElements(this.permanentElementMap,t)}focusFirstAutofocusableElement(){let t=this.connectedSnapshot.firstAutofocusableElement;qc(t)&&t.focus()}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}get cspNonce(){var t;return(t=document.head.querySelector('meta[name="csp-nonce"]'))===null||t===void 0?void 0:t.getAttribute("content")}};function jc(i,t){for(let{name:e,value:n}of[...t.attributes])i.setAttribute(e,n)}function qc(i){return i&&typeof i.focus=="function"}var fr=class extends Ai{get shouldRender(){return!0}async render(){await hn(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await hn(),this.focusFirstAutofocusableElement(),await hn(),this.activateScriptElements()}loadFrameElement(){var t;let e=document.createRange();e.selectNodeContents(this.currentElement),e.deleteContents();let n=this.newElement,r=(t=n.ownerDocument)===null||t===void 0?void 0:t.createRange();r&&(r.selectNodeContents(n),this.currentElement.appendChild(r.extractContents()))}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){let t=this.currentElement.firstElementChild,e=Vc(this.currentElement.getAttribute("data-autoscroll-block"),"end");if(t)return t.scrollIntoView({block:e}),!0}return!1}activateScriptElements(){for(let t of this.newScriptElements){let e=this.createScriptElement(t);t.replaceWith(e)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}};function Vc(i,t){return i=="end"||i=="start"||i=="center"||i=="nearest"?i:t}var bt=class{constructor(){this.hiding=!1,this.value=0,this.visible=!1,this.trickle=()=>{this.setValue(this.value+Math.random()/100)},this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}static get defaultCSS(){return Oo`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 9999;
        transition:
          width ${bt.animationDuration}ms ease-out,
          opacity ${bt.animationDuration/2}ms ${bt.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(t){this.value=t,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(t){this.progressElement.style.opacity="0",setTimeout(t,bt.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,bt.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){let t=document.createElement("style");return t.type="text/css",t.textContent=bt.defaultCSS,t}createProgressElement(){let t=document.createElement("div");return t.className="turbo-progress-bar",t}};bt.animationDuration=300;var mr=class extends Ve{constructor(){super(...arguments),this.detailsByOuterHTML=this.children.filter(t=>!Kc(t)).map(t=>Jc(t)).reduce((t,e)=>{let{outerHTML:n}=e,r=n in t?t[n]:{type:Uc(e),tracked:$c(e),elements:[]};return Object.assign(Object.assign({},t),{[n]:Object.assign(Object.assign({},r),{elements:[...r.elements,e]})})},{})}get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(t=>this.detailsByOuterHTML[t].tracked).join("")}getScriptElementsNotInSnapshot(t){return this.getElementsMatchingTypeNotInSnapshot("script",t)}getStylesheetElementsNotInSnapshot(t){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",t)}getElementsMatchingTypeNotInSnapshot(t,e){return Object.keys(this.detailsByOuterHTML).filter(n=>!(n in e.detailsByOuterHTML)).map(n=>this.detailsByOuterHTML[n]).filter(({type:n})=>n==t).map(({elements:[n]})=>n)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((t,e)=>{let{type:n,tracked:r,elements:s}=this.detailsByOuterHTML[e];return n==null&&!r?[...t,...s]:s.length>1?[...t,...s.slice(1)]:t},[])}getMetaValue(t){let e=this.findMetaElementByName(t);return e?e.getAttribute("content"):null}findMetaElementByName(t){return Object.keys(this.detailsByOuterHTML).reduce((e,n)=>{let{elements:[r]}=this.detailsByOuterHTML[n];return Gc(r,t)?r:e},void 0)}};function Uc(i){if(zc(i))return"script";if(Yc(i))return"stylesheet"}function $c(i){return i.getAttribute("data-turbo-track")=="reload"}function zc(i){return i.tagName.toLowerCase()=="script"}function Kc(i){return i.tagName.toLowerCase()=="noscript"}function Yc(i){let t=i.tagName.toLowerCase();return t=="style"||t=="link"&&i.getAttribute("rel")=="stylesheet"}function Gc(i,t){return i.tagName.toLowerCase()=="meta"&&i.getAttribute("name")==t}function Jc(i){return i.hasAttribute("nonce")&&i.setAttribute("nonce",""),i}var St=class extends Ve{constructor(t,e){super(t),this.headSnapshot=e}static fromHTMLString(t=""){return this.fromDocument(Do(t))}static fromElement(t){return this.fromDocument(t.ownerDocument)}static fromDocument({head:t,body:e}){return new this(e,new mr(t))}clone(){return new St(this.element.cloneNode(!0),this.headSnapshot)}get headElement(){return this.headSnapshot.element}get rootLocation(){var t;let e=(t=this.getSetting("root"))!==null&&t!==void 0?t:"/";return J(e)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}getSetting(t){return this.headSnapshot.getMetaValue(`turbo-${t}`)}},qe;(function(i){i.visitStart="visitStart",i.requestStart="requestStart",i.requestEnd="requestEnd",i.visitEnd="visitEnd"})(qe||(qe={}));var vt;(function(i){i.initialized="initialized",i.started="started",i.canceled="canceled",i.failed="failed",i.completed="completed"})(vt||(vt={}));var Xc={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0},zt;(function(i){i[i.networkFailure=0]="networkFailure",i[i.timeoutFailure=-1]="timeoutFailure",i[i.contentTypeMismatch=-2]="contentTypeMismatch"})(zt||(zt={}));var pr=class{constructor(t,e,n,r={}){this.identifier=yi(),this.timingMetrics={},this.followedRedirect=!1,this.historyChanged=!1,this.scrolled=!1,this.snapshotCached=!1,this.state=vt.initialized,this.delegate=t,this.location=e,this.restorationIdentifier=n||yi();let{action:s,historyChanged:o,referrer:a,snapshotHTML:d,response:f,visitCachedSnapshot:p,willRender:b}=Object.assign(Object.assign({},Xc),r);this.action=s,this.historyChanged=o,this.referrer=a,this.snapshotHTML=d,this.response=f,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.visitCachedSnapshot=p,this.willRender=b,this.scrolled=!b}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==vt.initialized&&(this.recordTimingMetric(qe.visitStart),this.state=vt.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==vt.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=vt.canceled)}complete(){this.state==vt.started&&(this.recordTimingMetric(qe.visitEnd),this.state=vt.completed,this.adapter.visitCompleted(this),this.delegate.visitCompleted(this),this.followRedirect())}fail(){this.state==vt.started&&(this.state=vt.failed,this.adapter.visitFailed(this))}changeHistory(){var t;if(!this.historyChanged){let e=this.location.href===((t=this.referrer)===null||t===void 0?void 0:t.href)?"replace":this.action,n=this.getHistoryMethodForAction(e);this.history.update(n,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new Ei(this,Y.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(qe.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(t=this.response){if(this.response=t,t){let{statusCode:e}=t;_o(e)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,e)}}finishRequest(){this.recordTimingMetric(qe.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){let{statusCode:t,responseHTML:e}=this.response;this.render(async()=>{this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,_o(t)&&e!=null?(await this.view.renderPage(St.fromHTMLString(e),!1,this.willRender),this.adapter.visitRendered(this),this.complete()):(await this.view.renderError(St.fromHTMLString(e)),this.adapter.visitRendered(this),this.fail())})}}getCachedSnapshot(){let t=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(t&&(!he(this.location)||t.hasAnchor(he(this.location)))&&(this.action=="restore"||t.isPreviewable))return t}getPreloadedSnapshot(){if(this.snapshotHTML)return St.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){let t=this.getCachedSnapshot();if(t){let e=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isSamePage?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.view.renderPage(t,e,this.willRender),this.adapter.visitRendered(this),e||this.complete())})}}followRedirect(){var t;this.redirectedToLocation&&!this.followedRedirect&&((t=this.response)===null||t===void 0?void 0:t.redirected)&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(async()=>{this.cacheSnapshot(),this.adapter.visitRendered(this)})}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(t,e){}async requestSucceededWithResponse(t,e){let n=await e.responseHTML,{redirected:r,statusCode:s}=e;n==null?this.recordResponse({statusCode:zt.contentTypeMismatch,redirected:r}):(this.redirectedToLocation=e.redirected?e.location:void 0,this.recordResponse({statusCode:s,responseHTML:n,redirected:r}))}async requestFailedWithResponse(t,e){let n=await e.responseHTML,{redirected:r,statusCode:s}=e;n==null?this.recordResponse({statusCode:zt.contentTypeMismatch,redirected:r}):this.recordResponse({statusCode:s,responseHTML:n,redirected:r})}requestErrored(t,e){this.recordResponse({statusCode:zt.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){this.scrolled||(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){let{scrollPosition:t}=this.restorationData;if(t)return this.view.scrollToPosition(t),!0}scrollToAnchor(){let t=he(this.location);if(t!=null)return this.view.scrollToAnchor(t),!0}recordTimingMetric(t){this.timingMetrics[t]=new Date().getTime()}getTimingMetrics(){return Object.assign({},this.timingMetrics)}getHistoryMethodForAction(t){switch(t){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.isSamePage?!1:this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot().then(t=>t&&this.visitCachedSnapshot(t)),this.snapshotCached=!0)}async render(t){this.cancelRender(),await new Promise(e=>{this.frame=requestAnimationFrame(()=>e())}),await t(),delete this.frame,this.performScroll()}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}};function _o(i){return i>=200&&i<300}var gr=class{constructor(t){this.progressBar=new bt,this.showProgressBar=()=>{this.progressBar.show()},this.session=t}visitProposedToLocation(t,e){this.navigator.startVisit(t,yi(),e)}visitStarted(t){t.loadCachedSnapshot(),t.issueRequest(),t.changeHistory(),t.goToSamePageAnchor()}visitRequestStarted(t){this.progressBar.setValue(0),t.hasCachedSnapshot()||t.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(t){t.loadResponse()}visitRequestFailedWithStatusCode(t,e){switch(e){case zt.networkFailure:case zt.timeoutFailure:case zt.contentTypeMismatch:return this.reload();default:return t.loadResponse()}}visitRequestFinished(t){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitCompleted(t){}pageInvalidated(){this.reload()}visitFailed(t){}visitRendered(t){}formSubmissionStarted(t){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(t){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}reload(){window.location.reload()}get navigator(){return this.session.navigator}},vr=class{constructor(){this.started=!1}start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeStaleElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeStaleElements,!1))}removeStaleElements(){let t=[...document.querySelectorAll('[data-turbo-cache="false"]')];for(let e of t)e.remove()}},br=class{constructor(t){this.started=!1,this.submitCaptured=()=>{removeEventListener("submit",this.submitBubbled,!1),addEventListener("submit",this.submitBubbled,!1)},this.submitBubbled=e=>{if(!e.defaultPrevented){let n=e.target instanceof HTMLFormElement?e.target:void 0,r=e.submitter||void 0;n&&(r?.getAttribute("formmethod")||n.getAttribute("method"))!="dialog"&&this.delegate.willSubmitForm(n,r)&&(e.preventDefault(),this.delegate.formSubmitted(n,r))}},this.delegate=t}start(){this.started||(addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}},yr=class{constructor(t){this.element=t,this.linkInterceptor=new gn(this,t),this.formInterceptor=new mn(this,t)}start(){this.linkInterceptor.start(),this.formInterceptor.start()}stop(){this.linkInterceptor.stop(),this.formInterceptor.stop()}shouldInterceptLinkClick(t,e){return this.shouldRedirect(t)}linkClickIntercepted(t,e){let n=this.findFrameElement(t);n&&n.delegate.linkClickIntercepted(t,e)}shouldInterceptFormSubmission(t,e){return this.shouldSubmit(t,e)}formSubmissionIntercepted(t,e){let n=this.findFrameElement(t,e);n&&(n.removeAttribute("reloadable"),n.delegate.formSubmissionIntercepted(t,e))}shouldSubmit(t,e){var n;let r=Pr(t,e),s=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),o=J((n=s?.content)!==null&&n!==void 0?n:"/");return this.shouldRedirect(t,e)&&bi(r,o)}shouldRedirect(t,e){let n=this.findFrameElement(t,e);return n?n!=t.closest("turbo-frame"):!1}findFrameElement(t,e){let n=e?.getAttribute("data-turbo-frame")||t.getAttribute("data-turbo-frame");if(n&&n!="_top"){let r=this.element.querySelector(`#${n}:not([disabled])`);if(r instanceof Ct)return r}}},Er=class{constructor(t){this.restorationIdentifier=yi(),this.restorationData={},this.started=!1,this.pageLoaded=!1,this.onPopState=e=>{if(this.shouldHandlePopState()){let{turbo:n}=e.state||{};if(n){this.location=new URL(window.location.href);let{restorationIdentifier:r}=n;this.restorationIdentifier=r,this.delegate.historyPoppedToLocationWithRestorationIdentifier(this.location,r)}}},this.onPageLoad=async e=>{await kc(),this.pageLoaded=!0},this.delegate=t}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(t,e){this.update(history.pushState,t,e)}replace(t,e){this.update(history.replaceState,t,e)}update(t,e,n=yi()){let r={turbo:{restorationIdentifier:n}};t.call(history,r,"",e.href),this.location=e,this.restorationIdentifier=n}getRestorationDataForIdentifier(t){return this.restorationData[t]||{}}updateRestorationData(t){let{restorationIdentifier:e}=this,n=this.restorationData[e];this.restorationData[e]=Object.assign(Object.assign({},n),t)}assumeControlOfScrollRestoration(){var t;this.previousScrollRestoration||(this.previousScrollRestoration=(t=history.scrollRestoration)!==null&&t!==void 0?t:"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}},Ar=class{constructor(t){this.started=!1,this.clickCaptured=()=>{removeEventListener("click",this.clickBubbled,!1),addEventListener("click",this.clickBubbled,!1)},this.clickBubbled=e=>{if(this.clickEventIsSignificant(e)){let n=e.composedPath&&e.composedPath()[0]||e.target,r=this.findLinkFromClickTarget(n);if(r){let s=this.getLocationForLink(r);this.delegate.willFollowLinkToLocation(r,s)&&(e.preventDefault(),this.delegate.followedLinkToLocation(r,s))}}},this.delegate=t}start(){this.started||(addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickEventIsSignificant(t){return!(t.target&&t.target.isContentEditable||t.defaultPrevented||t.which>1||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)}findLinkFromClickTarget(t){if(t instanceof Element)return t.closest("a[href]:not([target^=_]):not([download])")}getLocationForLink(t){return J(t.getAttribute("href")||"")}};function Ir(i){return i=="advance"||i=="replace"||i=="restore"}var wr=class{constructor(t){this.delegate=t}proposeVisit(t,e={}){this.delegate.allowsVisitingLocationWithAction(t,e.action)&&(bi(t,this.view.snapshot.rootLocation)?this.delegate.visitProposedToLocation(t,e):window.location.href=t.toString())}startVisit(t,e,n={}){this.stop(),this.currentVisit=new pr(this,J(t),e,Object.assign({referrer:this.location},n)),this.currentVisit.start()}submitForm(t,e){this.stop(),this.formSubmission=new fe(this,t,e,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}formSubmissionStarted(t){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(t)}async formSubmissionSucceededWithResponse(t,e){if(t==this.formSubmission){let n=await e.responseHTML;if(n){t.method!=Y.get&&this.view.clearSnapshotCache();let{statusCode:r,redirected:s}=e,a={action:this.getActionForFormSubmission(t),response:{statusCode:r,responseHTML:n,redirected:s}};this.proposeVisit(e.location,a)}}}async formSubmissionFailedWithResponse(t,e){let n=await e.responseHTML;if(n){let r=St.fromHTMLString(n);e.serverError?await this.view.renderError(r):await this.view.renderPage(r),this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(t,e){console.error(e)}formSubmissionFinished(t){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(t)}visitStarted(t){this.delegate.visitStarted(t)}visitCompleted(t){this.delegate.visitCompleted(t)}locationWithActionIsSamePage(t,e){let n=he(t),r=he(this.view.lastRenderedLocation),s=e==="restore"&&typeof n>"u";return e!=="replace"&&ar(t)===ar(this.view.lastRenderedLocation)&&(s||n!=null&&n!==r)}visitScrolledToSamePageLocation(t,e){this.delegate.visitScrolledToSamePageLocation(t,e)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}getActionForFormSubmission(t){let{formElement:e,submitter:n}=t,r=dn("data-turbo-action",n,e);return Ir(r)?r:"advance"}},Pt;(function(i){i[i.initial=0]="initial",i[i.loading=1]="loading",i[i.interactive=2]="interactive",i[i.complete=3]="complete"})(Pt||(Pt={}));var Sr=class{constructor(t){this.stage=Pt.initial,this.started=!1,this.interpretReadyState=()=>{let{readyState:e}=this;e=="interactive"?this.pageIsInteractive():e=="complete"&&this.pageIsComplete()},this.pageWillUnload=()=>{this.delegate.pageWillUnload()},this.delegate=t}start(){this.started||(this.stage==Pt.initial&&(this.stage=Pt.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}pageIsInteractive(){this.stage==Pt.loading&&(this.stage=Pt.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==Pt.interactive&&(this.stage=Pt.complete,this.delegate.pageLoaded())}get readyState(){return document.readyState}},Cr=class{constructor(t){this.started=!1,this.onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},this.delegate=t}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}updatePosition(t){this.delegate.scrollPositionChanged(t)}},_r=class{constructor(t){this.sources=new Set,this.started=!1,this.inspectFetchResponse=e=>{let n=Qc(e);n&&Zc(n)&&(e.preventDefault(),this.receiveMessageResponse(n))},this.receiveMessageEvent=e=>{this.started&&typeof e.data=="string"&&this.receiveMessageHTML(e.data)},this.delegate=t}start(){this.started||(this.started=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(t){this.streamSourceIsConnected(t)||(this.sources.add(t),t.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(t){this.streamSourceIsConnected(t)&&(this.sources.delete(t),t.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(t){return this.sources.has(t)}async receiveMessageResponse(t){let e=await t.responseHTML;e&&this.receiveMessageHTML(e)}receiveMessageHTML(t){this.delegate.receivedMessageFromStream(new de(t))}};function Qc(i){var t;let e=(t=i.detail)===null||t===void 0?void 0:t.fetchResponse;if(e instanceof fn)return e}function Zc(i){var t;return((t=i.contentType)!==null&&t!==void 0?t:"").startsWith(de.contentType)}var xr=class extends Ai{async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){let{documentElement:t,head:e,body:n}=document;t.replaceChild(this.newHead,e),t.replaceChild(this.newElement,n)}activateScriptElements(){for(let t of this.scriptElements){let e=t.parentNode;if(e){let n=this.createScriptElement(t);e.replaceChild(n,t)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return[...document.documentElement.querySelectorAll("script")]}},vn=class extends Ai{get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}prepareToRender(){this.mergeHead()}async render(){this.willRender&&this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}mergeHead(){this.copyNewHeadStylesheetElements(),this.copyNewHeadScriptElements(),this.removeCurrentHeadProvisionalElements(),this.copyNewHeadProvisionalElements()}replaceBody(){this.preservingPermanentElements(()=>{this.activateNewBody(),this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}copyNewHeadStylesheetElements(){for(let t of this.newHeadStylesheetElements)document.head.appendChild(t)}copyNewHeadScriptElements(){for(let t of this.newHeadScriptElements)document.head.appendChild(this.createScriptElement(t))}removeCurrentHeadProvisionalElements(){for(let t of this.currentHeadProvisionalElements)document.head.removeChild(t)}copyNewHeadProvisionalElements(){for(let t of this.newHeadProvisionalElements)document.head.appendChild(t)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(let t of this.newBodyScriptElements){let e=this.createScriptElement(t);t.replaceWith(e)}}assignNewBody(){document.body&&this.newElement instanceof HTMLBodyElement?document.body.replaceWith(this.newElement):document.documentElement.appendChild(this.newElement)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}},Tr=class{constructor(t){this.keys=[],this.snapshots={},this.size=t}has(t){return un(t)in this.snapshots}get(t){if(this.has(t)){let e=this.read(t);return this.touch(t),e}}put(t,e){return this.write(t,e),this.touch(t),e}clear(){this.snapshots={}}read(t){return this.snapshots[un(t)]}write(t,e){this.snapshots[un(t)]=e}touch(t){let e=un(t),n=this.keys.indexOf(e);n>-1&&this.keys.splice(n,1),this.keys.unshift(e),this.trim()}trim(){for(let t of this.keys.splice(this.size))delete this.snapshots[t]}},Lr=class extends pn{constructor(){super(...arguments),this.snapshotCache=new Tr(10),this.lastRenderedLocation=new URL(location.href)}renderPage(t,e=!1,n=!0){let r=new vn(this.snapshot,t,e,n);return this.render(r)}renderError(t){let e=new xr(this.snapshot,t,!1);return this.render(e)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(){if(this.shouldCacheSnapshot){this.delegate.viewWillCacheSnapshot();let{snapshot:t,lastRenderedLocation:e}=this;await Oc();let n=t.clone();return this.snapshotCache.put(e,n),n}}getCachedSnapshotForLocation(t){return this.snapshotCache.get(t)}get snapshot(){return St.fromElement(this.element)}get shouldCacheSnapshot(){return this.snapshot.isCacheable}},Rr=class{constructor(){this.navigator=new wr(this),this.history=new Er(this),this.view=new Lr(this,document.documentElement),this.adapter=new gr(this),this.pageObserver=new Sr(this),this.cacheObserver=new vr,this.linkClickObserver=new Ar(this),this.formSubmitObserver=new br(this),this.scrollObserver=new Cr(this),this.streamObserver=new _r(this),this.frameRedirector=new yr(document.documentElement),this.drive=!0,this.enabled=!0,this.progressBarDelay=500,this.started=!1}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.started=!1)}registerAdapter(t){this.adapter=t}visit(t,e={}){this.navigator.proposeVisit(J(t),e)}connectStreamSource(t){this.streamObserver.connectStreamSource(t)}disconnectStreamSource(t){this.streamObserver.disconnectStreamSource(t)}renderStreamMessage(t){document.documentElement.appendChild(de.wrap(t).fragment)}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(t){this.progressBarDelay=t}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}historyPoppedToLocationWithRestorationIdentifier(t,e){this.enabled?this.navigator.startVisit(t,e,{action:"restore",historyChanged:!0}):this.adapter.pageInvalidated()}scrollPositionChanged(t){this.history.updateRestorationData({scrollPosition:t})}willFollowLinkToLocation(t,e){return this.elementDriveEnabled(t)&&bi(e,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(t,e)}followedLinkToLocation(t,e){let n=this.getActionForLink(t);this.convertLinkWithMethodClickToFormSubmission(t)||this.visit(e.href,{action:n})}convertLinkWithMethodClickToFormSubmission(t){let e=t.getAttribute("data-turbo-method");if(e){let n=document.createElement("form");n.method=e,n.action=t.getAttribute("href")||"undefined",n.hidden=!0,t.hasAttribute("data-turbo-confirm")&&n.setAttribute("data-turbo-confirm",t.getAttribute("data-turbo-confirm"));let r=this.getTargetFrameForLink(t);return r?(n.setAttribute("data-turbo-frame",r),n.addEventListener("turbo:submit-start",()=>n.remove())):n.addEventListener("submit",()=>n.remove()),document.body.appendChild(n),tt("submit",{cancelable:!0,target:n})}else return!1}allowsVisitingLocationWithAction(t,e){return this.locationWithActionIsSamePage(t,e)||this.applicationAllowsVisitingLocation(t)}visitProposedToLocation(t,e){xo(t),this.adapter.visitProposedToLocation(t,e)}visitStarted(t){xo(t.location),t.silent||this.notifyApplicationAfterVisitingLocation(t.location,t.action)}visitCompleted(t){this.notifyApplicationAfterPageLoad(t.getTimingMetrics())}locationWithActionIsSamePage(t,e){return this.navigator.locationWithActionIsSamePage(t,e)}visitScrolledToSamePageLocation(t,e){this.notifyApplicationAfterVisitingSamePageLocation(t,e)}willSubmitForm(t,e){let n=Pr(t,e);return this.elementDriveEnabled(t)&&(!e||this.elementDriveEnabled(e))&&bi(J(n),this.snapshot.rootLocation)}formSubmitted(t,e){this.navigator.submitForm(t,e)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(t){this.renderStreamMessage(t)}viewWillCacheSnapshot(){var t;!((t=this.navigator.currentVisit)===null||t===void 0)&&t.silent||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:t},e){return!this.notifyApplicationBeforeRender(t,e).defaultPrevented}viewRenderedSnapshot(t,e){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender()}viewInvalidated(){this.adapter.pageInvalidated()}frameLoaded(t){this.notifyApplicationAfterFrameLoad(t)}frameRendered(t,e){this.notifyApplicationAfterFrameRender(t,e)}applicationAllowsFollowingLinkToLocation(t,e){return!this.notifyApplicationAfterClickingLinkToLocation(t,e).defaultPrevented}applicationAllowsVisitingLocation(t){return!this.notifyApplicationBeforeVisitingLocation(t).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(t,e){return tt("turbo:click",{target:t,detail:{url:e.href},cancelable:!0})}notifyApplicationBeforeVisitingLocation(t){return tt("turbo:before-visit",{detail:{url:t.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(t,e){return lr(document.documentElement),tt("turbo:visit",{detail:{url:t.href,action:e}})}notifyApplicationBeforeCachingSnapshot(){return tt("turbo:before-cache")}notifyApplicationBeforeRender(t,e){return tt("turbo:before-render",{detail:{newBody:t,resume:e},cancelable:!0})}notifyApplicationAfterRender(){return tt("turbo:render")}notifyApplicationAfterPageLoad(t={}){return cr(document.documentElement),tt("turbo:load",{detail:{url:this.location.href,timing:t}})}notifyApplicationAfterVisitingSamePageLocation(t,e){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:t.toString(),newURL:e.toString()}))}notifyApplicationAfterFrameLoad(t){return tt("turbo:frame-load",{target:t})}notifyApplicationAfterFrameRender(t,e){return tt("turbo:frame-render",{detail:{fetchResponse:t},target:e,cancelable:!0})}elementDriveEnabled(t){let e=t?.closest("[data-turbo]");return this.drive?e?e.getAttribute("data-turbo")!="false":!0:e?e.getAttribute("data-turbo")=="true":!1}getActionForLink(t){let e=t.getAttribute("data-turbo-action");return Ir(e)?e:"advance"}getTargetFrameForLink(t){let e=t.getAttribute("data-turbo-frame");if(e)return e;{let n=t.closest("turbo-frame");if(n)return n.id}}get snapshot(){return this.view.snapshot}};function xo(i){Object.defineProperties(i,tu)}var tu={absoluteURL:{get(){return this.toString()}}},G=new Rr,{navigator:eu}=G;function ko(){G.start()}function iu(i){G.registerAdapter(i)}function nu(i,t){G.visit(i,t)}function ru(i){G.connectStreamSource(i)}function su(i){G.disconnectStreamSource(i)}function ou(i){G.renderStreamMessage(i)}function au(){G.clearCache()}function lu(i){G.setProgressBarDelay(i)}function cu(i){fe.confirmMethod=i}var uu=Object.freeze({__proto__:null,navigator:eu,session:G,PageRenderer:vn,PageSnapshot:St,start:ko,registerAdapter:iu,visit:nu,connectStreamSource:ru,disconnectStreamSource:su,renderStreamMessage:ou,clearCache:au,setProgressBarDelay:lu,setConfirmMethod:cu}),Dr=class{constructor(t){this.fetchResponseLoaded=e=>{},this.currentFetchRequest=null,this.resolveVisitPromise=()=>{},this.connected=!1,this.hasBeenLoaded=!1,this.settingSourceURL=!1,this.element=t,this.view=new hr(this,this.element),this.appearanceObserver=new ur(this,this.element),this.linkInterceptor=new gn(this,this.element),this.formInterceptor=new mn(this,this.element)}connect(){this.connected||(this.connected=!0,this.reloadable=!1,this.loadingStyle==$t.lazy&&this.appearanceObserver.start(),this.linkInterceptor.start(),this.formInterceptor.start(),this.sourceURLChanged())}disconnect(){this.connected&&(this.connected=!1,this.appearanceObserver.stop(),this.linkInterceptor.stop(),this.formInterceptor.stop())}disabledChanged(){this.loadingStyle==$t.eager&&this.loadSourceURL()}sourceURLChanged(){(this.loadingStyle==$t.eager||this.hasBeenLoaded)&&this.loadSourceURL()}loadingStyleChanged(){this.loadingStyle==$t.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.loadSourceURL())}async loadSourceURL(){if(!this.settingSourceURL&&this.enabled&&this.isActive&&(this.reloadable||this.sourceURL!=this.currentURL)){let t=this.currentURL;if(this.currentURL=this.sourceURL,this.sourceURL)try{this.element.loaded=this.visit(J(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,this.hasBeenLoaded=!0}catch(e){throw this.currentURL=t,e}}}async loadResponse(t){(t.redirected||t.succeeded&&t.isHTML)&&(this.sourceURL=t.response.url);try{let e=await t.responseHTML;if(e){let{body:n}=Do(e),r=new Ve(await this.extractForeignFrameElement(n)),s=new fr(this.view.snapshot,r,!1,!1);this.view.renderPromise&&await this.view.renderPromise,await this.view.render(s),G.frameRendered(t,this.element),G.frameLoaded(this.element),this.fetchResponseLoaded(t)}}catch(e){console.error(e),this.view.invalidate()}finally{this.fetchResponseLoaded=()=>{}}}elementAppearedInViewport(t){this.loadSourceURL()}shouldInterceptLinkClick(t,e){return t.hasAttribute("data-turbo-method")?!1:this.shouldInterceptNavigation(t)}linkClickIntercepted(t,e){this.reloadable=!0,this.navigateFrame(t,e)}shouldInterceptFormSubmission(t,e){return this.shouldInterceptNavigation(t,e)}formSubmissionIntercepted(t,e){this.formSubmission&&this.formSubmission.stop(),this.reloadable=!1,this.formSubmission=new fe(this,t,e);let{fetchRequest:n}=this.formSubmission;this.prepareHeadersForRequest(n.headers,n),this.formSubmission.start()}prepareHeadersForRequest(t,e){t["Turbo-Frame"]=this.id}requestStarted(t){lr(this.element)}requestPreventedHandlingResponse(t,e){this.resolveVisitPromise()}async requestSucceededWithResponse(t,e){await this.loadResponse(e),this.resolveVisitPromise()}requestFailedWithResponse(t,e){console.error(e),this.resolveVisitPromise()}requestErrored(t,e){console.error(e),this.resolveVisitPromise()}requestFinished(t){cr(this.element)}formSubmissionStarted({formElement:t}){lr(t,this.findFrameElement(t))}formSubmissionSucceededWithResponse(t,e){let n=this.findFrameElement(t.formElement,t.submitter);this.proposeVisitIfNavigatedWithAction(n,t.formElement,t.submitter),n.delegate.loadResponse(e)}formSubmissionFailedWithResponse(t,e){this.element.delegate.loadResponse(e)}formSubmissionErrored(t,e){console.error(e)}formSubmissionFinished({formElement:t}){cr(t,this.findFrameElement(t))}allowsImmediateRender(t,e){return!0}viewRenderedSnapshot(t,e){}viewInvalidated(){}async visit(t){var e;let n=new Ei(this,Y.get,t,new URLSearchParams,this.element);return(e=this.currentFetchRequest)===null||e===void 0||e.cancel(),this.currentFetchRequest=n,new Promise(r=>{this.resolveVisitPromise=()=>{this.resolveVisitPromise=()=>{},this.currentFetchRequest=null,r()},n.perform()})}navigateFrame(t,e,n){let r=this.findFrameElement(t,n);this.proposeVisitIfNavigatedWithAction(r,t,n),r.setAttribute("reloadable",""),r.src=e}proposeVisitIfNavigatedWithAction(t,e,n){let r=dn("data-turbo-action",n,e,t);if(Ir(r)){let{visitCachedSnapshot:s}=new Or(t);t.delegate.fetchResponseLoaded=o=>{if(t.src){let{statusCode:a,redirected:d}=o,f=t.ownerDocument.documentElement.outerHTML,p={statusCode:a,redirected:d,responseHTML:f};G.visit(t.src,{action:r,response:p,visitCachedSnapshot:s,willRender:!1})}}}}findFrameElement(t,e){var n;let r=dn("data-turbo-frame",e,t)||this.element.getAttribute("target");return(n=To(r))!==null&&n!==void 0?n:this.element}async extractForeignFrameElement(t){let e,n=CSS.escape(this.id);try{if(e=Lo(t.querySelector(`turbo-frame#${n}`),this.currentURL))return e;if(e=Lo(t.querySelector(`turbo-frame[src][recurse~=${n}]`),this.currentURL))return await e.loaded,await this.extractForeignFrameElement(e);console.error(`Response has no matching <turbo-frame id="${n}"> element`)}catch(r){console.error(r)}return new Ct}formActionIsVisitable(t,e){let n=Pr(t,e);return bi(J(n),this.rootLocation)}shouldInterceptNavigation(t,e){let n=dn("data-turbo-frame",e,t)||this.element.getAttribute("target");if(t instanceof HTMLFormElement&&!this.formActionIsVisitable(t,e)||!this.enabled||n=="_top")return!1;if(n){let r=To(n);if(r)return!r.disabled}return!(!G.elementDriveEnabled(t)||e&&!G.elementDriveEnabled(e))}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}get reloadable(){return this.findFrameElement(this.element).hasAttribute("reloadable")}set reloadable(t){let e=this.findFrameElement(this.element);t?e.setAttribute("reloadable",""):e.removeAttribute("reloadable")}set sourceURL(t){this.settingSourceURL=!0,this.element.src=t??null,this.currentURL=this.element.src,this.settingSourceURL=!1}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||this.resolveVisitPromise()!==void 0}get isActive(){return this.element.isActive&&this.connected}get rootLocation(){var t;let e=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),n=(t=e?.content)!==null&&t!==void 0?t:"/";return J(n)}},Or=class{constructor(t){this.visitCachedSnapshot=({element:e})=>{var n;let{id:r,clone:s}=this;(n=e.querySelector("#"+r))===null||n===void 0||n.replaceWith(s)},this.clone=t.cloneNode(!0),this.id=t.id}};function To(i){if(i!=null){let t=document.getElementById(i);if(t instanceof Ct)return t}}function Lo(i,t){if(i){let e=i.getAttribute("src");if(e!=null&&t!=null&&xc(e,t))throw new Error(`Matching <turbo-frame id="${i.id}"> element has a source URL which references itself`);if(i.ownerDocument!==document&&(i=document.importNode(i,!0)),i instanceof Ct)return i.connectedCallback(),i.disconnectedCallback(),i}}var hu={after(){this.targetElements.forEach(i=>{var t;return(t=i.parentElement)===null||t===void 0?void 0:t.insertBefore(this.templateContent,i.nextSibling)})},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(i=>i.append(this.templateContent))},before(){this.targetElements.forEach(i=>{var t;return(t=i.parentElement)===null||t===void 0?void 0:t.insertBefore(this.templateContent,i)})},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(i=>i.prepend(this.templateContent))},remove(){this.targetElements.forEach(i=>i.remove())},replace(){this.targetElements.forEach(i=>i.replaceWith(this.templateContent))},update(){this.targetElements.forEach(i=>{i.innerHTML="",i.append(this.templateContent)})}},kr=class extends HTMLElement{async connectedCallback(){try{await this.render()}catch(t){console.error(t)}finally{this.disconnect()}}async render(){var t;return(t=this.renderPromise)!==null&&t!==void 0?t:this.renderPromise=(async()=>{this.dispatchEvent(this.beforeRenderEvent)&&(await hn(),this.performAction())})()}disconnect(){try{this.remove()}catch{}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(t=>t.remove())}get duplicateChildren(){var t;let e=this.targetElements.flatMap(r=>[...r.children]).filter(r=>!!r.id),n=[...(t=this.templateContent)===null||t===void 0?void 0:t.children].filter(r=>!!r.id).map(r=>r.id);return e.filter(r=>n.includes(r.id))}get performAction(){if(this.action){let t=hu[this.action];if(t)return t;this.raise("unknown action")}this.raise("action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;this.raise("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.raise("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}raise(t){throw new Error(`${this.description}: ${t}`)}get description(){var t,e;return(e=((t=this.outerHTML.match(/<[^>]+>/))!==null&&t!==void 0?t:[])[0])!==null&&e!==void 0?e:"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0})}get targetElementsById(){var t;let e=(t=this.ownerDocument)===null||t===void 0?void 0:t.getElementById(this.target);return e!==null?[e]:[]}get targetElementsByQuery(){var t;let e=(t=this.ownerDocument)===null||t===void 0?void 0:t.querySelectorAll(this.targets);return e.length!==0?Array.prototype.slice.call(e):[]}};Ct.delegateConstructor=Dr;customElements.define("turbo-frame",Ct);customElements.define("turbo-stream",kr);(()=>{let i=document.currentScript;if(!!i&&!i.hasAttribute("data-turbo-suppress-warning")){for(;i=i.parentElement;)if(i==document.body)return console.warn(Oo`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your application’s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        ——
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,i.outerHTML)}})();window.Turbo=uu;ko();var Tn={};yc(Tn,{afterMain:()=>Fo,afterRead:()=>No,afterWrite:()=>jo,applyStyles:()=>$e,arrow:()=>yn,auto:()=>wi,basePlacements:()=>It,beforeMain:()=>Mo,beforeRead:()=>Po,beforeWrite:()=>Wo,bottom:()=>j,clippingParents:()=>Nr,computeStyles:()=>ze,createPopper:()=>Di,createPopperBase:()=>Jo,createPopperLite:()=>Xo,detectOverflow:()=>Q,end:()=>Kt,eventListeners:()=>Ke,flip:()=>Sn,hide:()=>Cn,left:()=>M,main:()=>Bo,modifierPhases:()=>Br,offset:()=>_n,placements:()=>Ci,popper:()=>me,popperGenerator:()=>we,popperOffsets:()=>Je,preventOverflow:()=>xn,read:()=>Io,reference:()=>Mr,right:()=>F,start:()=>_t,top:()=>P,variationPlacements:()=>bn,viewport:()=>Si,write:()=>Ho});var P="top",j="bottom",F="right",M="left",wi="auto",It=[P,j,F,M],_t="start",Kt="end",Nr="clippingParents",Si="viewport",me="popper",Mr="reference",bn=It.reduce(function(i,t){return i.concat([t+"-"+_t,t+"-"+Kt])},[]),Ci=[].concat(It,[wi]).reduce(function(i,t){return i.concat([t,t+"-"+_t,t+"-"+Kt])},[]),Po="beforeRead",Io="read",No="afterRead",Mo="beforeMain",Bo="main",Fo="afterMain",Wo="beforeWrite",Ho="write",jo="afterWrite",Br=[Po,Io,No,Mo,Bo,Fo,Wo,Ho,jo];function U(i){return i?(i.nodeName||"").toLowerCase():null}function W(i){if(i==null)return window;if(i.toString()!=="[object Window]"){var t=i.ownerDocument;return t&&t.defaultView||window}return i}function xt(i){var t=W(i).Element;return i instanceof t||i instanceof Element}function V(i){var t=W(i).HTMLElement;return i instanceof t||i instanceof HTMLElement}function Ue(i){if(typeof ShadowRoot>"u")return!1;var t=W(i).ShadowRoot;return i instanceof t||i instanceof ShadowRoot}function du(i){var t=i.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},s=t.elements[e];!V(s)||!U(s)||(Object.assign(s.style,n),Object.keys(r).forEach(function(o){var a=r[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function fu(i){var t=i.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(n){var r=t.elements[n],s=t.attributes[n]||{},o=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:e[n]),a=o.reduce(function(d,f){return d[f]="",d},{});!V(r)||!U(r)||(Object.assign(r.style,a),Object.keys(s).forEach(function(d){r.removeAttribute(d)}))})}}var $e={name:"applyStyles",enabled:!0,phase:"write",fn:du,effect:fu,requires:["computeStyles"]};function $(i){return i.split("-")[0]}var yt=Math.max,pe=Math.min,Nt=Math.round;function dt(i,t){t===void 0&&(t=!1);var e=i.getBoundingClientRect(),n=1,r=1;if(V(i)&&t){var s=i.offsetHeight,o=i.offsetWidth;o>0&&(n=Nt(e.width)/o||1),s>0&&(r=Nt(e.height)/s||1)}return{width:e.width/n,height:e.height/r,top:e.top/r,right:e.right/n,bottom:e.bottom/r,left:e.left/n,x:e.left/n,y:e.top/r}}function ge(i){var t=dt(i),e=i.offsetWidth,n=i.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:i.offsetLeft,y:i.offsetTop,width:e,height:n}}function _i(i,t){var e=t.getRootNode&&t.getRootNode();if(i.contains(t))return!0;if(e&&Ue(e)){var n=t;do{if(n&&i.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function X(i){return W(i).getComputedStyle(i)}function Fr(i){return["table","td","th"].indexOf(U(i))>=0}function z(i){return((xt(i)?i.ownerDocument:i.document)||window.document).documentElement}function Mt(i){return U(i)==="html"?i:i.assignedSlot||i.parentNode||(Ue(i)?i.host:null)||z(i)}function qo(i){return!V(i)||X(i).position==="fixed"?null:i.offsetParent}function mu(i){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,e=navigator.userAgent.indexOf("Trident")!==-1;if(e&&V(i)){var n=X(i);if(n.position==="fixed")return null}var r=Mt(i);for(Ue(r)&&(r=r.host);V(r)&&["html","body"].indexOf(U(r))<0;){var s=X(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function Et(i){for(var t=W(i),e=qo(i);e&&Fr(e)&&X(e).position==="static";)e=qo(e);return e&&(U(e)==="html"||U(e)==="body"&&X(e).position==="static")?t:e||mu(i)||t}function ve(i){return["top","bottom"].indexOf(i)>=0?"x":"y"}function be(i,t,e){return yt(i,pe(t,e))}function Vo(i,t,e){var n=be(i,t,e);return n>e?e:n}function xi(){return{top:0,right:0,bottom:0,left:0}}function Ti(i){return Object.assign({},xi(),i)}function Li(i,t){return t.reduce(function(e,n){return e[n]=i,e},{})}var pu=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,Ti(typeof t!="number"?t:Li(t,It))};function gu(i){var t,e=i.state,n=i.name,r=i.options,s=e.elements.arrow,o=e.modifiersData.popperOffsets,a=$(e.placement),d=ve(a),f=[M,F].indexOf(a)>=0,p=f?"height":"width";if(!(!s||!o)){var b=pu(r.padding,e),y=ge(s),A=d==="y"?P:M,_=d==="y"?j:F,w=e.rects.reference[p]+e.rects.reference[d]-o[d]-e.rects.popper[p],E=o[d]-e.rects.reference[d],g=Et(s),m=g?d==="y"?g.clientHeight||0:g.clientWidth||0:0,c=w/2-E/2,l=b[A],h=m-y[p]-b[_],u=m/2-y[p]/2+c,S=be(l,u,h),L=d;e.modifiersData[n]=(t={},t[L]=S,t.centerOffset=S-u,t)}}function vu(i){var t=i.state,e=i.options,n=e.element,r=n===void 0?"[data-popper-arrow]":n;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||!_i(t.elements.popper,r)||(t.elements.arrow=r))}var yn={name:"arrow",enabled:!0,phase:"main",fn:gu,effect:vu,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ft(i){return i.split("-")[1]}var bu={top:"auto",right:"auto",bottom:"auto",left:"auto"};function yu(i){var t=i.x,e=i.y,n=window,r=n.devicePixelRatio||1;return{x:Nt(t*r)/r||0,y:Nt(e*r)/r||0}}function Uo(i){var t,e=i.popper,n=i.popperRect,r=i.placement,s=i.variation,o=i.offsets,a=i.position,d=i.gpuAcceleration,f=i.adaptive,p=i.roundOffsets,b=i.isFixed,y=o.x,A=y===void 0?0:y,_=o.y,w=_===void 0?0:_,E=typeof p=="function"?p({x:A,y:w}):{x:A,y:w};A=E.x,w=E.y;var g=o.hasOwnProperty("x"),m=o.hasOwnProperty("y"),c=M,l=P,h=window;if(f){var u=Et(e),S="clientHeight",L="clientWidth";if(u===W(e)&&(u=z(e),X(u).position!=="static"&&a==="absolute"&&(S="scrollHeight",L="scrollWidth")),u=u,r===P||(r===M||r===F)&&s===Kt){l=j;var O=b&&u===h&&h.visualViewport?h.visualViewport.height:u[S];w-=O-n.height,w*=d?1:-1}if(r===M||(r===P||r===j)&&s===Kt){c=F;var H=b&&u===h&&h.visualViewport?h.visualViewport.width:u[L];A-=H-n.width,A*=d?1:-1}}var k=Object.assign({position:a},f&&bu),st=p===!0?yu({x:A,y:w}):{x:A,y:w};if(A=st.x,w=st.y,d){var ot;return Object.assign({},k,(ot={},ot[l]=m?"0":"",ot[c]=g?"0":"",ot.transform=(h.devicePixelRatio||1)<=1?"translate("+A+"px, "+w+"px)":"translate3d("+A+"px, "+w+"px, 0)",ot))}return Object.assign({},k,(t={},t[l]=m?w+"px":"",t[c]=g?A+"px":"",t.transform="",t))}function Eu(i){var t=i.state,e=i.options,n=e.gpuAcceleration,r=n===void 0?!0:n,s=e.adaptive,o=s===void 0?!0:s,a=e.roundOffsets,d=a===void 0?!0:a;if(!1)var f;var p={placement:$(t.placement),variation:ft(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Uo(Object.assign({},p,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:d})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Uo(Object.assign({},p,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var ze={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Eu,data:{}};var En={passive:!0};function Au(i){var t=i.state,e=i.instance,n=i.options,r=n.scroll,s=r===void 0?!0:r,o=n.resize,a=o===void 0?!0:o,d=W(t.elements.popper),f=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&f.forEach(function(p){p.addEventListener("scroll",e.update,En)}),a&&d.addEventListener("resize",e.update,En),function(){s&&f.forEach(function(p){p.removeEventListener("scroll",e.update,En)}),a&&d.removeEventListener("resize",e.update,En)}}var Ke={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Au,data:{}};var wu={left:"right",right:"left",bottom:"top",top:"bottom"};function Ye(i){return i.replace(/left|right|bottom|top/g,function(t){return wu[t]})}var Su={start:"end",end:"start"};function An(i){return i.replace(/start|end/g,function(t){return Su[t]})}function ye(i){var t=W(i),e=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:e,scrollTop:n}}function Ee(i){return dt(z(i)).left+ye(i).scrollLeft}function Wr(i){var t=W(i),e=z(i),n=t.visualViewport,r=e.clientWidth,s=e.clientHeight,o=0,a=0;return n&&(r=n.width,s=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=n.offsetLeft,a=n.offsetTop)),{width:r,height:s,x:o+Ee(i),y:a}}function Hr(i){var t,e=z(i),n=ye(i),r=(t=i.ownerDocument)==null?void 0:t.body,s=yt(e.scrollWidth,e.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=yt(e.scrollHeight,e.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-n.scrollLeft+Ee(i),d=-n.scrollTop;return X(r||e).direction==="rtl"&&(a+=yt(e.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:d}}function Ae(i){var t=X(i),e=t.overflow,n=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+r+n)}function wn(i){return["html","body","#document"].indexOf(U(i))>=0?i.ownerDocument.body:V(i)&&Ae(i)?i:wn(Mt(i))}function Yt(i,t){var e;t===void 0&&(t=[]);var n=wn(i),r=n===((e=i.ownerDocument)==null?void 0:e.body),s=W(n),o=r?[s].concat(s.visualViewport||[],Ae(n)?n:[]):n,a=t.concat(o);return r?a:a.concat(Yt(Mt(o)))}function Ge(i){return Object.assign({},i,{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height})}function Cu(i){var t=dt(i);return t.top=t.top+i.clientTop,t.left=t.left+i.clientLeft,t.bottom=t.top+i.clientHeight,t.right=t.left+i.clientWidth,t.width=i.clientWidth,t.height=i.clientHeight,t.x=t.left,t.y=t.top,t}function $o(i,t){return t===Si?Ge(Wr(i)):xt(t)?Cu(t):Ge(Hr(z(i)))}function _u(i){var t=Yt(Mt(i)),e=["absolute","fixed"].indexOf(X(i).position)>=0,n=e&&V(i)?Et(i):i;return xt(n)?t.filter(function(r){return xt(r)&&_i(r,n)&&U(r)!=="body"}):[]}function jr(i,t,e){var n=t==="clippingParents"?_u(i):[].concat(t),r=[].concat(n,[e]),s=r[0],o=r.reduce(function(a,d){var f=$o(i,d);return a.top=yt(f.top,a.top),a.right=pe(f.right,a.right),a.bottom=pe(f.bottom,a.bottom),a.left=yt(f.left,a.left),a},$o(i,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Ri(i){var t=i.reference,e=i.element,n=i.placement,r=n?$(n):null,s=n?ft(n):null,o=t.x+t.width/2-e.width/2,a=t.y+t.height/2-e.height/2,d;switch(r){case P:d={x:o,y:t.y-e.height};break;case j:d={x:o,y:t.y+t.height};break;case F:d={x:t.x+t.width,y:a};break;case M:d={x:t.x-e.width,y:a};break;default:d={x:t.x,y:t.y}}var f=r?ve(r):null;if(f!=null){var p=f==="y"?"height":"width";switch(s){case _t:d[f]=d[f]-(t[p]/2-e[p]/2);break;case Kt:d[f]=d[f]+(t[p]/2-e[p]/2);break;default:}}return d}function Q(i,t){t===void 0&&(t={});var e=t,n=e.placement,r=n===void 0?i.placement:n,s=e.boundary,o=s===void 0?Nr:s,a=e.rootBoundary,d=a===void 0?Si:a,f=e.elementContext,p=f===void 0?me:f,b=e.altBoundary,y=b===void 0?!1:b,A=e.padding,_=A===void 0?0:A,w=Ti(typeof _!="number"?_:Li(_,It)),E=p===me?Mr:me,g=i.rects.popper,m=i.elements[y?E:p],c=jr(xt(m)?m:m.contextElement||z(i.elements.popper),o,d),l=dt(i.elements.reference),h=Ri({reference:l,element:g,strategy:"absolute",placement:r}),u=Ge(Object.assign({},g,h)),S=p===me?u:l,L={top:c.top-S.top+w.top,bottom:S.bottom-c.bottom+w.bottom,left:c.left-S.left+w.left,right:S.right-c.right+w.right},O=i.modifiersData.offset;if(p===me&&O){var H=O[r];Object.keys(L).forEach(function(k){var st=[F,j].indexOf(k)>=0?1:-1,ot=[P,j].indexOf(k)>=0?"y":"x";L[k]+=H[ot]*st})}return L}function qr(i,t){t===void 0&&(t={});var e=t,n=e.placement,r=e.boundary,s=e.rootBoundary,o=e.padding,a=e.flipVariations,d=e.allowedAutoPlacements,f=d===void 0?Ci:d,p=ft(n),b=p?a?bn:bn.filter(function(_){return ft(_)===p}):It,y=b.filter(function(_){return f.indexOf(_)>=0});y.length===0&&(y=b);var A=y.reduce(function(_,w){return _[w]=Q(i,{placement:w,boundary:r,rootBoundary:s,padding:o})[$(w)],_},{});return Object.keys(A).sort(function(_,w){return A[_]-A[w]})}function xu(i){if($(i)===wi)return[];var t=Ye(i);return[An(i),t,An(t)]}function Tu(i){var t=i.state,e=i.options,n=i.name;if(!t.modifiersData[n]._skip){for(var r=e.mainAxis,s=r===void 0?!0:r,o=e.altAxis,a=o===void 0?!0:o,d=e.fallbackPlacements,f=e.padding,p=e.boundary,b=e.rootBoundary,y=e.altBoundary,A=e.flipVariations,_=A===void 0?!0:A,w=e.allowedAutoPlacements,E=t.options.placement,g=$(E),m=g===E,c=d||(m||!_?[Ye(E)]:xu(E)),l=[E].concat(c).reduce(function(je,qt){return je.concat($(qt)===wi?qr(t,{placement:qt,boundary:p,rootBoundary:b,padding:f,flipVariations:_,allowedAutoPlacements:w}):qt)},[]),h=t.rects.reference,u=t.rects.popper,S=new Map,L=!0,O=l[0],H=0;H<l.length;H++){var k=l[H],st=$(k),ot=ft(k)===_t,mi=[P,j].indexOf(st)>=0,pi=mi?"width":"height",at=Q(t,{placement:k,boundary:p,rootBoundary:b,altBoundary:y,padding:f}),gt=mi?ot?F:M:ot?j:P;h[pi]>u[pi]&&(gt=Ye(gt));var sn=Ye(gt),le=[];if(s&&le.push(at[st]<=0),a&&le.push(at[gt]<=0,at[sn]<=0),le.every(function(je){return je})){O=k,L=!1;break}S.set(k,le)}if(L)for(var on=_?3:1,nr=function(qt){var vi=l.find(function(ln){var ce=S.get(ln);if(ce)return ce.slice(0,qt).every(function(rr){return rr})});if(vi)return O=vi,"break"},gi=on;gi>0;gi--){var an=nr(gi);if(an==="break")break}t.placement!==O&&(t.modifiersData[n]._skip=!0,t.placement=O,t.reset=!0)}}var Sn={name:"flip",enabled:!0,phase:"main",fn:Tu,requiresIfExists:["offset"],data:{_skip:!1}};function zo(i,t,e){return e===void 0&&(e={x:0,y:0}),{top:i.top-t.height-e.y,right:i.right-t.width+e.x,bottom:i.bottom-t.height+e.y,left:i.left-t.width-e.x}}function Ko(i){return[P,F,j,M].some(function(t){return i[t]>=0})}function Lu(i){var t=i.state,e=i.name,n=t.rects.reference,r=t.rects.popper,s=t.modifiersData.preventOverflow,o=Q(t,{elementContext:"reference"}),a=Q(t,{altBoundary:!0}),d=zo(o,n),f=zo(a,r,s),p=Ko(d),b=Ko(f);t.modifiersData[e]={referenceClippingOffsets:d,popperEscapeOffsets:f,isReferenceHidden:p,hasPopperEscaped:b},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":b})}var Cn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Lu};function Ru(i,t,e){var n=$(i),r=[M,P].indexOf(n)>=0?-1:1,s=typeof e=="function"?e(Object.assign({},t,{placement:i})):e,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[M,F].indexOf(n)>=0?{x:a,y:o}:{x:o,y:a}}function Du(i){var t=i.state,e=i.options,n=i.name,r=e.offset,s=r===void 0?[0,0]:r,o=Ci.reduce(function(p,b){return p[b]=Ru(b,t.rects,s),p},{}),a=o[t.placement],d=a.x,f=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=d,t.modifiersData.popperOffsets.y+=f),t.modifiersData[n]=o}var _n={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Du};function Ou(i){var t=i.state,e=i.name;t.modifiersData[e]=Ri({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var Je={name:"popperOffsets",enabled:!0,phase:"read",fn:Ou,data:{}};function Vr(i){return i==="x"?"y":"x"}function ku(i){var t=i.state,e=i.options,n=i.name,r=e.mainAxis,s=r===void 0?!0:r,o=e.altAxis,a=o===void 0?!1:o,d=e.boundary,f=e.rootBoundary,p=e.altBoundary,b=e.padding,y=e.tether,A=y===void 0?!0:y,_=e.tetherOffset,w=_===void 0?0:_,E=Q(t,{boundary:d,rootBoundary:f,padding:b,altBoundary:p}),g=$(t.placement),m=ft(t.placement),c=!m,l=ve(g),h=Vr(l),u=t.modifiersData.popperOffsets,S=t.rects.reference,L=t.rects.popper,O=typeof w=="function"?w(Object.assign({},t.rects,{placement:t.placement})):w,H=typeof O=="number"?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),k=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,st={x:0,y:0};if(!!u){if(s){var ot,mi=l==="y"?P:M,pi=l==="y"?j:F,at=l==="y"?"height":"width",gt=u[l],sn=gt+E[mi],le=gt-E[pi],on=A?-L[at]/2:0,nr=m===_t?S[at]:L[at],gi=m===_t?-L[at]:-S[at],an=t.elements.arrow,je=A&&an?ge(an):{width:0,height:0},qt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:xi(),vi=qt[mi],ln=qt[pi],ce=be(0,S[at],je[at]),rr=c?S[at]/2-on-ce-vi-H.mainAxis:nr-ce-vi-H.mainAxis,dc=c?-S[at]/2+on+ce+ln+H.mainAxis:gi+ce+ln+H.mainAxis,sr=t.elements.arrow&&Et(t.elements.arrow),fc=sr?l==="y"?sr.clientTop||0:sr.clientLeft||0:0,po=(ot=k?.[l])!=null?ot:0,mc=gt+rr-po-fc,pc=gt+dc-po,go=be(A?pe(sn,mc):sn,gt,A?yt(le,pc):le);u[l]=go,st[l]=go-gt}if(a){var vo,gc=l==="x"?P:M,vc=l==="x"?j:F,ue=u[h],cn=h==="y"?"height":"width",bo=ue+E[gc],yo=ue-E[vc],or=[P,M].indexOf(g)!==-1,Eo=(vo=k?.[h])!=null?vo:0,Ao=or?bo:ue-S[cn]-L[cn]-Eo+H.altAxis,wo=or?ue+S[cn]+L[cn]-Eo-H.altAxis:yo,So=A&&or?Vo(Ao,ue,wo):be(A?Ao:bo,ue,A?wo:yo);u[h]=So,st[h]=So-ue}t.modifiersData[n]=st}}var xn={name:"preventOverflow",enabled:!0,phase:"main",fn:ku,requiresIfExists:["offset"]};function Ur(i){return{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}}function $r(i){return i===W(i)||!V(i)?ye(i):Ur(i)}function Pu(i){var t=i.getBoundingClientRect(),e=Nt(t.width)/i.offsetWidth||1,n=Nt(t.height)/i.offsetHeight||1;return e!==1||n!==1}function zr(i,t,e){e===void 0&&(e=!1);var n=V(t),r=V(t)&&Pu(t),s=z(t),o=dt(i,r),a={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(n||!n&&!e)&&((U(t)!=="body"||Ae(s))&&(a=$r(t)),V(t)?(d=dt(t,!0),d.x+=t.clientLeft,d.y+=t.clientTop):s&&(d.x=Ee(s))),{x:o.left+a.scrollLeft-d.x,y:o.top+a.scrollTop-d.y,width:o.width,height:o.height}}function Iu(i){var t=new Map,e=new Set,n=[];i.forEach(function(s){t.set(s.name,s)});function r(s){e.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!e.has(a)){var d=t.get(a);d&&r(d)}}),n.push(s)}return i.forEach(function(s){e.has(s.name)||r(s)}),n}function Kr(i){var t=Iu(i);return Br.reduce(function(e,n){return e.concat(t.filter(function(r){return r.phase===n}))},[])}function Yr(i){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(i())})})),t}}function Gr(i){var t=i.reduce(function(e,n){var r=e[n.name];return e[n.name]=r?Object.assign({},r,n,{options:Object.assign({},r.options,n.options),data:Object.assign({},r.data,n.data)}):n,e},{});return Object.keys(t).map(function(e){return t[e]})}var Yo={placement:"bottom",modifiers:[],strategy:"absolute"};function Go(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function we(i){i===void 0&&(i={});var t=i,e=t.defaultModifiers,n=e===void 0?[]:e,r=t.defaultOptions,s=r===void 0?Yo:r;return function(a,d,f){f===void 0&&(f=s);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},Yo,s),modifiersData:{},elements:{reference:a,popper:d},attributes:{},styles:{}},b=[],y=!1,A={state:p,setOptions:function(g){var m=typeof g=="function"?g(p.options):g;w(),p.options=Object.assign({},s,p.options,m),p.scrollParents={reference:xt(a)?Yt(a):a.contextElement?Yt(a.contextElement):[],popper:Yt(d)};var c=Kr(Gr([].concat(n,p.options.modifiers)));if(p.orderedModifiers=c.filter(function(k){return k.enabled}),!1){var l;if(getBasePlacement(p.options.placement)===auto)var h;var u,S,L,O,H}return _(),A.update()},forceUpdate:function(){if(!y){var g=p.elements,m=g.reference,c=g.popper;if(!!Go(m,c)){p.rects={reference:zr(m,Et(c),p.options.strategy==="fixed"),popper:ge(c)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(k){return p.modifiersData[k.name]=Object.assign({},k.data)});for(var l=0,h=0;h<p.orderedModifiers.length;h++){if(p.reset===!0){p.reset=!1,h=-1;continue}var u=p.orderedModifiers[h],S=u.fn,L=u.options,O=L===void 0?{}:L,H=u.name;typeof S=="function"&&(p=S({state:p,options:O,name:H,instance:A})||p)}}}},update:Yr(function(){return new Promise(function(E){A.forceUpdate(),E(p)})}),destroy:function(){w(),y=!0}};if(!Go(a,d))return A;A.setOptions(f).then(function(E){!y&&f.onFirstUpdate&&f.onFirstUpdate(E)});function _(){p.orderedModifiers.forEach(function(E){var g=E.name,m=E.options,c=m===void 0?{}:m,l=E.effect;if(typeof l=="function"){var h=l({state:p,name:g,instance:A,options:c}),u=function(){};b.push(h||u)}})}function w(){b.forEach(function(E){return E()}),b=[]}return A}}var Jo=we();var Nu=[Ke,Je,ze,$e],Xo=we({defaultModifiers:Nu});var Mu=[Ke,Je,ze,$e,_n,Sn,xn,yn,Cn],Di=we({defaultModifiers:Mu});var Bu=1e6,Fu=1e3,ss="transitionend",Wu=i=>i==null?`${i}`:{}.toString.call(i).match(/\s([a-z]+)/i)[1].toLowerCase(),Hu=i=>{do i+=Math.floor(Math.random()*Bu);while(document.getElementById(i));return i},Va=i=>{let t=i.getAttribute("data-bs-target");if(!t||t==="#"){let e=i.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith("."))return null;e.includes("#")&&!e.startsWith("#")&&(e=`#${e.split("#")[1]}`),t=e&&e!=="#"?e.trim():null}return t},hs=i=>{let t=Va(i);return t&&document.querySelector(t)?t:null},Xt=i=>{let t=Va(i);return t?document.querySelector(t):null},ju=i=>{if(!i)return 0;let{transitionDuration:t,transitionDelay:e}=window.getComputedStyle(i),n=Number.parseFloat(t),r=Number.parseFloat(e);return!n&&!r?0:(t=t.split(",")[0],e=e.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(e))*Fu)},Ua=i=>{i.dispatchEvent(new Event(ss))},Re=i=>!i||typeof i!="object"?!1:(typeof i.jquery<"u"&&(i=i[0]),typeof i.nodeType<"u"),Qt=i=>Re(i)?i.jquery?i[0]:i:typeof i=="string"&&i.length>0?document.querySelector(i):null,Rt=(i,t,e)=>{Object.keys(e).forEach(n=>{let r=e[n],s=t[n],o=s&&Re(s)?"element":Wu(s);if(!new RegExp(r).test(o))throw new TypeError(`${i.toUpperCase()}: Option "${n}" provided type "${o}" but expected type "${r}".`)})},ji=i=>!Re(i)||i.getClientRects().length===0?!1:getComputedStyle(i).getPropertyValue("visibility")==="visible",Le=i=>!i||i.nodeType!==Node.ELEMENT_NODE||i.classList.contains("disabled")?!0:typeof i.disabled<"u"?i.disabled:i.hasAttribute("disabled")&&i.getAttribute("disabled")!=="false",$a=i=>{if(!document.documentElement.attachShadow)return null;if(typeof i.getRootNode=="function"){let t=i.getRootNode();return t instanceof ShadowRoot?t:null}return i instanceof ShadowRoot?i:i.parentNode?$a(i.parentNode):null},In=()=>{},si=i=>{i.offsetHeight},za=()=>{let{jQuery:i}=window;return i&&!document.body.hasAttribute("data-bs-no-jquery")?i:null},Jr=[],qu=i=>{document.readyState==="loading"?(Jr.length||document.addEventListener("DOMContentLoaded",()=>{Jr.forEach(t=>t())}),Jr.push(i)):i()},it=()=>document.documentElement.dir==="rtl",mt=i=>{qu(()=>{let t=za();if(t){let e=i.NAME,n=t.fn[e];t.fn[e]=i.jQueryInterface,t.fn[e].Constructor=i,t.fn[e].noConflict=()=>(t.fn[e]=n,i.jQueryInterface)}})},Te=i=>{typeof i=="function"&&i()},Ka=(i,t,e=!0)=>{if(!e){Te(i);return}let n=5,r=ju(t)+n,s=!1,o=({target:a})=>{a===t&&(s=!0,t.removeEventListener(ss,o),Te(i))};t.addEventListener(ss,o),setTimeout(()=>{s||Ua(t)},r)},Ya=(i,t,e,n)=>{let r=i.indexOf(t);if(r===-1)return i[!e&&n?i.length-1:0];let s=i.length;return r+=e?1:-1,n&&(r=(r+s)%s),i[Math.max(0,Math.min(r,s-1))]},Vu=/[^.]*(?=\..*)\.|.*/,Uu=/\..*/,$u=/::\d+$/,Xr={},Qo=1,zu={mouseenter:"mouseover",mouseleave:"mouseout"},Ku=/^(mouseenter|mouseleave)/i,Ga=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Ja(i,t){return t&&`${t}::${Qo++}`||i.uidEvent||Qo++}function Xa(i){let t=Ja(i);return i.uidEvent=t,Xr[t]=Xr[t]||{},Xr[t]}function Yu(i,t){return function e(n){return n.delegateTarget=i,e.oneOff&&v.off(i,n.type,t),t.apply(i,[n])}}function Gu(i,t,e){return function n(r){let s=i.querySelectorAll(t);for(let{target:o}=r;o&&o!==this;o=o.parentNode)for(let a=s.length;a--;)if(s[a]===o)return r.delegateTarget=o,n.oneOff&&v.off(i,r.type,t,e),e.apply(o,[r]);return null}}function Qa(i,t,e=null){let n=Object.keys(i);for(let r=0,s=n.length;r<s;r++){let o=i[n[r]];if(o.originalHandler===t&&o.delegationSelector===e)return o}return null}function Za(i,t,e){let n=typeof t=="string",r=n?e:t,s=tl(i);return Ga.has(s)||(s=i),[n,r,s]}function Zo(i,t,e,n,r){if(typeof t!="string"||!i)return;if(e||(e=n,n=null),Ku.test(t)){let A=_=>function(w){if(!w.relatedTarget||w.relatedTarget!==w.delegateTarget&&!w.delegateTarget.contains(w.relatedTarget))return _.call(this,w)};n?n=A(n):e=A(e)}let[s,o,a]=Za(t,e,n),d=Xa(i),f=d[a]||(d[a]={}),p=Qa(f,o,s?e:null);if(p){p.oneOff=p.oneOff&&r;return}let b=Ja(o,t.replace(Vu,"")),y=s?Gu(i,e,n):Yu(i,e);y.delegationSelector=s?e:null,y.originalHandler=o,y.oneOff=r,y.uidEvent=b,f[b]=y,i.addEventListener(a,y,s)}function os(i,t,e,n,r){let s=Qa(t[e],n,r);!s||(i.removeEventListener(e,s,Boolean(r)),delete t[e][s.uidEvent])}function Ju(i,t,e,n){let r=t[e]||{};Object.keys(r).forEach(s=>{if(s.includes(n)){let o=r[s];os(i,t,e,o.originalHandler,o.delegationSelector)}})}function tl(i){return i=i.replace(Uu,""),zu[i]||i}var v={on(i,t,e,n){Zo(i,t,e,n,!1)},one(i,t,e,n){Zo(i,t,e,n,!0)},off(i,t,e,n){if(typeof t!="string"||!i)return;let[r,s,o]=Za(t,e,n),a=o!==t,d=Xa(i),f=t.startsWith(".");if(typeof s<"u"){if(!d||!d[o])return;os(i,d,o,s,r?e:null);return}f&&Object.keys(d).forEach(b=>{Ju(i,d,b,t.slice(1))});let p=d[o]||{};Object.keys(p).forEach(b=>{let y=b.replace($u,"");if(!a||t.includes(y)){let A=p[b];os(i,d,o,A.originalHandler,A.delegationSelector)}})},trigger(i,t,e){if(typeof t!="string"||!i)return null;let n=za(),r=tl(t),s=t!==r,o=Ga.has(r),a,d=!0,f=!0,p=!1,b=null;return s&&n&&(a=n.Event(t,e),n(i).trigger(a),d=!a.isPropagationStopped(),f=!a.isImmediatePropagationStopped(),p=a.isDefaultPrevented()),o?(b=document.createEvent("HTMLEvents"),b.initEvent(r,d,!0)):b=new CustomEvent(t,{bubbles:d,cancelable:!0}),typeof e<"u"&&Object.keys(e).forEach(y=>{Object.defineProperty(b,y,{get(){return e[y]}})}),p&&b.preventDefault(),f&&i.dispatchEvent(b),b.defaultPrevented&&typeof a<"u"&&a.preventDefault(),b}},Gt=new Map,Bi={set(i,t,e){Gt.has(i)||Gt.set(i,new Map);let n=Gt.get(i);if(!n.has(t)&&n.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(n.keys())[0]}.`);return}n.set(t,e)},get(i,t){return Gt.has(i)&&Gt.get(i).get(t)||null},remove(i,t){if(!Gt.has(i))return;let e=Gt.get(i);e.delete(t),e.size===0&&Gt.delete(i)}},Xu="5.1.3",lt=class{constructor(t){t=Qt(t),t&&(this._element=t,Bi.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Bi.remove(this._element,this.constructor.DATA_KEY),v.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach(t=>{this[t]=null})}_queueCallback(t,e,n=!0){Ka(t,e,n)}static getInstance(t){return Bi.get(Qt(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,typeof e=="object"?e:null)}static get VERSION(){return Xu}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}},Fn=(i,t="hide")=>{let e=`click.dismiss${i.EVENT_KEY}`,n=i.NAME;v.on(document,e,`[data-bs-dismiss="${n}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),Le(this))return;let s=Xt(this)||this.closest(`.${n}`);i.getOrCreateInstance(s)[t]()})},Qu="alert",Zu="bs.alert",el=`.${Zu}`,th=`close${el}`,eh=`closed${el}`,ih="fade",nh="show",ti=class extends lt{static get NAME(){return Qu}close(){if(v.trigger(this._element,th).defaultPrevented)return;this._element.classList.remove(nh);let e=this._element.classList.contains(ih);this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),v.trigger(this._element,eh),this.dispose()}static jQueryInterface(t){return this.each(function(){let e=ti.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}};Fn(ti,"close");mt(ti);var rh="button",sh="bs.button",oh=`.${sh}`,ah=".data-api",lh="active",ta='[data-bs-toggle="button"]',ch=`click${oh}${ah}`,ei=class extends lt{static get NAME(){return rh}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(lh))}static jQueryInterface(t){return this.each(function(){let e=ei.getOrCreateInstance(this);t==="toggle"&&e[t]()})}};v.on(document,ch,ta,i=>{i.preventDefault();let t=i.target.closest(ta);ei.getOrCreateInstance(t).toggle()});mt(ei);function ea(i){return i==="true"?!0:i==="false"?!1:i===Number(i).toString()?Number(i):i===""||i==="null"?null:i}function Qr(i){return i.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}var K={setDataAttribute(i,t,e){i.setAttribute(`data-bs-${Qr(t)}`,e)},removeDataAttribute(i,t){i.removeAttribute(`data-bs-${Qr(t)}`)},getDataAttributes(i){if(!i)return{};let t={};return Object.keys(i.dataset).filter(e=>e.startsWith("bs")).forEach(e=>{let n=e.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),t[n]=ea(i.dataset[e])}),t},getDataAttribute(i,t){return ea(i.getAttribute(`data-bs-${Qr(t)}`))},offset(i){let t=i.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}},position(i){return{top:i.offsetTop,left:i.offsetLeft}}},uh=3,C={find(i,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,i))},findOne(i,t=document.documentElement){return Element.prototype.querySelector.call(t,i)},children(i,t){return[].concat(...i.children).filter(e=>e.matches(t))},parents(i,t){let e=[],n=i.parentNode;for(;n&&n.nodeType===Node.ELEMENT_NODE&&n.nodeType!==uh;)n.matches(t)&&e.push(n),n=n.parentNode;return e},prev(i,t){let e=i.previousElementSibling;for(;e;){if(e.matches(t))return[e];e=e.previousElementSibling}return[]},next(i,t){let e=i.nextElementSibling;for(;e;){if(e.matches(t))return[e];e=e.nextElementSibling}return[]},focusableChildren(i){let t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(", ");return this.find(t,i).filter(e=>!Le(e)&&ji(e))}},ia="carousel",hh="bs.carousel",ct=`.${hh}`,il=".data-api",dh="ArrowLeft",fh="ArrowRight",mh=500,ph=40,na={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},gh={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},Se="next",Ce="prev",xe="left",Mi="right",vh={[dh]:Mi,[fh]:xe},bh=`slide${ct}`,ra=`slid${ct}`,yh=`keydown${ct}`,Eh=`mouseenter${ct}`,Ah=`mouseleave${ct}`,wh=`touchstart${ct}`,Sh=`touchmove${ct}`,Ch=`touchend${ct}`,_h=`pointerdown${ct}`,xh=`pointerup${ct}`,Th=`dragstart${ct}`,Lh=`load${ct}${il}`,Rh=`click${ct}${il}`,Dh="carousel",_e="active",Oh="slide",kh="carousel-item-end",Ph="carousel-item-start",Ih="carousel-item-next",Nh="carousel-item-prev",Mh="pointer-event",Bh=".active",Ln=".active.carousel-item",Fh=".carousel-item",Wh=".carousel-item img",Hh=".carousel-item-next, .carousel-item-prev",jh=".carousel-indicators",qh="[data-bs-target]",Vh="[data-bs-slide], [data-bs-slide-to]",Uh='[data-bs-ride="carousel"]',$h="touch",zh="pen",At=class extends lt{constructor(t,e){super(t),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(e),this._indicatorsElement=C.findOne(jh,this._element),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent),this._addEventListeners()}static get Default(){return na}static get NAME(){return ia}next(){this._slide(Se)}nextWhenVisible(){!document.hidden&&ji(this._element)&&this.next()}prev(){this._slide(Ce)}pause(t){t||(this._isPaused=!0),C.findOne(Hh,this._element)&&(Ua(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(t){this._activeElement=C.findOne(Ln,this._element);let e=this._getItemIndex(this._activeElement);if(t>this._items.length-1||t<0)return;if(this._isSliding){v.one(this._element,ra,()=>this.to(t));return}if(e===t){this.pause(),this.cycle();return}let n=t>e?Se:Ce;this._slide(n,this._items[t])}_getConfig(t){return t={...na,...K.getDataAttributes(this._element),...typeof t=="object"?t:{}},Rt(ia,t,gh),t}_handleSwipe(){let t=Math.abs(this.touchDeltaX);if(t<=ph)return;let e=t/this.touchDeltaX;this.touchDeltaX=0,e&&this._slide(e>0?Mi:xe)}_addEventListeners(){this._config.keyboard&&v.on(this._element,yh,t=>this._keydown(t)),this._config.pause==="hover"&&(v.on(this._element,Eh,t=>this.pause(t)),v.on(this._element,Ah,t=>this.cycle(t))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){let t=s=>this._pointerEvent&&(s.pointerType===zh||s.pointerType===$h),e=s=>{t(s)?this.touchStartX=s.clientX:this._pointerEvent||(this.touchStartX=s.touches[0].clientX)},n=s=>{this.touchDeltaX=s.touches&&s.touches.length>1?0:s.touches[0].clientX-this.touchStartX},r=s=>{t(s)&&(this.touchDeltaX=s.clientX-this.touchStartX),this._handleSwipe(),this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(o=>this.cycle(o),mh+this._config.interval))};C.find(Wh,this._element).forEach(s=>{v.on(s,Th,o=>o.preventDefault())}),this._pointerEvent?(v.on(this._element,_h,s=>e(s)),v.on(this._element,xh,s=>r(s)),this._element.classList.add(Mh)):(v.on(this._element,wh,s=>e(s)),v.on(this._element,Sh,s=>n(s)),v.on(this._element,Ch,s=>r(s)))}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;let e=vh[t.key];e&&(t.preventDefault(),this._slide(e))}_getItemIndex(t){return this._items=t&&t.parentNode?C.find(Fh,t.parentNode):[],this._items.indexOf(t)}_getItemByOrder(t,e){let n=t===Se;return Ya(this._items,e,n,this._config.wrap)}_triggerSlideEvent(t,e){let n=this._getItemIndex(t),r=this._getItemIndex(C.findOne(Ln,this._element));return v.trigger(this._element,bh,{relatedTarget:t,direction:e,from:r,to:n})}_setActiveIndicatorElement(t){if(this._indicatorsElement){let e=C.findOne(Bh,this._indicatorsElement);e.classList.remove(_e),e.removeAttribute("aria-current");let n=C.find(qh,this._indicatorsElement);for(let r=0;r<n.length;r++)if(Number.parseInt(n[r].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(t)){n[r].classList.add(_e),n[r].setAttribute("aria-current","true");break}}}_updateInterval(){let t=this._activeElement||C.findOne(Ln,this._element);if(!t)return;let e=Number.parseInt(t.getAttribute("data-bs-interval"),10);e?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=e):this._config.interval=this._config.defaultInterval||this._config.interval}_slide(t,e){let n=this._directionToOrder(t),r=C.findOne(Ln,this._element),s=this._getItemIndex(r),o=e||this._getItemByOrder(n,r),a=this._getItemIndex(o),d=Boolean(this._interval),f=n===Se,p=f?Ph:kh,b=f?Ih:Nh,y=this._orderToDirection(n);if(o&&o.classList.contains(_e)){this._isSliding=!1;return}if(this._isSliding||this._triggerSlideEvent(o,y).defaultPrevented||!r||!o)return;this._isSliding=!0,d&&this.pause(),this._setActiveIndicatorElement(o),this._activeElement=o;let _=()=>{v.trigger(this._element,ra,{relatedTarget:o,direction:y,from:s,to:a})};if(this._element.classList.contains(Oh)){o.classList.add(b),si(o),r.classList.add(p),o.classList.add(p);let w=()=>{o.classList.remove(p,b),o.classList.add(_e),r.classList.remove(_e,b,p),this._isSliding=!1,setTimeout(_,0)};this._queueCallback(w,r,!0)}else r.classList.remove(_e),o.classList.add(_e),this._isSliding=!1,_();d&&this.cycle()}_directionToOrder(t){return[Mi,xe].includes(t)?it()?t===xe?Ce:Se:t===xe?Se:Ce:t}_orderToDirection(t){return[Se,Ce].includes(t)?it()?t===Ce?xe:Mi:t===Ce?Mi:xe:t}static carouselInterface(t,e){let n=At.getOrCreateInstance(t,e),{_config:r}=n;typeof e=="object"&&(r={...r,...e});let s=typeof e=="string"?e:r.slide;if(typeof e=="number")n.to(e);else if(typeof s=="string"){if(typeof n[s]>"u")throw new TypeError(`No method named "${s}"`);n[s]()}else r.interval&&r.ride&&(n.pause(),n.cycle())}static jQueryInterface(t){return this.each(function(){At.carouselInterface(this,t)})}static dataApiClickHandler(t){let e=Xt(this);if(!e||!e.classList.contains(Dh))return;let n={...K.getDataAttributes(e),...K.getDataAttributes(this)},r=this.getAttribute("data-bs-slide-to");r&&(n.interval=!1),At.carouselInterface(e,n),r&&At.getInstance(e).to(r),t.preventDefault()}};v.on(document,Rh,Vh,At.dataApiClickHandler);v.on(window,Lh,()=>{let i=C.find(Uh);for(let t=0,e=i.length;t<e;t++)At.carouselInterface(i[t],At.getInstance(i[t]))});mt(At);var sa="collapse",nl="bs.collapse",qi=`.${nl}`,Kh=".data-api",oa={toggle:!0,parent:null},Yh={toggle:"boolean",parent:"(null|element)"},Gh=`show${qi}`,Jh=`shown${qi}`,Xh=`hide${qi}`,Qh=`hidden${qi}`,Zh=`click${qi}${Kh}`,Zr="show",Ze="collapse",Rn="collapsing",aa="collapsed",la=`:scope .${Ze} .${Ze}`,td="collapse-horizontal",ed="width",id="height",nd=".collapse.show, .collapse.collapsing",as='[data-bs-toggle="collapse"]',Jt=class extends lt{constructor(t,e){super(t),this._isTransitioning=!1,this._config=this._getConfig(e),this._triggerArray=[];let n=C.find(as);for(let r=0,s=n.length;r<s;r++){let o=n[r],a=hs(o),d=C.find(a).filter(f=>f===this._element);a!==null&&d.length&&(this._selector=a,this._triggerArray.push(o))}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return oa}static get NAME(){return sa}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[],e;if(this._config.parent){let f=C.find(la,this._config.parent);t=C.find(nd,this._config.parent).filter(p=>!f.includes(p))}let n=C.findOne(this._selector);if(t.length){let f=t.find(p=>n!==p);if(e=f?Jt.getInstance(f):null,e&&e._isTransitioning)return}if(v.trigger(this._element,Gh).defaultPrevented)return;t.forEach(f=>{n!==f&&Jt.getOrCreateInstance(f,{toggle:!1}).hide(),e||Bi.set(f,nl,null)});let s=this._getDimension();this._element.classList.remove(Ze),this._element.classList.add(Rn),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;let o=()=>{this._isTransitioning=!1,this._element.classList.remove(Rn),this._element.classList.add(Ze,Zr),this._element.style[s]="",v.trigger(this._element,Jh)},d=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback(o,this._element,!0),this._element.style[s]=`${this._element[d]}px`}hide(){if(this._isTransitioning||!this._isShown()||v.trigger(this._element,Xh).defaultPrevented)return;let e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,si(this._element),this._element.classList.add(Rn),this._element.classList.remove(Ze,Zr);let n=this._triggerArray.length;for(let s=0;s<n;s++){let o=this._triggerArray[s],a=Xt(o);a&&!this._isShown(a)&&this._addAriaAndCollapsedClass([o],!1)}this._isTransitioning=!0;let r=()=>{this._isTransitioning=!1,this._element.classList.remove(Rn),this._element.classList.add(Ze),v.trigger(this._element,Qh)};this._element.style[e]="",this._queueCallback(r,this._element,!0)}_isShown(t=this._element){return t.classList.contains(Zr)}_getConfig(t){return t={...oa,...K.getDataAttributes(this._element),...t},t.toggle=Boolean(t.toggle),t.parent=Qt(t.parent),Rt(sa,t,Yh),t}_getDimension(){return this._element.classList.contains(td)?ed:id}_initializeChildren(){if(!this._config.parent)return;let t=C.find(la,this._config.parent);C.find(as,this._config.parent).filter(e=>!t.includes(e)).forEach(e=>{let n=Xt(e);n&&this._addAriaAndCollapsedClass([e],this._isShown(n))})}_addAriaAndCollapsedClass(t,e){!t.length||t.forEach(n=>{e?n.classList.remove(aa):n.classList.add(aa),n.setAttribute("aria-expanded",e)})}static jQueryInterface(t){return this.each(function(){let e={};typeof t=="string"&&/show|hide/.test(t)&&(e.toggle=!1);let n=Jt.getOrCreateInstance(this,e);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}};v.on(document,Zh,as,function(i){(i.target.tagName==="A"||i.delegateTarget&&i.delegateTarget.tagName==="A")&&i.preventDefault();let t=hs(this);C.find(t).forEach(n=>{Jt.getOrCreateInstance(n,{toggle:!1}).toggle()})});mt(Jt);var ts="dropdown",rd="bs.dropdown",De=`.${rd}`,ds=".data-api",kn="Escape",ca="Space",ua="Tab",ls="ArrowUp",Pn="ArrowDown",sd=2,od=new RegExp(`${ls}|${Pn}|${kn}`),ad=`hide${De}`,ld=`hidden${De}`,cd=`show${De}`,ud=`shown${De}`,rl=`click${De}${ds}`,sl=`keydown${De}${ds}`,hd=`keyup${De}${ds}`,Xe="show",dd="dropup",fd="dropend",md="dropstart",pd="navbar",Fi='[data-bs-toggle="dropdown"]',cs=".dropdown-menu",gd=".navbar-nav",vd=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",bd=it()?"top-end":"top-start",yd=it()?"top-start":"top-end",Ed=it()?"bottom-end":"bottom-start",Ad=it()?"bottom-start":"bottom-end",wd=it()?"left-start":"right-start",Sd=it()?"right-start":"left-start",Cd={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:!0},_d={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"},et=class extends lt{constructor(t,e){super(t),this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar()}static get Default(){return Cd}static get DefaultType(){return _d}static get NAME(){return ts}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Le(this._element)||this._isShown(this._menu))return;let t={relatedTarget:this._element};if(v.trigger(this._element,cd,t).defaultPrevented)return;let n=et.getParentFromElement(this._element);this._inNavbar?K.setDataAttribute(this._menu,"popper","none"):this._createPopper(n),"ontouchstart"in document.documentElement&&!n.closest(gd)&&[].concat(...document.body.children).forEach(r=>v.on(r,"mouseover",In)),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Xe),this._element.classList.add(Xe),v.trigger(this._element,ud,t)}hide(){if(Le(this._element)||!this._isShown(this._menu))return;let t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){v.trigger(this._element,ad,t).defaultPrevented||("ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(n=>v.off(n,"mouseover",In)),this._popper&&this._popper.destroy(),this._menu.classList.remove(Xe),this._element.classList.remove(Xe),this._element.setAttribute("aria-expanded","false"),K.removeDataAttribute(this._menu,"popper"),v.trigger(this._element,ld,t))}_getConfig(t){if(t={...this.constructor.Default,...K.getDataAttributes(this._element),...t},Rt(ts,t,this.constructor.DefaultType),typeof t.reference=="object"&&!Re(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${ts.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(t){if(typeof Tn>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=t:Re(this._config.reference)?e=Qt(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);let n=this._getPopperConfig(),r=n.modifiers.find(s=>s.name==="applyStyles"&&s.enabled===!1);this._popper=Di(e,this._menu,n),r&&K.setDataAttribute(this._menu,"popper","static")}_isShown(t=this._element){return t.classList.contains(Xe)}_getMenuElement(){return C.next(this._element,cs)[0]}_getPlacement(){let t=this._element.parentNode;if(t.classList.contains(fd))return wd;if(t.classList.contains(md))return Sd;let e=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(dd)?e?yd:bd:e?Ad:Ed}_detectNavbar(){return this._element.closest(`.${pd}`)!==null}_getOffset(){let{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_getPopperConfig(){let t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return this._config.display==="static"&&(t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...typeof this._config.popperConfig=="function"?this._config.popperConfig(t):this._config.popperConfig}}_selectMenuItem({key:t,target:e}){let n=C.find(vd,this._menu).filter(ji);!n.length||Ya(n,e,t===Pn,!n.includes(e)).focus()}static jQueryInterface(t){return this.each(function(){let e=et.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}static clearMenus(t){if(t&&(t.button===sd||t.type==="keyup"&&t.key!==ua))return;let e=C.find(Fi);for(let n=0,r=e.length;n<r;n++){let s=et.getInstance(e[n]);if(!s||s._config.autoClose===!1||!s._isShown())continue;let o={relatedTarget:s._element};if(t){let a=t.composedPath(),d=a.includes(s._menu);if(a.includes(s._element)||s._config.autoClose==="inside"&&!d||s._config.autoClose==="outside"&&d||s._menu.contains(t.target)&&(t.type==="keyup"&&t.key===ua||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;t.type==="click"&&(o.clickEvent=t)}s._completeHide(o)}}static getParentFromElement(t){return Xt(t)||t.parentNode}static dataApiKeydownHandler(t){if(/input|textarea/i.test(t.target.tagName)?t.key===ca||t.key!==kn&&(t.key!==Pn&&t.key!==ls||t.target.closest(cs)):!od.test(t.key))return;let e=this.classList.contains(Xe);if(!e&&t.key===kn||(t.preventDefault(),t.stopPropagation(),Le(this)))return;let n=this.matches(Fi)?this:C.prev(this,Fi)[0],r=et.getOrCreateInstance(n);if(t.key===kn){r.hide();return}if(t.key===ls||t.key===Pn){e||r.show(),r._selectMenuItem(t);return}(!e||t.key===ca)&&et.clearMenus()}};v.on(document,sl,Fi,et.dataApiKeydownHandler);v.on(document,sl,cs,et.dataApiKeydownHandler);v.on(document,rl,et.clearMenus);v.on(document,hd,et.clearMenus);v.on(document,rl,Fi,function(i){i.preventDefault(),et.getOrCreateInstance(this).toggle()});mt(et);var ha=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",da=".sticky-top",Wi=class{constructor(){this._element=document.body}getWidth(){let t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){let t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"paddingRight",e=>e+t),this._setElementAttributes(ha,"paddingRight",e=>e+t),this._setElementAttributes(da,"marginRight",e=>e-t)}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,n){let r=this.getWidth(),s=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+r)return;this._saveInitialAttribute(o,e);let a=window.getComputedStyle(o)[e];o.style[e]=`${n(Number.parseFloat(a))}px`};this._applyManipulationCallback(t,s)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"paddingRight"),this._resetElementAttributes(ha,"paddingRight"),this._resetElementAttributes(da,"marginRight")}_saveInitialAttribute(t,e){let n=t.style[e];n&&K.setDataAttribute(t,e,n)}_resetElementAttributes(t,e){let n=r=>{let s=K.getDataAttribute(r,e);typeof s>"u"?r.style.removeProperty(e):(K.removeDataAttribute(r,e),r.style[e]=s)};this._applyManipulationCallback(t,n)}_applyManipulationCallback(t,e){Re(t)?e(t):C.find(t,this._element).forEach(e)}isOverflowing(){return this.getWidth()>0}},xd={className:"modal-backdrop",isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null},Td={className:"string",isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"},ol="backdrop",Ld="fade",fa="show",ma=`mousedown.bs.${ol}`,Nn=class{constructor(t){this._config=this._getConfig(t),this._isAppended=!1,this._element=null}show(t){if(!this._config.isVisible){Te(t);return}this._append(),this._config.isAnimated&&si(this._getElement()),this._getElement().classList.add(fa),this._emulateAnimation(()=>{Te(t)})}hide(t){if(!this._config.isVisible){Te(t);return}this._getElement().classList.remove(fa),this._emulateAnimation(()=>{this.dispose(),Te(t)})}_getElement(){if(!this._element){let t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(Ld),this._element=t}return this._element}_getConfig(t){return t={...xd,...typeof t=="object"?t:{}},t.rootElement=Qt(t.rootElement),Rt(ol,t,Td),t}_append(){this._isAppended||(this._config.rootElement.append(this._getElement()),v.on(this._getElement(),ma,()=>{Te(this._config.clickCallback)}),this._isAppended=!0)}dispose(){!this._isAppended||(v.off(this._element,ma),this._element.remove(),this._isAppended=!1)}_emulateAnimation(t){Ka(t,this._getElement(),this._config.isAnimated)}},Rd={trapElement:null,autofocus:!0},Dd={trapElement:"element",autofocus:"boolean"},Od="focustrap",kd="bs.focustrap",Mn=`.${kd}`,Pd=`focusin${Mn}`,Id=`keydown.tab${Mn}`,Nd="Tab",Md="forward",pa="backward",Bn=class{constructor(t){this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}activate(){let{trapElement:t,autofocus:e}=this._config;this._isActive||(e&&t.focus(),v.off(document,Mn),v.on(document,Pd,n=>this._handleFocusin(n)),v.on(document,Id,n=>this._handleKeydown(n)),this._isActive=!0)}deactivate(){!this._isActive||(this._isActive=!1,v.off(document,Mn))}_handleFocusin(t){let{target:e}=t,{trapElement:n}=this._config;if(e===document||e===n||n.contains(e))return;let r=C.focusableChildren(n);r.length===0?n.focus():this._lastTabNavDirection===pa?r[r.length-1].focus():r[0].focus()}_handleKeydown(t){t.key===Nd&&(this._lastTabNavDirection=t.shiftKey?pa:Md)}_getConfig(t){return t={...Rd,...typeof t=="object"?t:{}},Rt(Od,t,Dd),t}},ga="modal",Bd="bs.modal",pt=`.${Bd}`,Fd=".data-api",va="Escape",ba={backdrop:!0,keyboard:!0,focus:!0},Wd={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"},Hd=`hide${pt}`,jd=`hidePrevented${pt}`,al=`hidden${pt}`,ll=`show${pt}`,qd=`shown${pt}`,ya=`resize${pt}`,Ea=`click.dismiss${pt}`,Aa=`keydown.dismiss${pt}`,Vd=`mouseup.dismiss${pt}`,wa=`mousedown.dismiss${pt}`,Ud=`click${pt}${Fd}`,Sa="modal-open",$d="fade",Ca="show",es="modal-static",zd=".modal.show",Kd=".modal-dialog",Yd=".modal-body",Gd='[data-bs-toggle="modal"]',Zt=class extends lt{constructor(t,e){super(t),this._config=this._getConfig(e),this._dialog=C.findOne(Kd,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollBar=new Wi}static get Default(){return ba}static get NAME(){return ga}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||v.trigger(this._element,ll,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),this._scrollBar.hide(),document.body.classList.add(Sa),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),v.on(this._dialog,wa,()=>{v.one(this._element,Vd,n=>{n.target===this._element&&(this._ignoreBackdropClick=!0)})}),this._showBackdrop(()=>this._showElement(t)))}hide(){if(!this._isShown||this._isTransitioning||v.trigger(this._element,Hd).defaultPrevented)return;this._isShown=!1;let e=this._isAnimated();e&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),this._focustrap.deactivate(),this._element.classList.remove(Ca),v.off(this._element,Ea),v.off(this._dialog,wa),this._queueCallback(()=>this._hideModal(),this._element,e)}dispose(){[window,this._dialog].forEach(t=>v.off(t,pt)),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Nn({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Bn({trapElement:this._element})}_getConfig(t){return t={...ba,...K.getDataAttributes(this._element),...typeof t=="object"?t:{}},Rt(ga,t,Wd),t}_showElement(t){let e=this._isAnimated(),n=C.findOne(Yd,this._dialog);(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE)&&document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,n&&(n.scrollTop=0),e&&si(this._element),this._element.classList.add(Ca);let r=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,v.trigger(this._element,qd,{relatedTarget:t})};this._queueCallback(r,this._dialog,e)}_setEscapeEvent(){this._isShown?v.on(this._element,Aa,t=>{this._config.keyboard&&t.key===va?(t.preventDefault(),this.hide()):!this._config.keyboard&&t.key===va&&this._triggerBackdropTransition()}):v.off(this._element,Aa)}_setResizeEvent(){this._isShown?v.on(window,ya,()=>this._adjustDialog()):v.off(window,ya)}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Sa),this._resetAdjustments(),this._scrollBar.reset(),v.trigger(this._element,al)})}_showBackdrop(t){v.on(this._element,Ea,e=>{if(this._ignoreBackdropClick){this._ignoreBackdropClick=!1;return}e.target===e.currentTarget&&(this._config.backdrop===!0?this.hide():this._config.backdrop==="static"&&this._triggerBackdropTransition())}),this._backdrop.show(t)}_isAnimated(){return this._element.classList.contains($d)}_triggerBackdropTransition(){if(v.trigger(this._element,jd).defaultPrevented)return;let{classList:e,scrollHeight:n,style:r}=this._element,s=n>document.documentElement.clientHeight;!s&&r.overflowY==="hidden"||e.contains(es)||(s||(r.overflowY="hidden"),e.add(es),this._queueCallback(()=>{e.remove(es),s||this._queueCallback(()=>{r.overflowY=""},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){let t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),n=e>0;(!n&&t&&!it()||n&&!t&&it())&&(this._element.style.paddingLeft=`${e}px`),(n&&!t&&!it()||!n&&t&&it())&&(this._element.style.paddingRight=`${e}px`)}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each(function(){let n=Zt.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t](e)}})}};v.on(document,Ud,Gd,function(i){let t=Xt(this);["A","AREA"].includes(this.tagName)&&i.preventDefault(),v.one(t,ll,r=>{r.defaultPrevented||v.one(t,al,()=>{ji(this)&&this.focus()})});let e=C.findOne(zd);e&&Zt.getInstance(e).hide(),Zt.getOrCreateInstance(t).toggle(this)});Fn(Zt);mt(Zt);var _a="offcanvas",Jd="bs.offcanvas",Oe=`.${Jd}`,cl=".data-api",Xd=`load${Oe}${cl}`,Qd="Escape",xa={backdrop:!0,keyboard:!0,scroll:!1},Zd={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"},Ta="show",tf="offcanvas-backdrop",ul=".offcanvas.show",ef=`show${Oe}`,nf=`shown${Oe}`,rf=`hide${Oe}`,hl=`hidden${Oe}`,sf=`click${Oe}${cl}`,of=`keydown.dismiss${Oe}`,af='[data-bs-toggle="offcanvas"]',Bt=class extends lt{constructor(t,e){super(t),this._config=this._getConfig(e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get NAME(){return _a}static get Default(){return xa}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||v.trigger(this._element,ef,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._element.style.visibility="visible",this._backdrop.show(),this._config.scroll||new Wi().hide(),this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Ta);let n=()=>{this._config.scroll||this._focustrap.activate(),v.trigger(this._element,nf,{relatedTarget:t})};this._queueCallback(n,this._element,!0)}hide(){if(!this._isShown||v.trigger(this._element,rf).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.remove(Ta),this._backdrop.hide();let e=()=>{this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._element.style.visibility="hidden",this._config.scroll||new Wi().reset(),v.trigger(this._element,hl)};this._queueCallback(e,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_getConfig(t){return t={...xa,...K.getDataAttributes(this._element),...typeof t=="object"?t:{}},Rt(_a,t,Zd),t}_initializeBackDrop(){return new Nn({className:tf,isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_initializeFocusTrap(){return new Bn({trapElement:this._element})}_addEventListeners(){v.on(this._element,of,t=>{this._config.keyboard&&t.key===Qd&&this.hide()})}static jQueryInterface(t){return this.each(function(){let e=Bt.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}};v.on(document,sf,af,function(i){let t=Xt(this);if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),Le(this))return;v.one(t,hl,()=>{ji(this)&&this.focus()});let e=C.findOne(ul);e&&e!==t&&Bt.getInstance(e).hide(),Bt.getOrCreateInstance(t).toggle(this)});v.on(window,Xd,()=>C.find(ul).forEach(i=>Bt.getOrCreateInstance(i).show()));Fn(Bt);mt(Bt);var lf=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),cf=/^aria-[\w-]*$/i,uf=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,hf=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,df=(i,t)=>{let e=i.nodeName.toLowerCase();if(t.includes(e))return lf.has(e)?Boolean(uf.test(i.nodeValue)||hf.test(i.nodeValue)):!0;let n=t.filter(r=>r instanceof RegExp);for(let r=0,s=n.length;r<s;r++)if(n[r].test(e))return!0;return!1},ff={"*":["class","dir","id","lang","role",cf],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function La(i,t,e){if(!i.length)return i;if(e&&typeof e=="function")return e(i);let r=new window.DOMParser().parseFromString(i,"text/html"),s=[].concat(...r.body.querySelectorAll("*"));for(let o=0,a=s.length;o<a;o++){let d=s[o],f=d.nodeName.toLowerCase();if(!Object.keys(t).includes(f)){d.remove();continue}let p=[].concat(...d.attributes),b=[].concat(t["*"]||[],t[f]||[]);p.forEach(y=>{df(y,b)||d.removeAttribute(y.nodeName)})}return r.body.innerHTML}var Ra="tooltip",mf="bs.tooltip",Tt=`.${mf}`,pf="bs-tooltip",gf=new Set(["sanitize","allowList","sanitizeFn"]),vf={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"},bf={AUTO:"auto",TOP:"top",RIGHT:it()?"left":"right",BOTTOM:"bottom",LEFT:it()?"right":"left"},yf={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:[0,0],container:!1,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:ff,popperConfig:null},Ef={HIDE:`hide${Tt}`,HIDDEN:`hidden${Tt}`,SHOW:`show${Tt}`,SHOWN:`shown${Tt}`,INSERTED:`inserted${Tt}`,CLICK:`click${Tt}`,FOCUSIN:`focusin${Tt}`,FOCUSOUT:`focusout${Tt}`,MOUSEENTER:`mouseenter${Tt}`,MOUSELEAVE:`mouseleave${Tt}`},Dn="fade",Af="modal",Oi="show",ki="show",is="out",Da=".tooltip-inner",Oa=`.${Af}`,ka="hide.bs.modal",Pi="hover",ns="focus",wf="click",Sf="manual",te=class extends lt{constructor(t,e){if(typeof Tn>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this._config=this._getConfig(e),this.tip=null,this._setListeners()}static get Default(){return yf}static get NAME(){return Ra}static get Event(){return Ef}static get DefaultType(){return vf}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(t){if(!!this._isEnabled)if(t){let e=this._initializeOnDelegatedTarget(t);e._activeTrigger.click=!e._activeTrigger.click,e._isWithActiveTrigger()?e._enter(null,e):e._leave(null,e)}else{if(this.getTipElement().classList.contains(Oi)){this._leave(null,this);return}this._enter(null,this)}}dispose(){clearTimeout(this._timeout),v.off(this._element.closest(Oa),ka,this._hideModalHandler),this.tip&&this.tip.remove(),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this.isWithContent()&&this._isEnabled))return;let t=v.trigger(this._element,this.constructor.Event.SHOW),e=$a(this._element),n=e===null?this._element.ownerDocument.documentElement.contains(this._element):e.contains(this._element);if(t.defaultPrevented||!n)return;this.constructor.NAME==="tooltip"&&this.tip&&this.getTitle()!==this.tip.querySelector(Da).innerHTML&&(this._disposePopper(),this.tip.remove(),this.tip=null);let r=this.getTipElement(),s=Hu(this.constructor.NAME);r.setAttribute("id",s),this._element.setAttribute("aria-describedby",s),this._config.animation&&r.classList.add(Dn);let o=typeof this._config.placement=="function"?this._config.placement.call(this,r,this._element):this._config.placement,a=this._getAttachment(o);this._addAttachmentClass(a);let{container:d}=this._config;Bi.set(r,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(d.append(r),v.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=Di(this._element,r,this._getPopperConfig(a)),r.classList.add(Oi);let f=this._resolvePossibleFunction(this._config.customClass);f&&r.classList.add(...f.split(" ")),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(y=>{v.on(y,"mouseover",In)});let p=()=>{let y=this._hoverState;this._hoverState=null,v.trigger(this._element,this.constructor.Event.SHOWN),y===is&&this._leave(null,this)},b=this.tip.classList.contains(Dn);this._queueCallback(p,this.tip,b)}hide(){if(!this._popper)return;let t=this.getTipElement(),e=()=>{this._isWithActiveTrigger()||(this._hoverState!==ki&&t.remove(),this._cleanTipClass(),this._element.removeAttribute("aria-describedby"),v.trigger(this._element,this.constructor.Event.HIDDEN),this._disposePopper())};if(v.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented)return;t.classList.remove(Oi),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(s=>v.off(s,"mouseover",In)),this._activeTrigger[wf]=!1,this._activeTrigger[ns]=!1,this._activeTrigger[Pi]=!1;let r=this.tip.classList.contains(Dn);this._queueCallback(e,this.tip,r),this._hoverState=""}update(){this._popper!==null&&this._popper.update()}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(this.tip)return this.tip;let t=document.createElement("div");t.innerHTML=this._config.template;let e=t.children[0];return this.setContent(e),e.classList.remove(Dn,Oi),this.tip=e,this.tip}setContent(t){this._sanitizeAndSetContent(t,this.getTitle(),Da)}_sanitizeAndSetContent(t,e,n){let r=C.findOne(n,t);if(!e&&r){r.remove();return}this.setElementContent(r,e)}setElementContent(t,e){if(t!==null){if(Re(e)){e=Qt(e),this._config.html?e.parentNode!==t&&(t.innerHTML="",t.append(e)):t.textContent=e.textContent;return}this._config.html?(this._config.sanitize&&(e=La(e,this._config.allowList,this._config.sanitizeFn)),t.innerHTML=e):t.textContent=e}}getTitle(){let t=this._element.getAttribute("data-bs-original-title")||this._config.title;return this._resolvePossibleFunction(t)}updateAttachment(t){return t==="right"?"end":t==="left"?"start":t}_initializeOnDelegatedTarget(t,e){return e||this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_getOffset(){let{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_resolvePossibleFunction(t){return typeof t=="function"?t.call(this._element):t}_getPopperConfig(t){let e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:n=>this._handlePopperPlacementChange(n)}],onFirstUpdate:n=>{n.options.placement!==n.placement&&this._handlePopperPlacementChange(n)}};return{...e,...typeof this._config.popperConfig=="function"?this._config.popperConfig(e):this._config.popperConfig}}_addAttachmentClass(t){this.getTipElement().classList.add(`${this._getBasicClassPrefix()}-${this.updateAttachment(t)}`)}_getAttachment(t){return bf[t.toUpperCase()]}_setListeners(){this._config.trigger.split(" ").forEach(e=>{if(e==="click")v.on(this._element,this.constructor.Event.CLICK,this._config.selector,n=>this.toggle(n));else if(e!==Sf){let n=e===Pi?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,r=e===Pi?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;v.on(this._element,n,this._config.selector,s=>this._enter(s)),v.on(this._element,r,this._config.selector,s=>this._leave(s))}}),this._hideModalHandler=()=>{this._element&&this.hide()},v.on(this._element.closest(Oa),ka,this._hideModalHandler),this._config.selector?this._config={...this._config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){let t=this._element.getAttribute("title"),e=typeof this._element.getAttribute("data-bs-original-title");(t||e!=="string")&&(this._element.setAttribute("data-bs-original-title",t||""),t&&!this._element.getAttribute("aria-label")&&!this._element.textContent&&this._element.setAttribute("aria-label",t),this._element.setAttribute("title",""))}_enter(t,e){if(e=this._initializeOnDelegatedTarget(t,e),t&&(e._activeTrigger[t.type==="focusin"?ns:Pi]=!0),e.getTipElement().classList.contains(Oi)||e._hoverState===ki){e._hoverState=ki;return}if(clearTimeout(e._timeout),e._hoverState=ki,!e._config.delay||!e._config.delay.show){e.show();return}e._timeout=setTimeout(()=>{e._hoverState===ki&&e.show()},e._config.delay.show)}_leave(t,e){if(e=this._initializeOnDelegatedTarget(t,e),t&&(e._activeTrigger[t.type==="focusout"?ns:Pi]=e._element.contains(t.relatedTarget)),!e._isWithActiveTrigger()){if(clearTimeout(e._timeout),e._hoverState=is,!e._config.delay||!e._config.delay.hide){e.hide();return}e._timeout=setTimeout(()=>{e._hoverState===is&&e.hide()},e._config.delay.hide)}}_isWithActiveTrigger(){for(let t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1}_getConfig(t){let e=K.getDataAttributes(this._element);return Object.keys(e).forEach(n=>{gf.has(n)&&delete e[n]}),t={...this.constructor.Default,...e,...typeof t=="object"&&t?t:{}},t.container=t.container===!1?document.body:Qt(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),Rt(Ra,t,this.constructor.DefaultType),t.sanitize&&(t.template=La(t.template,t.allowList,t.sanitizeFn)),t}_getDelegateConfig(){let t={};for(let e in this._config)this.constructor.Default[e]!==this._config[e]&&(t[e]=this._config[e]);return t}_cleanTipClass(){let t=this.getTipElement(),e=new RegExp(`(^|\\s)${this._getBasicClassPrefix()}\\S+`,"g"),n=t.getAttribute("class").match(e);n!==null&&n.length>0&&n.map(r=>r.trim()).forEach(r=>t.classList.remove(r))}_getBasicClassPrefix(){return pf}_handlePopperPlacementChange(t){let{state:e}=t;!e||(this.tip=e.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(e.placement)))}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(t){return this.each(function(){let e=te.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}};mt(te);var Cf="popover",_f="bs.popover",Lt=`.${_f}`,xf="bs-popover",Tf={...te.Default,placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'},Lf={...te.DefaultType,content:"(string|element|function)"},Rf={HIDE:`hide${Lt}`,HIDDEN:`hidden${Lt}`,SHOW:`show${Lt}`,SHOWN:`shown${Lt}`,INSERTED:`inserted${Lt}`,CLICK:`click${Lt}`,FOCUSIN:`focusin${Lt}`,FOCUSOUT:`focusout${Lt}`,MOUSEENTER:`mouseenter${Lt}`,MOUSELEAVE:`mouseleave${Lt}`},Df=".popover-header",Of=".popover-body",Hi=class extends te{static get Default(){return Tf}static get NAME(){return Cf}static get Event(){return Rf}static get DefaultType(){return Lf}isWithContent(){return this.getTitle()||this._getContent()}setContent(t){this._sanitizeAndSetContent(t,this.getTitle(),Df),this._sanitizeAndSetContent(t,this._getContent(),Of)}_getContent(){return this._resolvePossibleFunction(this._config.content)}_getBasicClassPrefix(){return xf}static jQueryInterface(t){return this.each(function(){let e=Hi.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}};mt(Hi);var Pa="scrollspy",kf="bs.scrollspy",Wn=`.${kf}`,Pf=".data-api",Ia={offset:10,method:"auto",target:""},If={offset:"number",method:"string",target:"(string|element)"},Nf=`activate${Wn}`,Mf=`scroll${Wn}`,Bf=`load${Wn}${Pf}`,dl="dropdown-item",Qe="active",Ff='[data-bs-spy="scroll"]',Wf=".nav, .list-group",us=".nav-link",Hf=".nav-item",fl=".list-group-item",rs=`${us}, ${fl}, .${dl}`,jf=".dropdown",qf=".dropdown-toggle",Vf="offset",Na="position",ii=class extends lt{constructor(t,e){super(t),this._scrollElement=this._element.tagName==="BODY"?window:this._element,this._config=this._getConfig(e),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,v.on(this._scrollElement,Mf,()=>this._process()),this.refresh(),this._process()}static get Default(){return Ia}static get NAME(){return Pa}refresh(){let t=this._scrollElement===this._scrollElement.window?Vf:Na,e=this._config.method==="auto"?t:this._config.method,n=e===Na?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),C.find(rs,this._config.target).map(s=>{let o=hs(s),a=o?C.findOne(o):null;if(a){let d=a.getBoundingClientRect();if(d.width||d.height)return[K[e](a).top+n,o]}return null}).filter(s=>s).sort((s,o)=>s[0]-o[0]).forEach(s=>{this._offsets.push(s[0]),this._targets.push(s[1])})}dispose(){v.off(this._scrollElement,Wn),super.dispose()}_getConfig(t){return t={...Ia,...K.getDataAttributes(this._element),...typeof t=="object"&&t?t:{}},t.target=Qt(t.target)||document.documentElement,Rt(Pa,t,If),t}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){let t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),t>=n){let r=this._targets[this._targets.length-1];this._activeTarget!==r&&this._activate(r);return}if(this._activeTarget&&t<this._offsets[0]&&this._offsets[0]>0){this._activeTarget=null,this._clear();return}for(let r=this._offsets.length;r--;)this._activeTarget!==this._targets[r]&&t>=this._offsets[r]&&(typeof this._offsets[r+1]>"u"||t<this._offsets[r+1])&&this._activate(this._targets[r])}_activate(t){this._activeTarget=t,this._clear();let e=rs.split(",").map(r=>`${r}[data-bs-target="${t}"],${r}[href="${t}"]`),n=C.findOne(e.join(","),this._config.target);n.classList.add(Qe),n.classList.contains(dl)?C.findOne(qf,n.closest(jf)).classList.add(Qe):C.parents(n,Wf).forEach(r=>{C.prev(r,`${us}, ${fl}`).forEach(s=>s.classList.add(Qe)),C.prev(r,Hf).forEach(s=>{C.children(s,us).forEach(o=>o.classList.add(Qe))})}),v.trigger(this._scrollElement,Nf,{relatedTarget:t})}_clear(){C.find(rs,this._config.target).filter(t=>t.classList.contains(Qe)).forEach(t=>t.classList.remove(Qe))}static jQueryInterface(t){return this.each(function(){let e=ii.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}};v.on(window,Bf,()=>{C.find(Ff).forEach(i=>new ii(i))});mt(ii);var Uf="tab",$f="bs.tab",Vi=`.${$f}`,zf=".data-api",Kf=`hide${Vi}`,Yf=`hidden${Vi}`,Gf=`show${Vi}`,Jf=`shown${Vi}`,Xf=`click${Vi}${zf}`,Qf="dropdown-menu",Ii="active",Ma="fade",Ba="show",Zf=".dropdown",tm=".nav, .list-group",Fa=".active",Wa=":scope > li > .active",em='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',im=".dropdown-toggle",nm=":scope > .dropdown-menu .active",ni=class extends lt{static get NAME(){return Uf}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains(Ii))return;let t,e=Xt(this._element),n=this._element.closest(tm);if(n){let a=n.nodeName==="UL"||n.nodeName==="OL"?Wa:Fa;t=C.find(a,n),t=t[t.length-1]}let r=t?v.trigger(t,Kf,{relatedTarget:this._element}):null;if(v.trigger(this._element,Gf,{relatedTarget:t}).defaultPrevented||r!==null&&r.defaultPrevented)return;this._activate(this._element,n);let o=()=>{v.trigger(t,Yf,{relatedTarget:this._element}),v.trigger(this._element,Jf,{relatedTarget:t})};e?this._activate(e,e.parentNode,o):o()}_activate(t,e,n){let s=(e&&(e.nodeName==="UL"||e.nodeName==="OL")?C.find(Wa,e):C.children(e,Fa))[0],o=n&&s&&s.classList.contains(Ma),a=()=>this._transitionComplete(t,s,n);s&&o?(s.classList.remove(Ba),this._queueCallback(a,t,!0)):a()}_transitionComplete(t,e,n){if(e){e.classList.remove(Ii);let s=C.findOne(nm,e.parentNode);s&&s.classList.remove(Ii),e.getAttribute("role")==="tab"&&e.setAttribute("aria-selected",!1)}t.classList.add(Ii),t.getAttribute("role")==="tab"&&t.setAttribute("aria-selected",!0),si(t),t.classList.contains(Ma)&&t.classList.add(Ba);let r=t.parentNode;if(r&&r.nodeName==="LI"&&(r=r.parentNode),r&&r.classList.contains(Qf)){let s=t.closest(Zf);s&&C.find(im,s).forEach(o=>o.classList.add(Ii)),t.setAttribute("aria-expanded",!0)}n&&n()}static jQueryInterface(t){return this.each(function(){let e=ni.getOrCreateInstance(this);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}};v.on(document,Xf,em,function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),Le(this))return;ni.getOrCreateInstance(this).show()});mt(ni);var Ha="toast",rm="bs.toast",ee=`.${rm}`,sm=`mouseover${ee}`,om=`mouseout${ee}`,am=`focusin${ee}`,lm=`focusout${ee}`,cm=`hide${ee}`,um=`hidden${ee}`,hm=`show${ee}`,dm=`shown${ee}`,fm="fade",ja="hide",Ni="show",On="showing",mm={animation:"boolean",autohide:"boolean",delay:"number"},qa={animation:!0,autohide:!0,delay:5e3},ri=class extends lt{constructor(t,e){super(t),this._config=this._getConfig(e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return mm}static get Default(){return qa}static get NAME(){return Ha}show(){if(v.trigger(this._element,hm).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(fm);let e=()=>{this._element.classList.remove(On),v.trigger(this._element,dm),this._maybeScheduleHide()};this._element.classList.remove(ja),si(this._element),this._element.classList.add(Ni),this._element.classList.add(On),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this._element.classList.contains(Ni)||v.trigger(this._element,cm).defaultPrevented)return;let e=()=>{this._element.classList.add(ja),this._element.classList.remove(On),this._element.classList.remove(Ni),v.trigger(this._element,um)};this._element.classList.add(On),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this._element.classList.contains(Ni)&&this._element.classList.remove(Ni),super.dispose()}_getConfig(t){return t={...qa,...K.getDataAttributes(this._element),...typeof t=="object"&&t?t:{}},Rt(Ha,t,this.constructor.DefaultType),t}_maybeScheduleHide(){!this._config.autohide||this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e;break}if(e){this._clearTimeout();return}let n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){v.on(this._element,sm,t=>this._onInteraction(t,!0)),v.on(this._element,om,t=>this._onInteraction(t,!1)),v.on(this._element,am,t=>this._onInteraction(t,!0)),v.on(this._element,lm,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){let e=ri.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t](this)}})}};Fn(ri);mt(ri);document.addEventListener("turbo:load",function(){var i=document.querySelector(".sort-by-title");i&&i.addEventListener("click",pm)});function pm(){var i=document.querySelector("table"),t=i.querySelectorAll("tr"),e=[];for(let s=1;s<t.length;s++)e.push(t[s]);this.querySelector(".bi-arrow-bar-up").classList.contains("hide")?(e.sort(gm),this.querySelector(".bi-arrow-bar-up").classList.remove("hide"),this.querySelector(".bi-arrow-bar-down").classList.add("hide")):(e.sort(vm),this.querySelector(".bi-arrow-bar-down").classList.remove("hide"),this.querySelector(".bi-arrow-bar-up").classList.add("hide"));var n=document.createElement("table");n.classList.add("table"),n.appendChild(t[0]);for(var r=0;r<e.length;r++)n.appendChild(e[r]);i.parentNode.replaceChild(n,i)}function gm(i,t){var e=i.querySelector("td").textContent,n=t.querySelector("td").textContent;return e<n?-1:e>n?1:0}function vm(i,t){var e=i.querySelector("td").textContent,n=t.querySelector("td").textContent;return e<n?1:e>n?-1:0}document.addEventListener("turbo:load",function(){var i=document.querySelector(".pass-check");i&&i.addEventListener("input",bm)});function bm(){var i=document.querySelector(".bi-check"),t=document.querySelector(".bi-dash-circle-fill"),e=document.getElementById("user_password"),n=document.getElementById("user_password_confirmation");switch(n){case"":i.classList.add("hide"),t.classList.add("hide");break;case e.value:console.log("\u043F\u0430\u0440\u043E\u043B\u0438 \u0441\u043E\u0432\u043F\u0430\u0434\u0430\u044E\u0442"),i.classList.remove("hide"),t.classList.add("hide");break;default:t.classList.remove("hide"),i.classList.add("hide"),console.log("\u043F\u0430\u0440\u043E\u043B\u0438 \u043D\u0435  \u0441\u043E\u0432\u043F\u0430\u0434\u0430\u044E\u0442");break}}document.addEventListener("turbo:load",function(){let i=document.querySelectorAll(".form-inline-link");if(i.length)for(var t=0;t<i.length;t++)i[t].addEventListener("click",ym);var e=document.querySelector(".resource-errors");if(e){var n=e.dataset.resourceId;ml(n)}});function ym(i){i.preventDefault();var t=this.dataset.testId;ml(t)}function ml(i){var t=document.querySelector('.form-inline-link[data-test-id="'+i+'"]'),e=document.querySelector('.test-title[data-test-id="'+i+'"]'),n=document.querySelector('.form-inline[data-test-id="'+i+'"]');n.classList.contains("hide")?(e.classList.add("hide"),n.classList.remove("hide"),t.textContent="Cancel"):(e.classList.remove("hide"),n.classList.add("hide"),t.textContent="Edit")}document.addEventListener("turbo:load",function(){var i=document.querySelectorAll(".progress-bar");if(i)for(var t=0;t<i.length;t++)control=i[t],Em(control)});function Em(i){var t=i.dataset.progress;i.style="width:"+t+"%"}document.addEventListener("turbo:load",function(){var i=document.querySelector(".timer");if(i){var t=i.dataset.timer;setInterval(function(){if(t<=0){document.querySelector("form").submit();return}else t--,i.innerHTML=Am(t)},1e3)}});function Am(i){var t="\u0412\u0440\u0435\u043C\u0435\u043D\u0438 \u043E\u0441\u0442\u0430\u043B\u043E\u0441\u044C: ";let e=parseInt(i,10),n=Math.floor(e/3600),r=Math.floor((e-n*3600)/60),s=e-n*3600-r*60;return n<10&&(n="0"+n),r<10&&(r="0"+r),s<10&&(s="0"+s),t+n+":"+r+":"+s}var wm="2.0.0-alpha.1";var Ne="[data-trix-attachment]",Sm={preview:{presentation:"gallery",caption:{name:!0,size:!0}},file:{caption:{size:!0}}},Gi={default:{tagName:"div",parse:!1},quote:{tagName:"blockquote",nestable:!0},heading1:{tagName:"h1",terminal:!0,breakOnReturn:!0,group:!1},code:{tagName:"pre",terminal:!0,text:{plaintext:!0}},bulletList:{tagName:"ul",parse:!1},bullet:{tagName:"li",listAttribute:"bulletList",group:!1,nestable:!0,test(i){return pl(i.parentNode)===Gi[this.listAttribute].tagName}},numberList:{tagName:"ol",parse:!1},number:{tagName:"li",listAttribute:"numberList",group:!1,nestable:!0,test(i){return pl(i.parentNode)===Gi[this.listAttribute].tagName}},attachmentGallery:{tagName:"div",exclusive:!0,terminal:!0,parse:!1,group:!1}},pl=i=>{var t;return i==null||(t=i.tagName)===null||t===void 0?void 0:t.toLowerCase()},ql={composesExistingText:/Android.*Chrome/.test(navigator.userAgent),forcesObjectResizing:/Trident.*rv:11/.test(navigator.userAgent),supportsInputEvents:function(){if(typeof InputEvent>"u")return!1;for(let i of["data","getTargetRanges","inputType"])if(!(i in InputEvent.prototype))return!1;return!0}()},Cm={attachment:"attachment",attachmentCaption:"attachment__caption",attachmentCaptionEditor:"attachment__caption-editor",attachmentMetadata:"attachment__metadata",attachmentMetadataContainer:"attachment__metadata-container",attachmentName:"attachment__name",attachmentProgress:"attachment__progress",attachmentSize:"attachment__size",attachmentToolbar:"attachment__toolbar",attachmentGallery:"attachment-gallery"},x={attachFiles:"Attach Files",bold:"Bold",bullets:"Bullets",byte:"Byte",bytes:"Bytes",captionPlaceholder:"Add a caption\u2026",code:"Code",heading1:"Heading",indent:"Increase Level",italic:"Italic",link:"Link",numbers:"Numbers",outdent:"Decrease Level",quote:"Quote",redo:"Redo",remove:"Remove",strike:"Strikethrough",undo:"Undo",unlink:"Unlink",url:"URL",urlPlaceholder:"Enter a URL\u2026",GB:"GB",KB:"KB",MB:"MB",PB:"PB",TB:"TB"},_m=[x.bytes,x.KB,x.MB,x.GB,x.TB,x.PB],xm={prefix:"IEC",precision:2,formatter(i){switch(i){case 0:return"0 ".concat(x.bytes);case 1:return"1 ".concat(x.byte);default:let t;this.prefix==="SI"?t=1e3:this.prefix==="IEC"&&(t=1024);let e=Math.floor(Math.log(i)/Math.log(t)),s=(i/Math.pow(t,e)).toFixed(this.precision).replace(/0*$/,"").replace(/\.$/,"");return"".concat(s," ").concat(_m[e])}}},eo="\uFEFF",Pe="\xA0",Vl="\uFFFC",Ul=function(i){for(let t in i){let e=i[t];this[t]=e}return this},io=document.documentElement,Tm=io.matches,I=function(i){let{onElement:t,matchingSelector:e,withCallback:n,inPhase:r,preventDefault:s,times:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=t||io,d=e,f=r==="capturing",p=function(b){o!=null&&--o===0&&p.destroy();let y=ne(b.target,{matchingSelector:d});y!=null&&(n?.call(y,b,y),s&&b.preventDefault())};return p.destroy=()=>a.removeEventListener(i,p,f),a.addEventListener(i,p,f),p},Lm=function(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.times=1,I(i,t)},jn=function(i){let{onElement:t,bubbles:e,cancelable:n,attributes:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=t??io;e=e!==!1,n=n!==!1;let o=document.createEvent("Events");return o.initEvent(i,e,n),r!=null&&Ul.call(o,r),s.dispatchEvent(o)},$l=function(i,t){if(i?.nodeType===1)return Tm.call(i,t)},ne=function(i){let{matchingSelector:t,untilNode:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(;i&&i.nodeType!==Node.ELEMENT_NODE;)i=i.parentNode;if(i!=null)if(t!=null){if(i.closest&&e==null)return i.closest(t);for(;i&&i!==e;){if($l(i,t))return i;i=i.parentNode}}else return i},Rm=function(i){for(;(t=i)!==null&&t!==void 0&&t.firstElementChild;){var t;i=i.firstElementChild}return i},no=i=>document.activeElement!==i&&Ie(i,document.activeElement),Ie=function(i,t){if(!(!i||!t))for(;t;){if(t===i)return!0;t=t.parentNode}};var fs=function(i){var t;if(!((t=i)!==null&&t!==void 0&&t.parentNode))return;let e=0;for(i=i.previousSibling;i;)e++,i=i.previousSibling;return e},re=i=>{var t;return i==null||(t=i.parentNode)===null||t===void 0?void 0:t.removeChild(i)},Vn=function(i){let{onlyNodesOfType:t,usingFilter:e,expandEntityReferences:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(()=>{switch(t){case"element":return NodeFilter.SHOW_ELEMENT;case"text":return NodeFilter.SHOW_TEXT;case"comment":return NodeFilter.SHOW_COMMENT;default:return NodeFilter.SHOW_ALL}})();return document.createTreeWalker(i,r,e??null,n===!0)},nt=i=>{var t;return i==null||(t=i.tagName)===null||t===void 0?void 0:t.toLowerCase()},T=function(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e,n;typeof i=="object"?(t=i,i=t.tagName):t={attributes:t};let r=document.createElement(i);if(t.editable!=null&&(t.attributes==null&&(t.attributes={}),t.attributes.contenteditable=t.editable),t.attributes)for(e in t.attributes)n=t.attributes[e],r.setAttribute(e,n);if(t.style)for(e in t.style)n=t.style[e],r.style[e]=n;if(t.data)for(e in t.data)n=t.data[e],r.dataset[e]=n;return t.className&&t.className.split(" ").forEach(s=>{r.classList.add(s)}),t.textContent&&(r.textContent=t.textContent),t.childNodes&&[].concat(t.childNodes).forEach(s=>{r.appendChild(s)}),r},Ui,Ki=function(){if(Ui!=null)return Ui;Ui=[];for(let i in Gi){let t=Gi[i];t.tagName&&Ui.push(t.tagName)}return Ui},ms=i=>ai(i?.firstChild),Dm=function(i){return Ki().includes(nt(i))&&!Ki().includes(nt(i.firstChild))},gl=function(i){let{strict:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{strict:!0};return t?ai(i):ai(i)||!ai(i.firstChild)&&Dm(i)},ai=i=>Om(i)&&i?.data==="block",Om=i=>i?.nodeType===Node.COMMENT_NODE,li=function(i){let{name:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!!i)if(Yi(i)){if(i.data===eo)return t?i.parentNode.dataset.trixCursorTarget===t:!0}else return li(i.firstChild)},Me=i=>$l(i,Ne),zl=i=>Yi(i)&&i?.data==="",Yi=i=>i?.nodeType===Node.TEXT_NODE,km={level2Enabled:!0,getLevel(){return this.level2Enabled&&ql.supportsInputEvents?2:0},pickFiles(i){let t=T("input",{type:"file",multiple:!0,hidden:!0,id:this.fileInputId});t.addEventListener("change",()=>{i(t.files),re(t)}),re(document.getElementById(this.fileInputId)),document.body.appendChild(t),t.click()}},Pm={8:"backspace",9:"tab",13:"return",27:"escape",37:"left",39:"right",46:"delete",68:"d",72:"h",79:"o"},Im={bold:{tagName:"strong",inheritable:!0,parser(i){let t=window.getComputedStyle(i);return t.fontWeight==="bold"||t.fontWeight>=600}},italic:{tagName:"em",inheritable:!0,parser(i){return window.getComputedStyle(i).fontStyle==="italic"}},href:{groupTagName:"a",parser(i){let t="a:not(".concat(Ne,")"),e=i.closest(t);if(e)return e.getAttribute("href")}},strike:{tagName:"del",inheritable:!0},frozen:{style:{backgroundColor:"highlight"}}},Nm={getDefaultHTML(){return`<div class="trix-button-row">
      <span class="trix-button-group trix-button-group--text-tools" data-trix-button-group="text-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bold" data-trix-attribute="bold" data-trix-key="b" title="`.concat(x.bold,'" tabindex="-1">').concat(x.bold,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-italic" data-trix-attribute="italic" data-trix-key="i" title="`).concat(x.italic,'" tabindex="-1">').concat(x.italic,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-strike" data-trix-attribute="strike" title="`).concat(x.strike,'" tabindex="-1">').concat(x.strike,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="`).concat(x.link,'" tabindex="-1">').concat(x.link,`</button>
      </span>

      <span class="trix-button-group trix-button-group--block-tools" data-trix-button-group="block-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-heading-1" data-trix-attribute="heading1" title="`).concat(x.heading1,'" tabindex="-1">').concat(x.heading1,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-quote" data-trix-attribute="quote" title="`).concat(x.quote,'" tabindex="-1">').concat(x.quote,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-code" data-trix-attribute="code" title="`).concat(x.code,'" tabindex="-1">').concat(x.code,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bullet-list" data-trix-attribute="bullet" title="`).concat(x.bullets,'" tabindex="-1">').concat(x.bullets,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-number-list" data-trix-attribute="number" title="`).concat(x.numbers,'" tabindex="-1">').concat(x.numbers,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-decrease-nesting-level" data-trix-action="decreaseNestingLevel" title="`).concat(x.outdent,'" tabindex="-1">').concat(x.outdent,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-increase-nesting-level" data-trix-action="increaseNestingLevel" title="`).concat(x.indent,'" tabindex="-1">').concat(x.indent,`</button>
      </span>

      <span class="trix-button-group trix-button-group--file-tools" data-trix-button-group="file-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-attach" data-trix-action="attachFiles" title="`).concat(x.attachFiles,'" tabindex="-1">').concat(x.attachFiles,`</button>
      </span>

      <span class="trix-button-group-spacer"></span>

      <span class="trix-button-group trix-button-group--history-tools" data-trix-button-group="history-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-undo" data-trix-action="undo" data-trix-key="z" title="`).concat(x.undo,'" tabindex="-1">').concat(x.undo,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-redo" data-trix-action="redo" data-trix-key="shift+z" title="`).concat(x.redo,'" tabindex="-1">').concat(x.redo,`</button>
      </span>
    </div>

    <div class="trix-dialogs" data-trix-dialogs>
      <div class="trix-dialog trix-dialog--link" data-trix-dialog="href" data-trix-dialog-attribute="href">
        <div class="trix-dialog__link-fields">
          <input type="url" name="href" class="trix-input trix-input--dialog" placeholder="`).concat(x.urlPlaceholder,'" aria-label="').concat(x.url,`" required data-trix-input>
          <div class="trix-button-group">
            <input type="button" class="trix-button trix-button--dialog" value="`).concat(x.link,`" data-trix-method="setAttribute">
            <input type="button" class="trix-button trix-button--dialog" value="`).concat(x.unlink,`" data-trix-method="removeAttribute">
          </div>
        </div>
      </div>
    </div>`)}},Mm=5e3,R={attachments:Sm,blockAttributes:Gi,browser:ql,css:Cm,fileSize:xm,input:km,keyNames:Pm,lang:x,textAttributes:Im,toolbar:Nm,undoInterval:Mm};function Bm(i){this.wrapped=i}function Zn(i){var t,e;function n(o,a){return new Promise(function(d,f){var p={key:o,arg:a,resolve:d,reject:f,next:null};e?e=e.next=p:(t=e=p,r(o,a))})}function r(o,a){try{var d=i[o](a),f=d.value,p=f instanceof Bm;Promise.resolve(p?f.wrapped:f).then(function(b){if(p){r(o==="return"?"return":"next",b);return}s(d.done?"return":"normal",b)},function(b){r("throw",b)})}catch(b){s("throw",b)}}function s(o,a){switch(o){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1});break}t=t.next,t?r(t.key,t.arg):e=null}this._invoke=n,typeof i.return!="function"&&(this.return=void 0)}Zn.prototype[typeof Symbol=="function"&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this};Zn.prototype.next=function(i){return this._invoke("next",i)};Zn.prototype.throw=function(i){return this._invoke("throw",i)};Zn.prototype.return=function(i){return this._invoke("return",i)};function ht(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var B=class{static proxyMethod(t){let{name:e,toMethod:n,toProperty:r,optional:s}=Fm(t);this.prototype[e]=function(){let o,a;if(n)if(s){var d;a=(d=this[n])===null||d===void 0?void 0:d.call(this)}else a=this[n]();else r&&(a=this[r]);if(s){var f;if(o=(f=a)===null||f===void 0?void 0:f[e],o)return vl.call(o,a,arguments)}else return o=a[e],vl.call(o,a,arguments)}}},Fm=function(i){let t=i.match(Wm);if(!t)throw new Error("can't parse @proxyMethod expression: ".concat(i));let e={name:t[4]};return t[2]!=null?e.toMethod=t[1]:e.toProperty=t[1],t[3]!=null&&(e.optional=!0),e},{apply:vl}=Function.prototype,Wm=new RegExp("^(.+?)(\\(\\))?(\\?)?\\.(.+?)$"),ps,gs,bl,vs,Be=class extends B{static box(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return t instanceof this?t:this.fromUCS2String(t?.toString())}static fromUCS2String(t){return new this(t,Un(t))}static fromCodepoints(t){return new this($n(t),t)}constructor(t,e){super(...arguments),this.ucs2String=t,this.codepoints=e,this.length=this.codepoints.length,this.ucs2Length=this.ucs2String.length}offsetToUCS2Offset(t){return $n(this.codepoints.slice(0,Math.max(0,t))).length}offsetFromUCS2Offset(t){return Un(this.ucs2String.slice(0,Math.max(0,t))).length}slice(){return this.constructor.fromCodepoints(this.codepoints.slice(...arguments))}charAt(t){return this.slice(t,t+1)}isEqualTo(t){return this.constructor.box(t).ucs2String===this.ucs2String}toJSON(){return this.ucs2String}getCacheKey(){return this.ucs2String}toString(){return this.ucs2String}},Hm=((ps=Array.from)===null||ps===void 0?void 0:ps.call(Array,"\u{1F47C}").length)===1,jm=((gs=(bl=" ").codePointAt)===null||gs===void 0?void 0:gs.call(bl,0))!=null,qm=((vs=String.fromCodePoint)===null||vs===void 0?void 0:vs.call(String,32,128124))===" \u{1F47C}",Un,$n;Hm&&jm?Un=i=>Array.from(i).map(t=>t.codePointAt(0)):Un=function(i){let t=[],e=0,{length:n}=i;for(;e<n;){let r=i.charCodeAt(e++);if(55296<=r&&r<=56319&&e<n){let s=i.charCodeAt(e++);(s&64512)===56320?r=((r&1023)<<10)+(s&1023)+65536:e--}t.push(r)}return t};qm?$n=i=>String.fromCodePoint(...Array.from(i||[])):$n=function(i){return(()=>{let e=[];return Array.from(i).forEach(n=>{let r="";n>65535&&(n-=65536,r+=String.fromCharCode(n>>>10&1023|55296),n=56320|n&1023),e.push(r+String.fromCharCode(n))}),e})().join("")};var Vm=0,Wt=class extends B{static fromJSONString(t){return this.fromJSON(JSON.parse(t))}constructor(){super(...arguments),this.id=++Vm}hasSameConstructorAs(t){return this.constructor===t?.constructor}isEqualTo(t){return this===t}inspect(){let t=[],e=this.contentsForInspection()||{};for(let n in e){let r=e[n];t.push("".concat(n,"=").concat(r))}return"#<".concat(this.constructor.name,":").concat(this.id).concat(t.length?" ".concat(t.join(", ")):"",">")}contentsForInspection(){}toJSONString(){return JSON.stringify(this)}toUTF16String(){return Be.box(this)}getCacheKey(){return this.id.toString()}},Fe=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(i.length!==t.length)return!1;for(let e=0;e<i.length;e++)if(i[e]!==t[e])return!1;return!0},Um=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Fe(i.slice(0,t.length),t)},ro=function(i){let t=i.slice(0);for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.splice(...n),t},$m=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],e=[],n=[],r=new Set;i.forEach(o=>{r.add(o)});let s=new Set;return t.forEach(o=>{s.add(o),r.has(o)||e.push(o)}),i.forEach(o=>{s.has(o)||n.push(o)}),{added:e,removed:n}},zm=/[\u05BE\u05C0\u05C3\u05D0-\u05EA\u05F0-\u05F4\u061B\u061F\u0621-\u063A\u0640-\u064A\u066D\u0671-\u06B7\u06BA-\u06BE\u06C0-\u06CE\u06D0-\u06D5\u06E5\u06E6\u200F\u202B\u202E\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE72\uFE74\uFE76-\uFEFC]/,Km=function(){let i=T("input",{dir:"auto",name:"x",dirName:"x.dir"}),t=T("form");t.appendChild(i);let e=function(){try{return new FormData(t).has(i.dirName)}catch{return!1}}(),n=function(){try{return i.matches(":dir(ltr),:dir(rtl)")}catch{return!1}}();return e?function(r){return i.value=r,new FormData(t).get(i.dirName)}:n?function(r){return i.value=r,i.matches(":dir(rtl)")?"rtl":"ltr"}:function(r){let s=r.trim().charAt(0);return zm.test(s)?"rtl":"ltr"}}(),bs=null,ys=null,Es=null,Hn=null,Ds=()=>(bs||(bs=Gm().concat(Ym())),bs),q=i=>R.blockAttributes[i],Ym=()=>(ys||(ys=Object.keys(R.blockAttributes)),ys),Os=i=>R.textAttributes[i],Gm=()=>(Es||(Es=Object.keys(R.textAttributes)),Es),Jm=()=>{if(!Hn){Hn=[];for(let i in R.blockAttributes){let{listAttribute:t}=R.blockAttributes[i];t!=null&&Hn.push(t)}}return Hn},Kl=function(i,t){let e=Xm(i);e.textContent=t.replace(/%t/g,i)},Xm=function(i){let t=document.createElement("style");t.setAttribute("type","text/css"),t.setAttribute("data-tag-name",i.toLowerCase());let e=Qm();return e&&t.setAttribute("nonce",e),document.head.insertBefore(t,document.head.firstChild),t},Qm=function(){let i=yl("trix-csp-nonce")||yl("csp-nonce");if(i)return i.getAttribute("content")},yl=i=>document.head.querySelector("meta[name=".concat(i,"]")),El={"application/x-trix-feature-detection":"test"},Yl=function(i){let t=i.getData("text/plain"),e=i.getData("text/html");if(t&&e){let{body:n}=new DOMParser().parseFromString(e,"text/html");if(n.textContent===t)return!n.querySelector("*")}else return t?.length},Zm=function(i){if(!(i!=null&&i.setData))return!1;for(let t in El){let e=El[t];try{if(i.setData(t,e),!i.getData(t)===e)return!1}catch{return!1}}return!0},Gl=function(){return/Mac|^iP/.test(navigator.platform)?i=>i.metaKey:i=>i.ctrlKey}(),so=i=>setTimeout(i,1),Jl=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={};for(let e in i){let n=i[e];t[e]=n}return t},en=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Object.keys(i).length!==Object.keys(t).length)return!1;for(let e in i)if(i[e]!==t[e])return!1;return!0},D=function(i){if(i!=null)return Array.isArray(i)||(i=[i,i]),[Al(i[0]),Al(i[1]!=null?i[1]:i[0])]},Ft=function(i){if(i==null)return;let[t,e]=D(i);return ks(t,e)},tr=function(i,t){if(i==null||t==null)return;let[e,n]=D(i),[r,s]=D(t);return ks(e,r)&&ks(n,s)},Al=function(i){return typeof i=="number"?i:Jl(i)},ks=function(i,t){return typeof i=="number"?i===t:en(i,t)},Ps=class extends B{constructor(){super(...arguments),this.update=this.update.bind(this),this.run=this.run.bind(this),this.selectionManagers=[]}start(){if(!this.started)return this.started=!0,"onselectionchange"in document?document.addEventListener("selectionchange",this.update,!0):this.run()}stop(){if(this.started)return this.started=!1,document.removeEventListener("selectionchange",this.update,!0)}registerSelectionManager(t){if(!this.selectionManagers.includes(t))return this.selectionManagers.push(t),this.start()}unregisterSelectionManager(t){if(this.selectionManagers=this.selectionManagers.filter(e=>e!==t),this.selectionManagers.length===0)return this.stop()}notifySelectionManagersOfSelectionChange(){return this.selectionManagers.map(t=>t.selectionDidChange())}update(){let t=ci();if(!tp(t,this.domRange))return this.domRange=t,this.notifySelectionManagersOfSelectionChange()}reset(){return this.domRange=null,this.update()}run(){if(this.started)return this.update(),requestAnimationFrame(this.run)}},tp=(i,t)=>i?.startContainer===t?.startContainer&&i?.startOffset===t?.startOffset&&i?.endContainer===t?.endContainer&&i?.endOffset===t?.endOffset,We=new Ps,Xl=function(){let i=window.getSelection();if(i.rangeCount>0)return i},ci=function(){var i;let t=(i=Xl())===null||i===void 0?void 0:i.getRangeAt(0);if(t&&!ep(t))return t},Ql=function(i){let t=window.getSelection();return t.removeAllRanges(),t.addRange(i),We.update()},ep=i=>wl(i.startContainer)||wl(i.endContainer),wl=i=>!Object.getPrototypeOf(i),zi=i=>i.replace(new RegExp("".concat(eo),"g"),"").replace(new RegExp("".concat(Pe),"g")," "),ip=i=>i.replace(/\r\n/g,`
`),oo=new RegExp("[^\\S".concat(Pe,"]")),ao=i=>i.replace(new RegExp("".concat(oo.source),"g")," ").replace(/\ {2,}/g," "),np=function(i,t){let e,n;return i=Be.box(i),t=Be.box(t),t.length<i.length?[n,e]=Sl(i,t):[e,n]=Sl(t,i),{added:e,removed:n}},Sl=function(i,t){if(i.isEqualTo(t))return["",""];let e=As(i,t),{length:n}=e.utf16String,r;if(n){let{offset:s}=e,o=i.codepoints.slice(0,s).concat(i.codepoints.slice(s+n));r=As(t,Be.fromCodepoints(o))}else r=As(t,i);return[e.utf16String.toString(),r.utf16String.toString()]},As=function(i,t){let e=0,n=i.length,r=t.length;for(;e<n&&i.charAt(e).isEqualTo(t.charAt(e));)e++;for(;n>e+1&&i.charAt(n-1).isEqualTo(t.charAt(r-1));)n--,r--;return{utf16String:i.slice(e,n),offset:e}},Z=class extends Wt{static fromCommonAttributesOfObjects(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(!t.length)return new this;let e=$i(t[0]),n=e.getKeys();return t.slice(1).forEach(r=>{n=e.getKeysCommonToHash($i(r)),e=e.slice(n)}),e}static box(t){return $i(t)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(...arguments),this.values=qn(t)}add(t,e){return this.merge(rp(t,e))}remove(t){return new Z(qn(this.values,t))}get(t){return this.values[t]}has(t){return t in this.values}merge(t){return new Z(sp(this.values,op(t)))}slice(t){let e={};return t.forEach(n=>{this.has(n)&&(e[n]=this.values[n])}),new Z(e)}getKeys(){return Object.keys(this.values)}getKeysCommonToHash(t){return t=$i(t),this.getKeys().filter(e=>this.values[e]===t.values[e])}isEqualTo(t){return Fe(this.toArray(),$i(t).toArray())}isEmpty(){return this.getKeys().length===0}toArray(){if(!this.array){let t=[];for(let e in this.values){let n=this.values[e];t.push(t.push(e,n))}this.array=t.slice(0)}return this.array}toObject(){return qn(this.values)}toJSON(){return this.toObject()}contentsForInspection(){return{values:JSON.stringify(this.values)}}},rp=function(i,t){let e={};return e[i]=t,e},sp=function(i,t){let e=qn(i);for(let n in t){let r=t[n];e[n]=r}return e},qn=function(i,t){let e={};return Object.keys(i).sort().forEach(r=>{r!==t&&(e[r]=i[r])}),e},$i=function(i){return i instanceof Z?i:new Z(i)},op=function(i){return i instanceof Z?i.values:i},ui=class extends B{isPerforming(){return this.performing===!0}hasPerformed(){return this.performed===!0}hasSucceeded(){return this.performed&&this.succeeded}hasFailed(){return this.performed&&!this.succeeded}getPromise(){return this.promise||(this.promise=new Promise((t,e)=>(this.performing=!0,this.perform((n,r)=>{this.succeeded=n,this.performing=!1,this.performed=!0,this.succeeded?t(r):e(r)})))),this.promise}perform(t){return t(!1)}release(){var t,e;(t=this.promise)===null||t===void 0||(e=t.cancel)===null||e===void 0||e.call(t),this.promise=null,this.performing=null,this.performed=null,this.succeeded=null}};ui.proxyMethod("getPromise().then");ui.proxyMethod("getPromise().catch");var Is=class extends ui{constructor(t){super(...arguments),this.url=t}perform(t){let e=new Image;e.onload=()=>(e.width=this.width=e.naturalWidth,e.height=this.height=e.naturalHeight,t(!0,e)),e.onerror=()=>t(!1),e.src=this.url}},se=class extends Wt{static attachmentForFile(t){let e=this.attributesForFile(t),n=new this(e);return n.setFile(t),n}static attributesForFile(t){return new Z({filename:t.name,filesize:t.size,contentType:t.type})}static fromJSON(t){return new this(t)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.releaseFile=this.releaseFile.bind(this),this.attributes=Z.box(t),this.didChangeAttributes()}getAttribute(t){return this.attributes.get(t)}hasAttribute(t){return this.attributes.has(t)}getAttributes(){return this.attributes.toObject()}setAttributes(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=this.attributes.merge(t);if(!this.attributes.isEqualTo(e)){var n,r,s,o;return this.attributes=e,this.didChangeAttributes(),(n=this.previewDelegate)===null||n===void 0||(r=n.attachmentDidChangeAttributes)===null||r===void 0||r.call(n,this),(s=this.delegate)===null||s===void 0||(o=s.attachmentDidChangeAttributes)===null||o===void 0?void 0:o.call(s,this)}}didChangeAttributes(){if(this.isPreviewable())return this.preloadURL()}isPending(){return this.file!=null&&!(this.getURL()||this.getHref())}isPreviewable(){return this.attributes.has("previewable")?this.attributes.get("previewable"):se.previewablePattern.test(this.getContentType())}getType(){return this.hasContent()?"content":this.isPreviewable()?"preview":"file"}getURL(){return this.attributes.get("url")}getHref(){return this.attributes.get("href")}getFilename(){return this.attributes.get("filename")||""}getFilesize(){return this.attributes.get("filesize")}getFormattedFilesize(){let t=this.attributes.get("filesize");return typeof t=="number"?R.fileSize.formatter(t):""}getExtension(){var t;return(t=this.getFilename().match(/\.(\w+)$/))===null||t===void 0?void 0:t[1].toLowerCase()}getContentType(){return this.attributes.get("contentType")}hasContent(){return this.attributes.has("content")}getContent(){return this.attributes.get("content")}getWidth(){return this.attributes.get("width")}getHeight(){return this.attributes.get("height")}getFile(){return this.file}setFile(t){if(this.file=t,this.isPreviewable())return this.preloadFile()}releaseFile(){this.releasePreloadedFile(),this.file=null}getUploadProgress(){return this.uploadProgress!=null?this.uploadProgress:0}setUploadProgress(t){if(this.uploadProgress!==t){var e,n;return this.uploadProgress=t,(e=this.uploadProgressDelegate)===null||e===void 0||(n=e.attachmentDidChangeUploadProgress)===null||n===void 0?void 0:n.call(e,this)}}toJSON(){return this.getAttributes()}getCacheKey(){return[super.getCacheKey(...arguments),this.attributes.getCacheKey(),this.getPreviewURL()].join("/")}getPreviewURL(){return this.previewURL||this.preloadingURL}setPreviewURL(t){if(t!==this.getPreviewURL()){var e,n,r,s;return this.previewURL=t,(e=this.previewDelegate)===null||e===void 0||(n=e.attachmentDidChangeAttributes)===null||n===void 0||n.call(e,this),(r=this.delegate)===null||r===void 0||(s=r.attachmentDidChangePreviewURL)===null||s===void 0?void 0:s.call(r,this)}}preloadURL(){return this.preload(this.getURL(),this.releaseFile)}preloadFile(){if(this.file)return this.fileObjectURL=URL.createObjectURL(this.file),this.preload(this.fileObjectURL)}releasePreloadedFile(){this.fileObjectURL&&(URL.revokeObjectURL(this.fileObjectURL),this.fileObjectURL=null)}preload(t,e){if(t&&t!==this.getPreviewURL())return this.preloadingURL=t,new Is(t).then(r=>{let{width:s,height:o}=r;return(!this.getWidth()||!this.getHeight())&&this.setAttributes({width:s,height:o}),this.preloadingURL=null,this.setPreviewURL(t),e?.()}).catch(()=>(this.preloadingURL=null,e?.()))}};ht(se,"previewablePattern",/^image(\/(gif|png|jpe?g)|$)/);var N=class extends B{constructor(t,e){super(...arguments),this.attachmentManager=t,this.attachment=e,this.id=this.attachment.id,this.file=this.attachment.file}remove(){return this.attachmentManager.requestRemovalOfAttachment(this.attachment)}};N.proxyMethod("attachment.getAttribute");N.proxyMethod("attachment.hasAttribute");N.proxyMethod("attachment.setAttribute");N.proxyMethod("attachment.getAttributes");N.proxyMethod("attachment.setAttributes");N.proxyMethod("attachment.isPending");N.proxyMethod("attachment.isPreviewable");N.proxyMethod("attachment.getURL");N.proxyMethod("attachment.getHref");N.proxyMethod("attachment.getFilename");N.proxyMethod("attachment.getFilesize");N.proxyMethod("attachment.getFormattedFilesize");N.proxyMethod("attachment.getExtension");N.proxyMethod("attachment.getContentType");N.proxyMethod("attachment.getFile");N.proxyMethod("attachment.setFile");N.proxyMethod("attachment.releaseFile");N.proxyMethod("attachment.getUploadProgress");N.proxyMethod("attachment.setUploadProgress");var zn=class extends B{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.managedAttachments={},Array.from(t).forEach(e=>{this.manageAttachment(e)})}getAttachments(){let t=[];for(let e in this.managedAttachments){let n=this.managedAttachments[e];t.push(n)}return t}manageAttachment(t){return this.managedAttachments[t.id]||(this.managedAttachments[t.id]=new N(this,t)),this.managedAttachments[t.id]}attachmentIsManaged(t){return t.id in this.managedAttachments}requestRemovalOfAttachment(t){if(this.attachmentIsManaged(t)){var e,n;return(e=this.delegate)===null||e===void 0||(n=e.attachmentManagerDidRequestRemovalOfAttachment)===null||n===void 0?void 0:n.call(e,t)}}unmanageAttachment(t){let e=this.managedAttachments[t.id];return delete this.managedAttachments[t.id],e}},Ht=class extends Wt{static registerType(t,e){e.type=t,this.types[t]=e}static fromJSON(t){let e=this.types[t.type];if(e)return e.fromJSON(t)}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.attributes=Z.box(e)}copyWithAttributes(t){return new this.constructor(this.getValue(),t)}copyWithAdditionalAttributes(t){return this.copyWithAttributes(this.attributes.merge(t))}copyWithoutAttribute(t){return this.copyWithAttributes(this.attributes.remove(t))}copy(){return this.copyWithAttributes(this.attributes)}getAttribute(t){return this.attributes.get(t)}getAttributesHash(){return this.attributes}getAttributes(){return this.attributes.toObject()}hasAttribute(t){return this.attributes.has(t)}hasSameStringValueAsPiece(t){return t&&this.toString()===t.toString()}hasSameAttributesAsPiece(t){return t&&(this.attributes===t.attributes||this.attributes.isEqualTo(t.attributes))}isBlockBreak(){return!1}isEqualTo(t){return super.isEqualTo(...arguments)||this.hasSameConstructorAs(t)&&this.hasSameStringValueAsPiece(t)&&this.hasSameAttributesAsPiece(t)}isEmpty(){return this.length===0}isSerializable(){return!0}toJSON(){return{type:this.constructor.type,attributes:this.getAttributes()}}contentsForInspection(){return{type:this.constructor.type,attributes:this.attributes.inspect()}}canBeGrouped(){return this.hasAttribute("href")}canBeGroupedWith(t){return this.getAttribute("href")===t.getAttribute("href")}getLength(){return this.length}canBeConsolidatedWith(t){return!1}};ht(Ht,"types",{});var oe=class extends Ht{static fromJSON(t){return new this(se.fromJSON(t.attachment),t.attributes)}constructor(t){super(...arguments),this.attachment=t,this.length=1,this.ensureAttachmentExclusivelyHasAttribute("href"),this.attachment.hasContent()||this.removeProhibitedAttributes()}ensureAttachmentExclusivelyHasAttribute(t){this.hasAttribute(t)&&(this.attachment.hasAttribute(t)||this.attachment.setAttributes(this.attributes.slice(t)),this.attributes=this.attributes.remove(t))}removeProhibitedAttributes(){let t=this.attributes.slice(oe.permittedAttributes);t.isEqualTo(this.attributes)||(this.attributes=t)}getValue(){return this.attachment}isSerializable(){return!this.attachment.isPending()}getCaption(){return this.attributes.get("caption")||""}isEqualTo(t){var e;return super.isEqualTo(t)&&this.attachment.id===(t==null||(e=t.attachment)===null||e===void 0?void 0:e.id)}toString(){return Vl}toJSON(){let t=super.toJSON(...arguments);return t.attachment=this.attachment,t}getCacheKey(){return[super.getCacheKey(...arguments),this.attachment.getCacheKey()].join("/")}toConsole(){return JSON.stringify(this.toString())}};ht(oe,"permittedAttributes",["caption","presentation"]);Ht.registerType("attachment",oe);var Ji=class extends Ht{static fromJSON(t){return new this(t.string,t.attributes)}constructor(t){super(...arguments),this.string=ip(t),this.length=this.string.length}getValue(){return this.string}toString(){return this.string.toString()}isBlockBreak(){return this.toString()===`
`&&this.getAttribute("blockBreak")===!0}toJSON(){let t=super.toJSON(...arguments);return t.string=this.string,t}canBeConsolidatedWith(t){return t&&this.hasSameConstructorAs(t)&&this.hasSameAttributesAsPiece(t)}consolidateWith(t){return new this.constructor(this.toString()+t.toString(),this.attributes)}splitAtOffset(t){let e,n;return t===0?(e=null,n=this):t===this.length?(e=this,n=null):(e=new this.constructor(this.string.slice(0,t),this.attributes),n=new this.constructor(this.string.slice(t),this.attributes)),[e,n]}toConsole(){let{string:t}=this;return t.length>15&&(t=t.slice(0,14)+"\u2026"),JSON.stringify(t.toString())}};Ht.registerType("string",Ji);var hi=class extends Wt{static box(t){return t instanceof this?t:new this(t)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.objects=t.slice(0),this.length=this.objects.length}indexOf(t){return this.objects.indexOf(t)}splice(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new this.constructor(ro(this.objects,...e))}eachObject(t){return this.objects.map((e,n)=>t(e,n))}insertObjectAtIndex(t,e){return this.splice(e,0,t)}insertSplittableListAtIndex(t,e){return this.splice(e,0,...t.objects)}insertSplittableListAtPosition(t,e){let[n,r]=this.splitObjectAtPosition(e);return new this.constructor(n).insertSplittableListAtIndex(t,r)}editObjectAtIndex(t,e){return this.replaceObjectAtIndex(e(this.objects[t]),t)}replaceObjectAtIndex(t,e){return this.splice(e,1,t)}removeObjectAtIndex(t){return this.splice(t,1)}getObjectAtIndex(t){return this.objects[t]}getSplittableListInRange(t){let[e,n,r]=this.splitObjectsAtRange(t);return new this.constructor(e.slice(n,r+1))}selectSplittableList(t){let e=this.objects.filter(n=>t(n));return new this.constructor(e)}removeObjectsInRange(t){let[e,n,r]=this.splitObjectsAtRange(t);return new this.constructor(e).splice(n,r-n+1)}transformObjectsInRange(t,e){let[n,r,s]=this.splitObjectsAtRange(t),o=n.map((a,d)=>r<=d&&d<=s?e(a):a);return new this.constructor(o)}splitObjectsAtRange(t){let e,[n,r,s]=this.splitObjectAtPosition(lp(t));return[n,e]=new this.constructor(n).splitObjectAtPosition(cp(t)+s),[n,r,e-1]}getObjectAtPosition(t){let{index:e}=this.findIndexAndOffsetAtPosition(t);return this.objects[e]}splitObjectAtPosition(t){let e,n,{index:r,offset:s}=this.findIndexAndOffsetAtPosition(t),o=this.objects.slice(0);if(r!=null)if(s===0)e=r,n=0;else{let a=this.getObjectAtIndex(r),[d,f]=a.splitAtOffset(s);o.splice(r,1,d,f),e=r+1,n=d.getLength()-s}else e=o.length,n=0;return[o,e,n]}consolidate(){let t=[],e=this.objects[0];return this.objects.slice(1).forEach(n=>{var r,s;(r=(s=e).canBeConsolidatedWith)!==null&&r!==void 0&&r.call(s,n)?e=e.consolidateWith(n):(t.push(e),e=n)}),e&&t.push(e),new this.constructor(t)}consolidateFromIndexToIndex(t,e){let r=this.objects.slice(0).slice(t,e+1),s=new this.constructor(r).consolidate().toArray();return this.splice(t,r.length,...s)}findIndexAndOffsetAtPosition(t){let e,n=0;for(e=0;e<this.objects.length;e++){let r=this.objects[e],s=n+r.getLength();if(n<=t&&t<s)return{index:e,offset:t-n};n=s}return{index:null,offset:null}}findPositionAtIndexAndOffset(t,e){let n=0;for(let r=0;r<this.objects.length;r++){let s=this.objects[r];if(r<t)n+=s.getLength();else if(r===t){n+=e;break}}return n}getEndPosition(){return this.endPosition==null&&(this.endPosition=0,this.objects.forEach(t=>this.endPosition+=t.getLength())),this.endPosition}toString(){return this.objects.join("")}toArray(){return this.objects.slice(0)}toJSON(){return this.toArray()}isEqualTo(t){return super.isEqualTo(...arguments)||ap(this.objects,t?.objects)}contentsForInspection(){return{objects:"[".concat(this.objects.map(t=>t.inspect()).join(", "),"]")}}},ap=function(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(i.length!==t.length)return!1;let e=!0;for(let n=0;n<i.length;n++){let r=i[n];e&&!r.isEqualTo(t[n])&&(e=!1)}return e},lp=i=>i[0],cp=i=>i[1],ut=class extends Wt{static textForAttachmentWithAttributes(t,e){let n=new oe(t,e);return new this([n])}static textForStringWithAttributes(t,e){let n=new Ji(t,e);return new this([n])}static fromJSON(t){let e=Array.from(t).map(n=>Ht.fromJSON(n));return new this(e)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments);let e=t.filter(n=>!n.isEmpty());this.pieceList=new hi(e)}copy(){return this.copyWithPieceList(this.pieceList)}copyWithPieceList(t){return new this.constructor(t.consolidate().toArray())}copyUsingObjectMap(t){let e=this.getPieces().map(n=>t.find(n)||n);return new this.constructor(e)}appendText(t){return this.insertTextAtPosition(t,this.getLength())}insertTextAtPosition(t,e){return this.copyWithPieceList(this.pieceList.insertSplittableListAtPosition(t.pieceList,e))}removeTextAtRange(t){return this.copyWithPieceList(this.pieceList.removeObjectsInRange(t))}replaceTextAtRange(t,e){return this.removeTextAtRange(e).insertTextAtPosition(t,e[0])}moveTextFromRangeToPosition(t,e){if(t[0]<=e&&e<=t[1])return;let n=this.getTextAtRange(t),r=n.getLength();return t[0]<e&&(e-=r),this.removeTextAtRange(t).insertTextAtPosition(n,e)}addAttributeAtRange(t,e,n){let r={};return r[t]=e,this.addAttributesAtRange(r,n)}addAttributesAtRange(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,n=>n.copyWithAdditionalAttributes(t)))}removeAttributeAtRange(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,n=>n.copyWithoutAttribute(t)))}setAttributesAtRange(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,n=>n.copyWithAttributes(t)))}getAttributesAtPosition(t){var e;return((e=this.pieceList.getObjectAtPosition(t))===null||e===void 0?void 0:e.getAttributes())||{}}getCommonAttributes(){let t=Array.from(this.pieceList.toArray()).map(e=>e.getAttributes());return Z.fromCommonAttributesOfObjects(t).toObject()}getCommonAttributesAtRange(t){return this.getTextAtRange(t).getCommonAttributes()||{}}getExpandedRangeForAttributeAtOffset(t,e){let n,r=n=e,s=this.getLength();for(;r>0&&this.getCommonAttributesAtRange([r-1,n])[t];)r--;for(;n<s&&this.getCommonAttributesAtRange([e,n+1])[t];)n++;return[r,n]}getTextAtRange(t){return this.copyWithPieceList(this.pieceList.getSplittableListInRange(t))}getStringAtRange(t){return this.pieceList.getSplittableListInRange(t).toString()}getStringAtPosition(t){return this.getStringAtRange([t,t+1])}startsWithString(t){return this.getStringAtRange([0,t.length])===t}endsWithString(t){let e=this.getLength();return this.getStringAtRange([e-t.length,e])===t}getAttachmentPieces(){return this.pieceList.toArray().filter(t=>!!t.attachment)}getAttachments(){return this.getAttachmentPieces().map(t=>t.attachment)}getAttachmentAndPositionById(t){let e=0;for(let r of this.pieceList.toArray()){var n;if(((n=r.attachment)===null||n===void 0?void 0:n.id)===t)return{attachment:r.attachment,position:e};e+=r.length}return{attachment:null,position:null}}getAttachmentById(t){let{attachment:e}=this.getAttachmentAndPositionById(t);return e}getRangeOfAttachment(t){let e=this.getAttachmentAndPositionById(t.id),n=e.position;if(t=e.attachment,t)return[n,n+1]}updateAttributesForAttachment(t,e){let n=this.getRangeOfAttachment(e);return n?this.addAttributesAtRange(t,n):this}getLength(){return this.pieceList.getEndPosition()}isEmpty(){return this.getLength()===0}isEqualTo(t){var e;return super.isEqualTo(t)||(t==null||(e=t.pieceList)===null||e===void 0?void 0:e.isEqualTo(this.pieceList))}isBlockBreak(){return this.getLength()===1&&this.pieceList.getObjectAtIndex(0).isBlockBreak()}eachPiece(t){return this.pieceList.eachObject(t)}getPieces(){return this.pieceList.toArray()}getPieceAtPosition(t){return this.pieceList.getObjectAtPosition(t)}contentsForInspection(){return{pieceList:this.pieceList.inspect()}}toSerializableText(){let t=this.pieceList.selectSplittableList(e=>e.isSerializable());return this.copyWithPieceList(t)}toString(){return this.pieceList.toString()}toJSON(){return this.pieceList.toJSON()}toConsole(){return JSON.stringify(this.pieceList.toArray().map(t=>JSON.parse(t.toConsole())))}getDirection(){return Km(this.toString())}isRTL(){return this.getDirection()==="rtl"}},wt=class extends Wt{static fromJSON(t){let e=ut.fromJSON(t.text);return new this(e,t.attributes)}constructor(t,e){super(...arguments),this.text=up(t||new ut),this.attributes=e||[]}isEmpty(){return this.text.isBlockBreak()}isEqualTo(t){return super.isEqualTo(t)?!0:this.text.isEqualTo(t?.text)&&Fe(this.attributes,t?.attributes)}copyWithText(t){return new wt(t,this.attributes)}copyWithoutText(){return this.copyWithText(null)}copyWithAttributes(t){return new wt(this.text,t)}copyWithoutAttributes(){return this.copyWithAttributes(null)}copyUsingObjectMap(t){let e=t.find(this.text);return e?this.copyWithText(e):this.copyWithText(this.text.copyUsingObjectMap(t))}addAttribute(t){let e=this.attributes.concat(Cl(t));return this.copyWithAttributes(e)}removeAttribute(t){let{listAttribute:e}=q(t),n=xl(xl(this.attributes,t),e);return this.copyWithAttributes(n)}removeLastAttribute(){return this.removeAttribute(this.getLastAttribute())}getLastAttribute(){return _l(this.attributes)}getAttributes(){return this.attributes.slice(0)}getAttributeLevel(){return this.attributes.length}getAttributeAtLevel(t){return this.attributes[t-1]}hasAttribute(t){return this.attributes.includes(t)}hasAttributes(){return this.getAttributeLevel()>0}getLastNestableAttribute(){return _l(this.getNestableAttributes())}getNestableAttributes(){return this.attributes.filter(t=>q(t).nestable)}getNestingLevel(){return this.getNestableAttributes().length}decreaseNestingLevel(){let t=this.getLastNestableAttribute();return t?this.removeAttribute(t):this}increaseNestingLevel(){let t=this.getLastNestableAttribute();if(t){let e=this.attributes.lastIndexOf(t),n=ro(this.attributes,e+1,0,...Cl(t));return this.copyWithAttributes(n)}else return this}getListItemAttributes(){return this.attributes.filter(t=>q(t).listAttribute)}isListItem(){var t;return(t=q(this.getLastAttribute()))===null||t===void 0?void 0:t.listAttribute}isTerminalBlock(){var t;return(t=q(this.getLastAttribute()))===null||t===void 0?void 0:t.terminal}breaksOnReturn(){var t;return(t=q(this.getLastAttribute()))===null||t===void 0?void 0:t.breakOnReturn}findLineBreakInDirectionFromPosition(t,e){let n=this.toString(),r;switch(t){case"forward":r=n.indexOf(`
`,e);break;case"backward":r=n.slice(0,e).lastIndexOf(`
`)}if(r!==-1)return r}contentsForInspection(){return{text:this.text.inspect(),attributes:this.attributes}}toString(){return this.text.toString()}toJSON(){return{text:this.text,attributes:this.attributes}}getDirection(){return this.text.getDirection()}isRTL(){return this.text.isRTL()}getLength(){return this.text.getLength()}canBeConsolidatedWith(t){return!this.hasAttributes()&&!t.hasAttributes()&&this.getDirection()===t.getDirection()}consolidateWith(t){let e=ut.textForStringWithAttributes(`
`),n=this.getTextWithoutBlockBreak().appendText(e);return this.copyWithText(n.appendText(t.text))}splitAtOffset(t){let e,n;return t===0?(e=null,n=this):t===this.getLength()?(e=this,n=null):(e=this.copyWithText(this.text.getTextAtRange([0,t])),n=this.copyWithText(this.text.getTextAtRange([t,this.getLength()]))),[e,n]}getBlockBreakPosition(){return this.text.getLength()-1}getTextWithoutBlockBreak(){return Zl(this.text)?this.text.getTextAtRange([0,this.getBlockBreakPosition()]):this.text.copy()}canBeGrouped(t){return this.attributes[t]}canBeGroupedWith(t,e){let n=t.getAttributes(),r=n[e],s=this.attributes[e];return s===r&&!(q(s).group===!1&&!Jm().includes(n[e+1]))&&(this.getDirection()===t.getDirection()||t.isEmpty())}},up=function(i){return i=hp(i),i=fp(i),i},hp=function(i){let t=!1,e=i.getPieces(),n=e.slice(0,e.length-1),r=e[e.length-1];return r?(n=n.map(s=>s.isBlockBreak()?(t=!0,mp(s)):s),t?new ut([...n,r]):i):i},dp=ut.textForStringWithAttributes(`
`,{blockBreak:!0}),fp=function(i){return Zl(i)?i:i.appendText(dp)},Zl=function(i){let t=i.getLength();return t===0?!1:i.getTextAtRange([t-1,t]).isBlockBreak()},mp=i=>i.copyWithoutAttribute("blockBreak"),Cl=function(i){let{listAttribute:t}=q(i);return t?[t,i]:[i]},_l=i=>i.slice(-1)[0],xl=function(i,t){let e=i.lastIndexOf(t);return e===-1?i:ro(i,e,1)},Ns=class extends B{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.objects={},Array.from(t).forEach(e=>{let n=JSON.stringify(e);this.objects[n]==null&&(this.objects[n]=e)})}find(t){let e=JSON.stringify(t);return this.objects[e]}},rt=class extends Wt{static fromJSON(t){let e=Array.from(t).map(n=>wt.fromJSON(n));return new this(e)}static fromString(t,e){let n=ut.textForStringWithAttributes(t,e);return new this([new wt(n)])}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),t.length===0&&(t=[new wt]),this.blockList=hi.box(t)}isEmpty(){let t=this.getBlockAtIndex(0);return this.blockList.length===1&&t.isEmpty()&&!t.hasAttributes()}copy(){let e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).consolidateBlocks?this.blockList.consolidate().toArray():this.blockList.toArray();return new this.constructor(e)}copyUsingObjectsFromDocument(t){let e=new Ns(t.getObjects());return this.copyUsingObjectMap(e)}copyUsingObjectMap(t){let e=this.getBlocks().map(n=>t.find(n)||n.copyUsingObjectMap(t));return new this.constructor(e)}copyWithBaseBlockAttributes(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=this.getBlocks().map(n=>{let r=t.concat(n.getAttributes());return n.copyWithAttributes(r)});return new this.constructor(e)}replaceBlock(t,e){let n=this.blockList.indexOf(t);return n===-1?this:new this.constructor(this.blockList.replaceObjectAtIndex(e,n))}insertDocumentAtRange(t,e){let{blockList:n}=t;e=D(e);let[r]=e,{index:s,offset:o}=this.locationFromPosition(r),a=this,d=this.getBlockAtPosition(r);return Ft(e)&&d.isEmpty()&&!d.hasAttributes()?a=new this.constructor(a.blockList.removeObjectAtIndex(s)):d.getBlockBreakPosition()===o&&r++,a=a.removeTextAtRange(e),new this.constructor(a.blockList.insertSplittableListAtPosition(n,r))}mergeDocumentAtRange(t,e){let n,r;e=D(e);let[s]=e,o=this.locationFromPosition(s),a=this.getBlockAtIndex(o.index).getAttributes(),d=t.getBaseBlockAttributes(),f=a.slice(-d.length);if(Fe(d,f)){let y=a.slice(0,-d.length);n=t.copyWithBaseBlockAttributes(y)}else n=t.copy({consolidateBlocks:!0}).copyWithBaseBlockAttributes(a);let p=n.getBlockCount(),b=n.getBlockAtIndex(0);if(Fe(a,b.getAttributes())){let y=b.getTextWithoutBlockBreak();if(r=this.insertTextAtRange(y,e),p>1){n=new this.constructor(n.getBlocks().slice(1));let A=s+y.getLength();r=r.insertDocumentAtRange(n,A)}}else r=this.insertDocumentAtRange(n,e);return r}insertTextAtRange(t,e){e=D(e);let[n]=e,{index:r,offset:s}=this.locationFromPosition(n),o=this.removeTextAtRange(e);return new this.constructor(o.blockList.editObjectAtIndex(r,a=>a.copyWithText(a.text.insertTextAtPosition(t,s))))}removeTextAtRange(t){let e;t=D(t);let[n,r]=t;if(Ft(t))return this;let[s,o]=Array.from(this.locationRangeFromRange(t)),a=s.index,d=s.offset,f=this.getBlockAtIndex(a),p=o.index,b=o.offset,y=this.getBlockAtIndex(p);if(r-n===1&&f.getBlockBreakPosition()===d&&y.getBlockBreakPosition()!==b&&y.text.getStringAtPosition(b)===`
`)e=this.blockList.editObjectAtIndex(p,_=>_.copyWithText(_.text.removeTextAtRange([b,b+1])));else{let _,w=f.text.getTextAtRange([0,d]),E=y.text.getTextAtRange([b,y.getLength()]),g=w.appendText(E);a!==p&&d===0&&f.getAttributeLevel()>=y.getAttributeLevel()?_=y.copyWithText(g):_=f.copyWithText(g);let l=p+1-a;e=this.blockList.splice(a,l,_)}return new this.constructor(e)}moveTextFromRangeToPosition(t,e){let n;t=D(t);let[r,s]=t;if(r<=e&&e<=s)return this;let o=this.getDocumentAtRange(t),a=this.removeTextAtRange(t),d=r<e;d&&(e-=o.getLength());let[f,...p]=o.getBlocks();return p.length===0?(n=f.getTextWithoutBlockBreak(),d&&(e+=1)):n=f.text,a=a.insertTextAtRange(n,e),p.length===0?a:(o=new this.constructor(p),e+=n.getLength(),a.insertDocumentAtRange(o,e))}addAttributeAtRange(t,e,n){let{blockList:r}=this;return this.eachBlockAtRange(n,(s,o,a)=>r=r.editObjectAtIndex(a,function(){return q(t)?s.addAttribute(t,e):o[0]===o[1]?s:s.copyWithText(s.text.addAttributeAtRange(t,e,o))})),new this.constructor(r)}addAttribute(t,e){let{blockList:n}=this;return this.eachBlock((r,s)=>n=n.editObjectAtIndex(s,()=>r.addAttribute(t,e))),new this.constructor(n)}removeAttributeAtRange(t,e){let{blockList:n}=this;return this.eachBlockAtRange(e,function(r,s,o){q(t)?n=n.editObjectAtIndex(o,()=>r.removeAttribute(t)):s[0]!==s[1]&&(n=n.editObjectAtIndex(o,()=>r.copyWithText(r.text.removeAttributeAtRange(t,s))))}),new this.constructor(n)}updateAttributesForAttachment(t,e){let n=this.getRangeOfAttachment(e),[r]=Array.from(n),{index:s}=this.locationFromPosition(r),o=this.getTextAtIndex(s);return new this.constructor(this.blockList.editObjectAtIndex(s,a=>a.copyWithText(o.updateAttributesForAttachment(t,e))))}removeAttributeForAttachment(t,e){let n=this.getRangeOfAttachment(e);return this.removeAttributeAtRange(t,n)}insertBlockBreakAtRange(t){let e;t=D(t);let[n]=t,{offset:r}=this.locationFromPosition(n),s=this.removeTextAtRange(t);return r===0&&(e=[new wt]),new this.constructor(s.blockList.insertSplittableListAtPosition(new hi(e),n))}applyBlockAttributeAtRange(t,e,n){let r=this.expandRangeToLineBreaksAndSplitBlocks(n),s=r.document;n=r.range;let o=q(t);if(o.listAttribute){s=s.removeLastListAttributeAtRange(n,{exceptAttributeName:t});let a=s.convertLineBreaksToBlockBreaksInRange(n);s=a.document,n=a.range}else o.exclusive?s=s.removeBlockAttributesAtRange(n):o.terminal?s=s.removeLastTerminalAttributeAtRange(n):s=s.consolidateBlocksAtRange(n);return s.addAttributeAtRange(t,e,n)}removeLastListAttributeAtRange(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{blockList:n}=this;return this.eachBlockAtRange(t,function(r,s,o){let a=r.getLastAttribute();!a||!q(a).listAttribute||a!==e.exceptAttributeName&&(n=n.editObjectAtIndex(o,()=>r.removeAttribute(a)))}),new this.constructor(n)}removeLastTerminalAttributeAtRange(t){let{blockList:e}=this;return this.eachBlockAtRange(t,function(n,r,s){let o=n.getLastAttribute();!o||!q(o).terminal||(e=e.editObjectAtIndex(s,()=>n.removeAttribute(o)))}),new this.constructor(e)}removeBlockAttributesAtRange(t){let{blockList:e}=this;return this.eachBlockAtRange(t,function(n,r,s){n.hasAttributes()&&(e=e.editObjectAtIndex(s,()=>n.copyWithoutAttributes()))}),new this.constructor(e)}expandRangeToLineBreaksAndSplitBlocks(t){let e;t=D(t);let[n,r]=t,s=this.locationFromPosition(n),o=this.locationFromPosition(r),a=this,d=a.getBlockAtIndex(s.index);if(s.offset=d.findLineBreakInDirectionFromPosition("backward",s.offset),s.offset!=null&&(e=a.positionFromLocation(s),a=a.insertBlockBreakAtRange([e,e+1]),o.index+=1,o.offset-=a.getBlockAtIndex(s.index).getLength(),s.index+=1),s.offset=0,o.offset===0&&o.index>s.index)o.index-=1,o.offset=a.getBlockAtIndex(o.index).getBlockBreakPosition();else{let f=a.getBlockAtIndex(o.index);f.text.getStringAtRange([o.offset-1,o.offset])===`
`?o.offset-=1:o.offset=f.findLineBreakInDirectionFromPosition("forward",o.offset),o.offset!==f.getBlockBreakPosition()&&(e=a.positionFromLocation(o),a=a.insertBlockBreakAtRange([e,e+1]))}return n=a.positionFromLocation(s),r=a.positionFromLocation(o),t=D([n,r]),{document:a,range:t}}convertLineBreaksToBlockBreaksInRange(t){t=D(t);let[e]=t,n=this.getStringAtRange(t).slice(0,-1),r=this;return n.replace(/.*?\n/g,function(s){e+=s.length,r=r.insertBlockBreakAtRange([e-1,e])}),{document:r,range:t}}consolidateBlocksAtRange(t){t=D(t);let[e,n]=t,r=this.locationFromPosition(e).index,s=this.locationFromPosition(n).index;return new this.constructor(this.blockList.consolidateFromIndexToIndex(r,s))}getDocumentAtRange(t){t=D(t);let e=this.blockList.getSplittableListInRange(t).toArray();return new this.constructor(e)}getStringAtRange(t){let e,n=t=D(t);return n[n.length-1]!==this.getLength()&&(e=-1),this.getDocumentAtRange(t).toString().slice(0,e)}getBlockAtIndex(t){return this.blockList.getObjectAtIndex(t)}getBlockAtPosition(t){let{index:e}=this.locationFromPosition(t);return this.getBlockAtIndex(e)}getTextAtIndex(t){var e;return(e=this.getBlockAtIndex(t))===null||e===void 0?void 0:e.text}getTextAtPosition(t){let{index:e}=this.locationFromPosition(t);return this.getTextAtIndex(e)}getPieceAtPosition(t){let{index:e,offset:n}=this.locationFromPosition(t);return this.getTextAtIndex(e).getPieceAtPosition(n)}getCharacterAtPosition(t){let{index:e,offset:n}=this.locationFromPosition(t);return this.getTextAtIndex(e).getStringAtRange([n,n+1])}getLength(){return this.blockList.getEndPosition()}getBlocks(){return this.blockList.toArray()}getBlockCount(){return this.blockList.length}getEditCount(){return this.editCount}eachBlock(t){return this.blockList.eachObject(t)}eachBlockAtRange(t,e){let n,r;t=D(t);let[s,o]=t,a=this.locationFromPosition(s),d=this.locationFromPosition(o);if(a.index===d.index)return n=this.getBlockAtIndex(a.index),r=[a.offset,d.offset],e(n,r,a.index);for(let f=a.index;f<=d.index;f++)if(n=this.getBlockAtIndex(f),n){switch(f){case a.index:r=[a.offset,n.text.getLength()];break;case d.index:r=[0,d.offset];break;default:r=[0,n.text.getLength()]}e(n,r,f)}}getCommonAttributesAtRange(t){t=D(t);let[e]=t;if(Ft(t))return this.getCommonAttributesAtPosition(e);{let n=[],r=[];return this.eachBlockAtRange(t,function(s,o){if(o[0]!==o[1])return n.push(s.text.getCommonAttributesAtRange(o)),r.push(Tl(s))}),Z.fromCommonAttributesOfObjects(n).merge(Z.fromCommonAttributesOfObjects(r)).toObject()}}getCommonAttributesAtPosition(t){let e,n,{index:r,offset:s}=this.locationFromPosition(t),o=this.getBlockAtIndex(r);if(!o)return{};let a=Tl(o),d=o.text.getAttributesAtPosition(s),f=o.text.getAttributesAtPosition(s-1),p=Object.keys(R.textAttributes).filter(b=>R.textAttributes[b].inheritable);for(e in f)n=f[e],(n===d[e]||p.includes(e))&&(a[e]=n);return a}getRangeOfCommonAttributeAtPosition(t,e){let{index:n,offset:r}=this.locationFromPosition(e),s=this.getTextAtIndex(n),[o,a]=Array.from(s.getExpandedRangeForAttributeAtOffset(t,r)),d=this.positionFromLocation({index:n,offset:o}),f=this.positionFromLocation({index:n,offset:a});return D([d,f])}getBaseBlockAttributes(){let t=this.getBlockAtIndex(0).getAttributes();for(let e=1;e<this.getBlockCount();e++){let n=this.getBlockAtIndex(e).getAttributes(),r=Math.min(t.length,n.length);t=(()=>{let s=[];for(let o=0;o<r&&n[o]===t[o];o++)s.push(n[o]);return s})()}return t}getAttachmentById(t){for(let e of this.getAttachments())if(e.id===t)return e}getAttachmentPieces(){let t=[];return this.blockList.eachObject(e=>{let{text:n}=e;return t=t.concat(n.getAttachmentPieces())}),t}getAttachments(){return this.getAttachmentPieces().map(t=>t.attachment)}getRangeOfAttachment(t){let e=0,n=this.blockList.toArray();for(let r=0;r<n.length;r++){let{text:s}=n[r],o=s.getRangeOfAttachment(t);if(o)return D([e+o[0],e+o[1]]);e+=s.getLength()}}getLocationRangeOfAttachment(t){let e=this.getRangeOfAttachment(t);return this.locationRangeFromRange(e)}getAttachmentPieceForAttachment(t){for(let e of this.getAttachmentPieces())if(e.attachment===t)return e}findRangesForBlockAttribute(t){let e=0,n=[];return this.getBlocks().forEach(r=>{let s=r.getLength();r.hasAttribute(t)&&n.push([e,e+s]),e+=s}),n}findRangesForTextAttribute(t){let{withValue:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=0,r=[],s=[],o=function(a){return e?a.getAttribute(t)===e:a.hasAttribute(t)};return this.getPieces().forEach(a=>{let d=a.getLength();o(a)&&(r[1]===n?r[1]=n+d:s.push(r=[n,n+d])),n+=d}),s}locationFromPosition(t){let e=this.blockList.findIndexAndOffsetAtPosition(Math.max(0,t));if(e.index!=null)return e;{let n=this.getBlocks();return{index:n.length-1,offset:n[n.length-1].getLength()}}}positionFromLocation(t){return this.blockList.findPositionAtIndexAndOffset(t.index,t.offset)}locationRangeFromPosition(t){return D(this.locationFromPosition(t))}locationRangeFromRange(t){if(t=D(t),!t)return;let[e,n]=Array.from(t),r=this.locationFromPosition(e),s=this.locationFromPosition(n);return D([r,s])}rangeFromLocationRange(t){let e;t=D(t);let n=this.positionFromLocation(t[0]);return Ft(t)||(e=this.positionFromLocation(t[1])),D([n,e])}isEqualTo(t){return this.blockList.isEqualTo(t?.blockList)}getTexts(){return this.getBlocks().map(t=>t.text)}getPieces(){let t=[];return Array.from(this.getTexts()).forEach(e=>{t.push(...Array.from(e.getPieces()||[]))}),t}getObjects(){return this.getBlocks().concat(this.getTexts()).concat(this.getPieces())}toSerializableDocument(){let t=[];return this.blockList.eachObject(e=>t.push(e.copyWithText(e.text.toSerializableText()))),new this.constructor(t)}toString(){return this.blockList.toString()}toJSON(){return this.blockList.toJSON()}toConsole(){return JSON.stringify(this.blockList.toArray()).map(t=>JSON.parse(t.text.toConsole()))}},Tl=function(i){let t={},e=i.getLastAttribute();return e&&(t[e]=!0),t},pp="style href src width height class".split(" "),gp="javascript:".split(" "),vp="script iframe".split(" "),Kn=class extends B{static sanitize(t,e){let n=new this(t,e);return n.sanitize(),n}constructor(t){let{allowedAttributes:e,forbiddenProtocols:n,forbiddenElements:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.allowedAttributes=e||pp,this.forbiddenProtocols=n||gp,this.forbiddenElements=r||vp,this.body=bp(t)}sanitize(){return this.sanitizeElements(),this.normalizeListElementNesting()}getHTML(){return this.body.innerHTML}getBody(){return this.body}sanitizeElements(){let t=Vn(this.body),e=[];for(;t.nextNode();){let n=t.currentNode;switch(n.nodeType){case Node.ELEMENT_NODE:this.elementIsRemovable(n)?e.push(n):this.sanitizeElement(n);break;case Node.COMMENT_NODE:e.push(n);break}}return e.forEach(n=>re(n)),this.body}sanitizeElement(t){return t.hasAttribute("href")&&this.forbiddenProtocols.includes(t.protocol)&&t.removeAttribute("href"),Array.from(t.attributes).forEach(e=>{let{name:n}=e;!this.allowedAttributes.includes(n)&&n.indexOf("data-trix")!==0&&t.removeAttribute(n)}),t}normalizeListElementNesting(){return Array.from(this.body.querySelectorAll("ul,ol")).forEach(t=>{let e=t.previousElementSibling;e&&nt(e)==="li"&&e.appendChild(t)}),this.body}elementIsRemovable(t){if(t?.nodeType===Node.ELEMENT_NODE)return this.elementIsForbidden(t)||this.elementIsntSerializable(t)}elementIsForbidden(t){return this.forbiddenElements.includes(nt(t))}elementIsntSerializable(t){return t.getAttribute("data-trix-serialize")==="false"&&!Me(t)}},bp=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";i=i.replace(/<\/html[^>]*>[^]*$/i,"</html>");let t=document.implementation.createHTMLDocument("");return t.documentElement.innerHTML=i,Array.from(t.head.querySelectorAll("style")).forEach(e=>{t.body.appendChild(e)}),t.body},ws=function(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e="string";return i=zi(i),{string:i,attributes:t,type:e}},yp=function(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{attachment:i,attributes:t,type:"attachment"}},Ep=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{text:[],attributes:i}},Ll=(i,t)=>{try{return JSON.parse(i.getAttribute("data-trix-".concat(t)))}catch{return{}}},Ap=i=>{let t=i.getAttribute("width"),e=i.getAttribute("height"),n={};return t&&(n.width=parseInt(t,10)),e&&(n.height=parseInt(e,10)),n},He=class extends B{static parse(t,e){let n=new this(t,e);return n.parse(),n}constructor(t){let{referenceElement:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.html=t,this.referenceElement=e,this.blocks=[],this.blockElements=[],this.processedElements=[]}getDocument(){return rt.fromJSON(this.blocks)}parse(){try{this.createHiddenContainer();let t=Kn.sanitize(this.html).getHTML();this.containerElement.innerHTML=t;let e=Vn(this.containerElement,{usingFilter:Sp});for(;e.nextNode();)this.processNode(e.currentNode);return this.translateBlockElementMarginsToNewlines()}finally{this.removeHiddenContainer()}}createHiddenContainer(){return this.referenceElement?(this.containerElement=this.referenceElement.cloneNode(!1),this.containerElement.removeAttribute("id"),this.containerElement.setAttribute("data-trix-internal",""),this.containerElement.style.display="none",this.referenceElement.parentNode.insertBefore(this.containerElement,this.referenceElement.nextSibling)):(this.containerElement=T({tagName:"div",style:{display:"none"}}),document.body.appendChild(this.containerElement))}removeHiddenContainer(){return re(this.containerElement)}processNode(t){switch(t.nodeType){case Node.TEXT_NODE:if(!this.isInsignificantTextNode(t))return this.appendBlockForTextNode(t),this.processTextNode(t);break;case Node.ELEMENT_NODE:return this.appendBlockForElement(t),this.processElement(t)}}appendBlockForTextNode(t){let e=t.parentNode;if(e===this.currentBlockElement&&this.isBlockElement(t.previousSibling))return this.appendStringWithAttributes(`
`);if(e===this.containerElement||this.isBlockElement(e)){var n;let r=this.getBlockAttributes(e);Fe(r,(n=this.currentBlock)===null||n===void 0?void 0:n.attributes)||(this.currentBlock=this.appendBlockForAttributesWithElement(r,e),this.currentBlockElement=e)}}appendBlockForElement(t){let e=this.isBlockElement(t),n=Ie(this.currentBlockElement,t);if(e&&!this.isBlockElement(t.firstChild)){if(!this.isInsignificantTextNode(t.firstChild)||!this.isBlockElement(t.firstElementChild)){let r=this.getBlockAttributes(t);if(t.firstChild)if(!(n&&Fe(r,this.currentBlock.attributes)))this.currentBlock=this.appendBlockForAttributesWithElement(r,t),this.currentBlockElement=t;else return this.appendStringWithAttributes(`
`)}}else if(this.currentBlockElement&&!n&&!e){let r=this.findParentBlockElement(t);if(r)return this.appendBlockForElement(r);this.currentBlock=this.appendEmptyBlock(),this.currentBlockElement=null}}findParentBlockElement(t){let{parentElement:e}=t;for(;e&&e!==this.containerElement;){if(this.isBlockElement(e)&&this.blockElements.includes(e))return e;e=e.parentElement}return null}processTextNode(t){let e=t.data;if(!Rl(t.parentNode)){var n;e=ao(e),tc((n=t.previousSibling)===null||n===void 0?void 0:n.textContent)&&(e=Cp(e))}return this.appendStringWithAttributes(e,this.getTextAttributes(t.parentNode))}processElement(t){let e;if(Me(t)){if(e=Ll(t,"attachment"),Object.keys(e).length){let n=this.getTextAttributes(t);this.appendAttachmentWithAttributes(e,n),t.innerHTML=""}return this.processedElements.push(t)}else switch(nt(t)){case"br":return!this.isExtraBR(t)&&!this.isBlockElement(t.nextSibling)&&this.appendStringWithAttributes(`
`,this.getTextAttributes(t)),this.processedElements.push(t);case"img":e={url:t.getAttribute("src"),contentType:"image"};let n=Ap(t);for(let r in n){let s=n[r];e[r]=s}return this.appendAttachmentWithAttributes(e,this.getTextAttributes(t)),this.processedElements.push(t);case"tr":if(t.parentNode.firstChild!==t)return this.appendStringWithAttributes(`
`);break;case"td":if(t.parentNode.firstChild!==t)return this.appendStringWithAttributes(" | ");break}}appendBlockForAttributesWithElement(t,e){this.blockElements.push(e);let n=Ep(t);return this.blocks.push(n),n}appendEmptyBlock(){return this.appendBlockForAttributesWithElement([],null)}appendStringWithAttributes(t,e){return this.appendPiece(ws(t,e))}appendAttachmentWithAttributes(t,e){return this.appendPiece(yp(t,e))}appendPiece(t){return this.blocks.length===0&&this.appendEmptyBlock(),this.blocks[this.blocks.length-1].text.push(t)}appendStringToTextAtIndex(t,e){let{text:n}=this.blocks[e],r=n[n.length-1];if(r?.type==="string")r.string+=t;else return n.push(ws(t))}prependStringToTextAtIndex(t,e){let{text:n}=this.blocks[e],r=n[0];if(r?.type==="string")r.string=t+r.string;else return n.unshift(ws(t))}getTextAttributes(t){let e,n={};for(let r in R.textAttributes){let s=R.textAttributes[r];if(s.tagName&&ne(t,{matchingSelector:s.tagName,untilNode:this.containerElement}))n[r]=!0;else if(s.parser){if(e=s.parser(t),e){let o=!1;for(let a of this.findBlockElementAncestors(t))if(s.parser(a)===e){o=!0;break}o||(n[r]=e)}}else s.styleProperty&&(e=t.style[s.styleProperty],e&&(n[r]=e))}if(Me(t)){let r=Ll(t,"attributes");for(let s in r)e=r[s],n[s]=e}return n}getBlockAttributes(t){let e=[];for(;t&&t!==this.containerElement;){for(let r in R.blockAttributes){let s=R.blockAttributes[r];if(s.parse!==!1&&nt(t)===s.tagName){var n;((n=s.test)!==null&&n!==void 0&&n.call(s,t)||!s.test)&&(e.push(r),s.listAttribute&&e.push(s.listAttribute))}}t=t.parentNode}return e.reverse()}findBlockElementAncestors(t){let e=[];for(;t&&t!==this.containerElement;){let n=nt(t);Ki().includes(n)&&e.push(t),t=t.parentNode}return e}isBlockElement(t){if(t?.nodeType===Node.ELEMENT_NODE&&!Me(t)&&!ne(t,{matchingSelector:"td",untilNode:this.containerElement}))return Ki().includes(nt(t))||window.getComputedStyle(t).display==="block"}isInsignificantTextNode(t){if(t?.nodeType!==Node.TEXT_NODE||!_p(t.data))return;let{parentNode:e,previousSibling:n,nextSibling:r}=t;if(!(wp(e.previousSibling)&&!this.isBlockElement(e.previousSibling))&&!Rl(e))return!n||this.isBlockElement(n)||!r||this.isBlockElement(r)}isExtraBR(t){return nt(t)==="br"&&this.isBlockElement(t.parentNode)&&t.parentNode.lastChild===t}translateBlockElementMarginsToNewlines(){let t=this.getMarginOfDefaultBlockElement();for(let e=0;e<this.blocks.length;e++){let n=this.getMarginOfBlockElementAtIndex(e);n&&(n.top>t.top*2&&this.prependStringToTextAtIndex(`
`,e),n.bottom>t.bottom*2&&this.appendStringToTextAtIndex(`
`,e))}}getMarginOfBlockElementAtIndex(t){let e=this.blockElements[t];if(e&&e.textContent&&!Ki().includes(nt(e))&&!this.processedElements.includes(e))return Dl(e)}getMarginOfDefaultBlockElement(){let t=T(R.blockAttributes.default.tagName);return this.containerElement.appendChild(t),Dl(t)}},Rl=function(i){let{whiteSpace:t}=window.getComputedStyle(i);return["pre","pre-wrap","pre-line"].includes(t)},wp=i=>i&&!tc(i.textContent),Dl=function(i){let t=window.getComputedStyle(i);if(t.display==="block")return{top:parseInt(t.marginTop),bottom:parseInt(t.marginBottom)}},Sp=function(i){return nt(i)==="style"?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},Cp=i=>i.replace(new RegExp("^".concat(oo.source,"+")),""),_p=i=>new RegExp("^".concat(oo.source,"*$")).test(i),tc=i=>/\s$/.test(i),Yn=class{constructor(t){this.composition=t,this.document=this.composition.document;let e=this.composition.getSelectedRange();this.startPosition=e[0],this.endPosition=e[1],this.startLocation=this.document.locationFromPosition(this.startPosition),this.endLocation=this.document.locationFromPosition(this.endPosition),this.block=this.document.getBlockAtIndex(this.endLocation.index),this.breaksOnReturn=this.block.breaksOnReturn(),this.previousCharacter=this.block.text.getStringAtPosition(this.endLocation.offset-1),this.nextCharacter=this.block.text.getStringAtPosition(this.endLocation.offset)}shouldInsertBlockBreak(){return this.block.hasAttributes()&&this.block.isListItem()&&!this.block.isEmpty()?this.startLocation.offset!==0:this.breaksOnReturn&&this.nextCharacter!==`
`}shouldBreakFormattedBlock(){return this.block.hasAttributes()&&!this.block.isListItem()&&(this.breaksOnReturn&&this.nextCharacter===`
`||this.previousCharacter===`
`)}shouldDecreaseListLevel(){return this.block.hasAttributes()&&this.block.isListItem()&&this.block.isEmpty()}shouldPrependListItem(){return this.block.isListItem()&&this.startLocation.offset===0&&!this.block.isEmpty()}shouldRemoveLastBlockAttribute(){return this.block.hasAttributes()&&!this.block.isListItem()&&this.block.isEmpty()}},Ol=" ",Dt=class extends B{constructor(){super(...arguments),this.document=new rt,this.attachments=[],this.currentAttributes={},this.revision=0}setDocument(t){if(!t.isEqualTo(this.document)){var e,n;return this.document=t,this.refreshAttachments(),this.revision++,(e=this.delegate)===null||e===void 0||(n=e.compositionDidChangeDocument)===null||n===void 0?void 0:n.call(e,t)}}getSnapshot(){return{document:this.document,selectedRange:this.getSelectedRange()}}loadSnapshot(t){var e,n,r,s;let{document:o,selectedRange:a}=t;return(e=this.delegate)===null||e===void 0||(n=e.compositionWillLoadSnapshot)===null||n===void 0||n.call(e),this.setDocument(o??new rt),this.setSelection(a??[0,0]),(r=this.delegate)===null||r===void 0||(s=r.compositionDidLoadSnapshot)===null||s===void 0?void 0:s.call(r)}insertText(t){let{updatePosition:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{updatePosition:!0},n=this.getSelectedRange();this.setDocument(this.document.insertTextAtRange(t,n));let r=n[0],s=r+t.getLength();return e&&this.setSelection(s),this.notifyDelegateOfInsertionAtRange([r,s])}insertBlock(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new wt,e=new rt([t]);return this.insertDocument(e)}insertDocument(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new rt,e=this.getSelectedRange();this.setDocument(this.document.insertDocumentAtRange(t,e));let n=e[0],r=n+t.getLength();return this.setSelection(r),this.notifyDelegateOfInsertionAtRange([n,r])}insertString(t,e){let n=this.getCurrentTextAttributes(),r=ut.textForStringWithAttributes(t,n);return this.insertText(r,e)}insertBlockBreak(){let t=this.getSelectedRange();this.setDocument(this.document.insertBlockBreakAtRange(t));let e=t[0],n=e+1;return this.setSelection(n),this.notifyDelegateOfInsertionAtRange([e,n])}insertLineBreak(){let t=new Yn(this);if(t.shouldDecreaseListLevel())return this.decreaseListLevel(),this.setSelection(t.startPosition);if(t.shouldPrependListItem()){let e=new rt([t.block.copyWithoutText()]);return this.insertDocument(e)}else return t.shouldInsertBlockBreak()?this.insertBlockBreak():t.shouldRemoveLastBlockAttribute()?this.removeLastBlockAttribute():t.shouldBreakFormattedBlock()?this.breakFormattedBlock(t):this.insertString(`
`)}insertHTML(t){let e=He.parse(t).getDocument(),n=this.getSelectedRange();this.setDocument(this.document.mergeDocumentAtRange(e,n));let r=n[0],s=r+e.getLength()-1;return this.setSelection(s),this.notifyDelegateOfInsertionAtRange([r,s])}replaceHTML(t){let e=He.parse(t).getDocument().copyUsingObjectsFromDocument(this.document),n=this.getLocationRange({strict:!1}),r=this.document.rangeFromLocationRange(n);return this.setDocument(e),this.setSelection(r)}insertFile(t){return this.insertFiles([t])}insertFiles(t){let e=[];return Array.from(t).forEach(n=>{var r;if((r=this.delegate)!==null&&r!==void 0&&r.compositionShouldAcceptFile(n)){let s=se.attachmentForFile(n);e.push(s)}}),this.insertAttachments(e)}insertAttachment(t){return this.insertAttachments([t])}insertAttachments(t){let e=new ut;return Array.from(t).forEach(n=>{var r;let s=n.getType(),o=(r=R.attachments[s])===null||r===void 0?void 0:r.presentation,a=this.getCurrentTextAttributes();o&&(a.presentation=o);let d=ut.textForAttachmentWithAttributes(n,a);e=e.appendText(d)}),this.insertText(e)}shouldManageDeletingInDirection(t){let e=this.getLocationRange();if(Ft(e)){if(t==="backward"&&e[0].offset===0||this.shouldManageMovingCursorInDirection(t))return!0}else if(e[0].index!==e[1].index)return!0;return!1}deleteInDirection(t){let{length:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n,r,s,o=this.getLocationRange(),a=this.getSelectedRange(),d=Ft(a);if(d?r=t==="backward"&&o[0].offset===0:s=o[0].index!==o[1].index,r&&this.canDecreaseBlockAttributeLevel()){let f=this.getBlock();if(f.isListItem()?this.decreaseListLevel():this.decreaseBlockAttributeLevel(),this.setSelection(a[0]),f.isEmpty())return!1}if(d&&(a=this.getExpandedRangeInDirection(t,{length:e}),t==="backward"&&(n=this.getAttachmentAtRange(a))),n)return this.editAttachment(n),!1;if(this.setDocument(this.document.removeTextAtRange(a)),this.setSelection(a[0]),r||s)return!1}moveTextFromRange(t){let[e]=Array.from(this.getSelectedRange());return this.setDocument(this.document.moveTextFromRangeToPosition(t,e)),this.setSelection(e)}removeAttachment(t){let e=this.document.getRangeOfAttachment(t);if(e)return this.stopEditingAttachment(),this.setDocument(this.document.removeTextAtRange(e)),this.setSelection(e[0])}removeLastBlockAttribute(){let[t,e]=Array.from(this.getSelectedRange()),n=this.document.getBlockAtPosition(e);return this.removeCurrentAttribute(n.getLastAttribute()),this.setSelection(t)}insertPlaceholder(){return this.placeholderPosition=this.getPosition(),this.insertString(Ol)}selectPlaceholder(){if(this.placeholderPosition!=null)return this.setSelectedRange([this.placeholderPosition,this.placeholderPosition+Ol.length]),this.getSelectedRange()}forgetPlaceholder(){this.placeholderPosition=null}hasCurrentAttribute(t){let e=this.currentAttributes[t];return e!=null&&e!==!1}toggleCurrentAttribute(t){let e=!this.currentAttributes[t];return e?this.setCurrentAttribute(t,e):this.removeCurrentAttribute(t)}canSetCurrentAttribute(t){return q(t)?this.canSetCurrentBlockAttribute(t):this.canSetCurrentTextAttribute(t)}canSetCurrentTextAttribute(t){let e=this.getSelectedDocument();if(!!e){for(let n of Array.from(e.getAttachments()))if(!n.hasContent())return!1;return!0}}canSetCurrentBlockAttribute(t){let e=this.getBlock();if(!!e)return!e.isTerminalBlock()}setCurrentAttribute(t,e){return q(t)?this.setBlockAttribute(t,e):(this.setTextAttribute(t,e),this.currentAttributes[t]=e,this.notifyDelegateOfCurrentAttributesChange())}setTextAttribute(t,e){let n=this.getSelectedRange();if(!n)return;let[r,s]=Array.from(n);if(r===s){if(t==="href"){let o=ut.textForStringWithAttributes(e,{href:e});return this.insertText(o)}}else return this.setDocument(this.document.addAttributeAtRange(t,e,n))}setBlockAttribute(t,e){let n=this.getSelectedRange();if(this.canSetCurrentAttribute(t))return this.setDocument(this.document.applyBlockAttributeAtRange(t,e,n)),this.setSelection(n)}removeCurrentAttribute(t){return q(t)?(this.removeBlockAttribute(t),this.updateCurrentAttributes()):(this.removeTextAttribute(t),delete this.currentAttributes[t],this.notifyDelegateOfCurrentAttributesChange())}removeTextAttribute(t){let e=this.getSelectedRange();if(!!e)return this.setDocument(this.document.removeAttributeAtRange(t,e))}removeBlockAttribute(t){let e=this.getSelectedRange();if(!!e)return this.setDocument(this.document.removeAttributeAtRange(t,e))}canDecreaseNestingLevel(){var t;return((t=this.getBlock())===null||t===void 0?void 0:t.getNestingLevel())>0}canIncreaseNestingLevel(){var t;let e=this.getBlock();if(!!e)if((t=q(e.getLastNestableAttribute()))!==null&&t!==void 0&&t.listAttribute){let n=this.getPreviousBlock();if(n)return Um(n.getListItemAttributes(),e.getListItemAttributes())}else return e.getNestingLevel()>0}decreaseNestingLevel(){let t=this.getBlock();if(!!t)return this.setDocument(this.document.replaceBlock(t,t.decreaseNestingLevel()))}increaseNestingLevel(){let t=this.getBlock();if(!!t)return this.setDocument(this.document.replaceBlock(t,t.increaseNestingLevel()))}canDecreaseBlockAttributeLevel(){var t;return((t=this.getBlock())===null||t===void 0?void 0:t.getAttributeLevel())>0}decreaseBlockAttributeLevel(){var t;let e=(t=this.getBlock())===null||t===void 0?void 0:t.getLastAttribute();if(e)return this.removeCurrentAttribute(e)}decreaseListLevel(){let[t]=Array.from(this.getSelectedRange()),{index:e}=this.document.locationFromPosition(t),n=e,r=this.getBlock().getAttributeLevel(),s=this.document.getBlockAtIndex(n+1);for(;s&&!(!s.isListItem()||s.getAttributeLevel()<=r);)n++,s=this.document.getBlockAtIndex(n+1);t=this.document.positionFromLocation({index:e,offset:0});let o=this.document.positionFromLocation({index:n,offset:0});return this.setDocument(this.document.removeLastListAttributeAtRange([t,o]))}updateCurrentAttributes(){let t=this.getSelectedRange({ignoreLock:!0});if(t){let e=this.document.getCommonAttributesAtRange(t);if(Array.from(Ds()).forEach(n=>{e[n]||this.canSetCurrentAttribute(n)||(e[n]=!1)}),!en(e,this.currentAttributes))return this.currentAttributes=e,this.notifyDelegateOfCurrentAttributesChange()}}getCurrentAttributes(){return Ul.call({},this.currentAttributes)}getCurrentTextAttributes(){let t={};for(let e in this.currentAttributes){let n=this.currentAttributes[e];n!==!1&&Os(e)&&(t[e]=n)}return t}freezeSelection(){return this.setCurrentAttribute("frozen",!0)}thawSelection(){return this.removeCurrentAttribute("frozen")}hasFrozenSelection(){return this.hasCurrentAttribute("frozen")}setSelection(t){var e;let n=this.document.locationRangeFromRange(t);return(e=this.delegate)===null||e===void 0?void 0:e.compositionDidRequestChangingSelectionToLocationRange(n)}getSelectedRange(){let t=this.getLocationRange();if(t)return this.document.rangeFromLocationRange(t)}setSelectedRange(t){let e=this.document.locationRangeFromRange(t);return this.getSelectionManager().setLocationRange(e)}getPosition(){let t=this.getLocationRange();if(t)return this.document.positionFromLocation(t[0])}getLocationRange(t){return this.targetLocationRange?this.targetLocationRange:this.getSelectionManager().getLocationRange(t)||D({index:0,offset:0})}withTargetLocationRange(t,e){let n;this.targetLocationRange=t;try{n=e()}finally{this.targetLocationRange=null}return n}withTargetRange(t,e){let n=this.document.locationRangeFromRange(t);return this.withTargetLocationRange(n,e)}withTargetDOMRange(t,e){let n=this.createLocationRangeFromDOMRange(t,{strict:!1});return this.withTargetLocationRange(n,e)}getExpandedRangeInDirection(t){let{length:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},[n,r]=Array.from(this.getSelectedRange());return t==="backward"?e?n-=e:n=this.translateUTF16PositionFromOffset(n,-1):e?r+=e:r=this.translateUTF16PositionFromOffset(r,1),D([n,r])}shouldManageMovingCursorInDirection(t){if(this.editingAttachment)return!0;let e=this.getExpandedRangeInDirection(t);return this.getAttachmentAtRange(e)!=null}moveCursorInDirection(t){let e,n;if(this.editingAttachment)n=this.document.getRangeOfAttachment(this.editingAttachment);else{let r=this.getSelectedRange();n=this.getExpandedRangeInDirection(t),e=!tr(r,n)}if(t==="backward"?this.setSelectedRange(n[0]):this.setSelectedRange(n[1]),e){let r=this.getAttachmentAtRange(n);if(r)return this.editAttachment(r)}}expandSelectionInDirection(t){let{length:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=this.getExpandedRangeInDirection(t,{length:e});return this.setSelectedRange(n)}expandSelectionForEditing(){if(this.hasCurrentAttribute("href"))return this.expandSelectionAroundCommonAttribute("href")}expandSelectionAroundCommonAttribute(t){let e=this.getPosition(),n=this.document.getRangeOfCommonAttributeAtPosition(t,e);return this.setSelectedRange(n)}selectionContainsAttachments(){var t;return((t=this.getSelectedAttachments())===null||t===void 0?void 0:t.length)>0}selectionIsInCursorTarget(){return this.editingAttachment||this.positionIsCursorTarget(this.getPosition())}positionIsCursorTarget(t){let e=this.document.locationFromPosition(t);if(e)return this.locationIsCursorTarget(e)}positionIsBlockBreak(t){var e;return(e=this.document.getPieceAtPosition(t))===null||e===void 0?void 0:e.isBlockBreak()}getSelectedDocument(){let t=this.getSelectedRange();if(t)return this.document.getDocumentAtRange(t)}getSelectedAttachments(){var t;return(t=this.getSelectedDocument())===null||t===void 0?void 0:t.getAttachments()}getAttachments(){return this.attachments.slice(0)}refreshAttachments(){let t=this.document.getAttachments(),{added:e,removed:n}=$m(this.attachments,t);return this.attachments=t,Array.from(n).forEach(r=>{var s,o;r.delegate=null,(s=this.delegate)===null||s===void 0||(o=s.compositionDidRemoveAttachment)===null||o===void 0||o.call(s,r)}),(()=>{let r=[];return Array.from(e).forEach(s=>{var o,a;s.delegate=this,r.push((o=this.delegate)===null||o===void 0||(a=o.compositionDidAddAttachment)===null||a===void 0?void 0:a.call(o,s))}),r})()}attachmentDidChangeAttributes(t){var e,n;return this.revision++,(e=this.delegate)===null||e===void 0||(n=e.compositionDidEditAttachment)===null||n===void 0?void 0:n.call(e,t)}attachmentDidChangePreviewURL(t){var e,n;return this.revision++,(e=this.delegate)===null||e===void 0||(n=e.compositionDidChangeAttachmentPreviewURL)===null||n===void 0?void 0:n.call(e,t)}editAttachment(t,e){var n,r;if(t!==this.editingAttachment)return this.stopEditingAttachment(),this.editingAttachment=t,(n=this.delegate)===null||n===void 0||(r=n.compositionDidStartEditingAttachment)===null||r===void 0?void 0:r.call(n,this.editingAttachment,e)}stopEditingAttachment(){var t,e;!this.editingAttachment||((t=this.delegate)===null||t===void 0||(e=t.compositionDidStopEditingAttachment)===null||e===void 0||e.call(t,this.editingAttachment),this.editingAttachment=null)}updateAttributesForAttachment(t,e){return this.setDocument(this.document.updateAttributesForAttachment(t,e))}removeAttributeForAttachment(t,e){return this.setDocument(this.document.removeAttributeForAttachment(t,e))}breakFormattedBlock(t){let{document:e}=t,{block:n}=t,r=t.startPosition,s=[r-1,r];n.getBlockBreakPosition()===t.startLocation.offset?(n.breaksOnReturn()&&t.nextCharacter===`
`?r+=1:e=e.removeTextAtRange(s),s=[r,r]):t.nextCharacter===`
`?t.previousCharacter===`
`?s=[r-1,r+1]:(s=[r,r+1],r+=1):t.startLocation.offset-1!==0&&(r+=1);let o=new rt([n.removeLastAttribute().copyWithoutText()]);return this.setDocument(e.insertDocumentAtRange(o,s)),this.setSelection(r)}getPreviousBlock(){let t=this.getLocationRange();if(t){let{index:e}=t[0];if(e>0)return this.document.getBlockAtIndex(e-1)}}getBlock(){let t=this.getLocationRange();if(t)return this.document.getBlockAtIndex(t[0].index)}getAttachmentAtRange(t){let e=this.document.getDocumentAtRange(t);if(e.toString()==="".concat(Vl,`
`))return e.getAttachments()[0]}notifyDelegateOfCurrentAttributesChange(){var t,e;return(t=this.delegate)===null||t===void 0||(e=t.compositionDidChangeCurrentAttributes)===null||e===void 0?void 0:e.call(t,this.currentAttributes)}notifyDelegateOfInsertionAtRange(t){var e,n;return(e=this.delegate)===null||e===void 0||(n=e.compositionDidPerformInsertionAtRange)===null||n===void 0?void 0:n.call(e,t)}translateUTF16PositionFromOffset(t,e){let n=this.document.toUTF16String(),r=n.offsetFromUCS2Offset(t);return n.offsetToUCS2Offset(r+e)}};Dt.proxyMethod("getSelectionManager().getPointRange");Dt.proxyMethod("getSelectionManager().setLocationRangeFromPointRange");Dt.proxyMethod("getSelectionManager().createLocationRangeFromDOMRange");Dt.proxyMethod("getSelectionManager().locationIsCursorTarget");Dt.proxyMethod("getSelectionManager().selectionIsExpanded");Dt.proxyMethod("delegate?.getSelectionManager");var Xi=class extends B{constructor(t){super(...arguments),this.composition=t,this.undoEntries=[],this.redoEntries=[]}recordUndoEntry(t){let{context:e,consolidatable:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.undoEntries.slice(-1)[0];if(!n||!xp(r,t,e)){let s=this.createEntry({description:t,context:e});this.undoEntries.push(s),this.redoEntries=[]}}undo(){let t=this.undoEntries.pop();if(t){let e=this.createEntry(t);return this.redoEntries.push(e),this.composition.loadSnapshot(t.snapshot)}}redo(){let t=this.redoEntries.pop();if(t){let e=this.createEntry(t);return this.undoEntries.push(e),this.composition.loadSnapshot(t.snapshot)}}canUndo(){return this.undoEntries.length>0}canRedo(){return this.redoEntries.length>0}createEntry(){let{description:t,context:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{description:t?.toString(),context:JSON.stringify(e),snapshot:this.composition.getSnapshot()}}},xp=(i,t,e)=>i?.description===t?.toString()&&i?.context===JSON.stringify(e),Tp=function(i){let t=new Ms(i);return t.perform(),t.getSnapshot()},Ss="attachmentGallery",Lp="presentation",Rp="gallery",Ms=class{constructor(t){this.document=t.document,this.selectedRange=t.selectedRange}perform(){return this.removeBlockAttribute(),this.applyBlockAttribute()}getSnapshot(){return{document:this.document,selectedRange:this.selectedRange}}removeBlockAttribute(){return this.findRangesOfBlocks().map(t=>this.document=this.document.removeAttributeAtRange(Ss,t))}applyBlockAttribute(){let t=0;this.findRangesOfPieces().forEach(e=>{e[1]-e[0]>1&&(e[0]+=t,e[1]+=t,this.document.getCharacterAtPosition(e[1])!==`
`&&(this.document=this.document.insertBlockBreakAtRange(e[1]),e[1]<this.selectedRange[1]&&this.moveSelectedRangeForward(),e[1]++,t++),e[0]!==0&&this.document.getCharacterAtPosition(e[0]-1)!==`
`&&(this.document=this.document.insertBlockBreakAtRange(e[0]),e[0]<this.selectedRange[0]&&this.moveSelectedRangeForward(),e[0]++,t++),this.document=this.document.applyBlockAttributeAtRange(Ss,!0,e))})}findRangesOfBlocks(){return this.document.findRangesForBlockAttribute(Ss)}findRangesOfPieces(){return this.document.findRangesForTextAttribute(Lp,{withValue:Rp})}moveSelectedRangeForward(){this.selectedRange[0]+=1,this.selectedRange[1]+=1}},Dp=[Tp],Gn=class{constructor(t,e,n){this.insertFiles=this.insertFiles.bind(this),this.composition=t,this.selectionManager=e,this.element=n,this.undoManager=new Xi(this.composition),this.filters=Dp.slice(0)}loadDocument(t){return this.loadSnapshot({document:t,selectedRange:[0,0]})}loadHTML(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=He.parse(t,{referenceElement:this.element}).getDocument();return this.loadDocument(e)}loadJSON(t){let{document:e,selectedRange:n}=t;return e=rt.fromJSON(e),this.loadSnapshot({document:e,selectedRange:n})}loadSnapshot(t){return this.undoManager=new Xi(this.composition),this.composition.loadSnapshot(t)}getDocument(){return this.composition.document}getSelectedDocument(){return this.composition.getSelectedDocument()}getSnapshot(){return this.composition.getSnapshot()}toJSON(){return this.getSnapshot()}deleteInDirection(t){return this.composition.deleteInDirection(t)}insertAttachment(t){return this.composition.insertAttachment(t)}insertAttachments(t){return this.composition.insertAttachments(t)}insertDocument(t){return this.composition.insertDocument(t)}insertFile(t){return this.composition.insertFile(t)}insertFiles(t){return this.composition.insertFiles(t)}insertHTML(t){return this.composition.insertHTML(t)}insertString(t){return this.composition.insertString(t)}insertText(t){return this.composition.insertText(t)}insertLineBreak(){return this.composition.insertLineBreak()}getSelectedRange(){return this.composition.getSelectedRange()}getPosition(){return this.composition.getPosition()}getClientRectAtPosition(t){let e=this.getDocument().locationRangeFromRange([t,t+1]);return this.selectionManager.getClientRectAtLocationRange(e)}expandSelectionInDirection(t){return this.composition.expandSelectionInDirection(t)}moveCursorInDirection(t){return this.composition.moveCursorInDirection(t)}setSelectedRange(t){return this.composition.setSelectedRange(t)}activateAttribute(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return this.composition.setCurrentAttribute(t,e)}attributeIsActive(t){return this.composition.hasCurrentAttribute(t)}canActivateAttribute(t){return this.composition.canSetCurrentAttribute(t)}deactivateAttribute(t){return this.composition.removeCurrentAttribute(t)}canDecreaseNestingLevel(){return this.composition.canDecreaseNestingLevel()}canIncreaseNestingLevel(){return this.composition.canIncreaseNestingLevel()}decreaseNestingLevel(){if(this.canDecreaseNestingLevel())return this.composition.decreaseNestingLevel()}increaseNestingLevel(){if(this.canIncreaseNestingLevel())return this.composition.increaseNestingLevel()}canRedo(){return this.undoManager.canRedo()}canUndo(){return this.undoManager.canUndo()}recordUndoEntry(t){let{context:e,consolidatable:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.undoManager.recordUndoEntry(t,{context:e,consolidatable:n})}redo(){if(this.canRedo())return this.undoManager.redo()}undo(){if(this.canUndo())return this.undoManager.undo()}},Jn=class{constructor(t){this.element=t}findLocationFromContainerAndOffset(t,e){let{strict:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{strict:!0},r=0,s=!1,o={index:0,offset:0},a=this.findAttachmentElementParentForNode(t);a&&(t=a.parentNode,e=fs(a));let d=Vn(this.element,{usingFilter:ec});for(;d.nextNode();){let f=d.currentNode;if(f===t&&Yi(t)){li(f)||(o.offset+=e);break}else{if(f.parentNode===t){if(r++===e)break}else if(!Ie(t,f)&&r>0)break;gl(f,{strict:n})?(s&&o.index++,o.offset=0,s=!0):o.offset+=Cs(f)}}return o}findContainerAndOffsetFromLocation(t){let e,n;if(t.index===0&&t.offset===0){for(e=this.element,n=0;e.firstChild;)if(e=e.firstChild,ms(e)){n=1;break}return[e,n]}let[r,s]=this.findNodeAndOffsetFromLocation(t);if(!!r){if(Yi(r))Cs(r)===0?(e=r.parentNode.parentNode,n=fs(r.parentNode),li(r,{name:"right"})&&n++):(e=r,n=t.offset-s);else{if(e=r.parentNode,!gl(r.previousSibling)&&!ms(e))for(;r===e.lastChild&&(r=e,e=e.parentNode,!ms(e)););n=fs(r),t.offset!==0&&n++}return[e,n]}}findNodeAndOffsetFromLocation(t){let e,n,r=0;for(let s of this.getSignificantNodesForIndex(t.index)){let o=Cs(s);if(t.offset<=r+o)if(Yi(s)){if(e=s,n=r,t.offset===n&&li(e))break}else e||(e=s,n=r);if(r+=o,r>t.offset)break}return[e,n]}findAttachmentElementParentForNode(t){for(;t&&t!==this.element;){if(Me(t))return t;t=t.parentNode}}getSignificantNodesForIndex(t){let e=[],n=Vn(this.element,{usingFilter:Op}),r=!1;for(;n.nextNode();){let o=n.currentNode;if(ai(o)){var s;if(s!=null?s++:s=0,s===t)r=!0;else if(r)break}else r&&e.push(o)}return e}},Cs=function(i){return i.nodeType===Node.TEXT_NODE?li(i)?0:i.textContent.length:nt(i)==="br"||Me(i)?1:0},Op=function(i){return kp(i)===NodeFilter.FILTER_ACCEPT?ec(i):NodeFilter.FILTER_REJECT},kp=function(i){return zl(i)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},ec=function(i){return Me(i.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},Xn=class{createDOMRangeFromPoint(t){let{x:e,y:n}=t,r;if(document.caretPositionFromPoint){let{offsetNode:s,offset:o}=document.caretPositionFromPoint(e,n);return r=document.createRange(),r.setStart(s,o),r}else{if(document.caretRangeFromPoint)return document.caretRangeFromPoint(e,n);if(document.body.createTextRange){let s=ci();try{let o=document.body.createTextRange();o.moveToPoint(e,n),o.select()}catch{}return r=ci(),Ql(s),r}}}getClientRectsForDOMRange(t){let e=Array.from(t.getClientRects()),n=e[0],r=e[e.length-1];return[n,r]}},jt=class extends B{constructor(t){super(...arguments),this.didMouseDown=this.didMouseDown.bind(this),this.selectionDidChange=this.selectionDidChange.bind(this),this.element=t,this.locationMapper=new Jn(this.element),this.pointMapper=new Xn,this.lockCount=0,I("mousedown",{onElement:this.element,withCallback:this.didMouseDown})}getLocationRange(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.strict===!1?this.createLocationRangeFromDOMRange(ci()):t.ignoreLock?this.currentLocationRange:this.lockedLocationRange?this.lockedLocationRange:this.currentLocationRange}setLocationRange(t){if(this.lockedLocationRange)return;t=D(t);let e=this.createDOMRangeFromLocationRange(t);e&&(Ql(e),this.updateCurrentLocationRange(t))}setLocationRangeFromPointRange(t){t=D(t);let e=this.getLocationAtPoint(t[0]),n=this.getLocationAtPoint(t[1]);this.setLocationRange([e,n])}getClientRectAtLocationRange(t){let e=this.createDOMRangeFromLocationRange(t);if(e)return this.getClientRectsForDOMRange(e)[1]}locationIsCursorTarget(t){let e=Array.from(this.findNodeAndOffsetFromLocation(t))[0];return li(e)}lock(){this.lockCount++===0&&(this.updateCurrentLocationRange(),this.lockedLocationRange=this.getLocationRange())}unlock(){if(--this.lockCount===0){let{lockedLocationRange:t}=this;if(this.lockedLocationRange=null,t!=null)return this.setLocationRange(t)}}clearSelection(){var t;return(t=Xl())===null||t===void 0?void 0:t.removeAllRanges()}selectionIsCollapsed(){var t;return((t=ci())===null||t===void 0?void 0:t.collapsed)===!0}selectionIsExpanded(){return!this.selectionIsCollapsed()}createLocationRangeFromDOMRange(t,e){if(t==null||!this.domRangeWithinElement(t))return;let n=this.findLocationFromContainerAndOffset(t.startContainer,t.startOffset,e);if(!n)return;let r=t.collapsed?void 0:this.findLocationFromContainerAndOffset(t.endContainer,t.endOffset,e);return D([n,r])}didMouseDown(){return this.pauseTemporarily()}pauseTemporarily(){let t;this.paused=!0;let e=()=>{if(this.paused=!1,clearTimeout(n),Array.from(t).forEach(r=>{r.destroy()}),Ie(document,this.element))return this.selectionDidChange()},n=setTimeout(e,200);t=["mousemove","keydown"].map(r=>I(r,{onElement:document,withCallback:e}))}selectionDidChange(){if(!this.paused&&!no(this.element))return this.updateCurrentLocationRange()}updateCurrentLocationRange(t){if((t??(t=this.createLocationRangeFromDOMRange(ci())))&&!tr(t,this.currentLocationRange)){var e,n;return this.currentLocationRange=t,(e=this.delegate)===null||e===void 0||(n=e.locationRangeDidChange)===null||n===void 0?void 0:n.call(e,this.currentLocationRange.slice(0))}}createDOMRangeFromLocationRange(t){let e=this.findContainerAndOffsetFromLocation(t[0]),n=Ft(t)?e:this.findContainerAndOffsetFromLocation(t[1])||e;if(e!=null&&n!=null){let r=document.createRange();return r.setStart(...Array.from(e||[])),r.setEnd(...Array.from(n||[])),r}}getLocationAtPoint(t){let e=this.createDOMRangeFromPoint(t);if(e){var n;return(n=this.createLocationRangeFromDOMRange(e))===null||n===void 0?void 0:n[0]}}domRangeWithinElement(t){return t.collapsed?Ie(this.element,t.startContainer):Ie(this.element,t.startContainer)&&Ie(this.element,t.endContainer)}};jt.proxyMethod("locationMapper.findLocationFromContainerAndOffset");jt.proxyMethod("locationMapper.findContainerAndOffsetFromLocation");jt.proxyMethod("locationMapper.findNodeAndOffsetFromLocation");jt.proxyMethod("pointMapper.createDOMRangeFromPoint");jt.proxyMethod("pointMapper.getClientRectsForDOMRange");var Pp={Attachment:se,AttachmentManager:zn,AttachmentPiece:oe,Block:wt,Composition:Dt,Cocument:rt,Editor:Gn,HTMLParser:He,HTMLSanitizer:Kn,LineBreakInsertion:Yn,LocationMapper:Jn,ManagedAttachment:N,Piece:Ht,PointMapper:Xn,SelectionManager:jt,SplittableList:hi,StringPiece:Ji,Text:ut,UndoManager:Xi},ic={VERSION:wm,config:R};Object.assign(ic,Pp);window.Trix=ic;var Qi=class{static groupObjects(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],{depth:e,asTree:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r;n&&e==null&&(e=0);let s=[];return Array.from(t).forEach(o=>{var a;if(r){var d,f,p;if((d=o.canBeGrouped)!==null&&d!==void 0&&d.call(o,e)&&(f=(p=r[r.length-1]).canBeGroupedWith)!==null&&f!==void 0&&f.call(p,o,e)){r.push(o);return}else s.push(new this(r,{depth:e,asTree:n})),r=null}(a=o.canBeGrouped)!==null&&a!==void 0&&a.call(o,e)?r=[o]:s.push(o)}),r&&s.push(new this(r,{depth:e,asTree:n})),s}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],{depth:e,asTree:n}=arguments.length>1?arguments[1]:void 0;this.objects=t,n&&(this.depth=e,this.objects=this.constructor.groupObjects(this.objects,{asTree:n,depth:this.depth+1}))}getObjects(){return this.objects}getDepth(){return this.depth}getCacheKey(){let t=["objectGroup"];return Array.from(this.getObjects()).forEach(e=>{t.push(e.getCacheKey())}),t.join("/")}},Bs=class{constructor(t){this.reset(t)}add(t){let e=kl(t);this.elements[e]=t}remove(t){let e=kl(t),n=this.elements[e];if(n)return delete this.elements[e],n}reset(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return this.elements={},Array.from(t).forEach(e=>{this.add(e)}),t}},kl=i=>i.dataset.trixStoreKey,ae=class extends B{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.object=t,this.options=e,this.childViews=[],this.rootView=this}getNodes(){return this.nodes||(this.nodes=this.createNodes()),this.nodes.map(t=>t.cloneNode(!0))}invalidate(){var t;return this.nodes=null,this.childViews=[],(t=this.parentView)===null||t===void 0?void 0:t.invalidate()}invalidateViewForObject(t){var e;return(e=this.findViewForObject(t))===null||e===void 0?void 0:e.invalidate()}findOrCreateCachedChildView(t,e,n){let r=this.getCachedViewForObject(e);return r?this.recordChildView(r):(r=this.createChildView(...arguments),this.cacheViewForObject(r,e)),r}createChildView(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};e instanceof Qi&&(n.viewClass=t,t=Fs);let r=new t(e,n);return this.recordChildView(r)}recordChildView(t){return t.parentView=this,t.rootView=this.rootView,this.childViews.push(t),t}getAllChildViews(){let t=[];return this.childViews.forEach(e=>{t.push(e),t=t.concat(e.getAllChildViews())}),t}findElement(){return this.findElementForObject(this.object)}findElementForObject(t){let e=t?.id;if(e)return this.rootView.element.querySelector("[data-trix-id='".concat(e,"']"))}findViewForObject(t){for(let e of this.getAllChildViews())if(e.object===t)return e}getViewCache(){if(this.rootView===this){if(this.isViewCachingEnabled())return this.viewCache||(this.viewCache={}),this.viewCache}else return this.rootView.getViewCache()}isViewCachingEnabled(){return this.shouldCacheViews!==!1}enableViewCaching(){this.shouldCacheViews=!0}disableViewCaching(){this.shouldCacheViews=!1}getCachedViewForObject(t){var e;return(e=this.getViewCache())===null||e===void 0?void 0:e[t.getCacheKey()]}cacheViewForObject(t,e){let n=this.getViewCache();n&&(n[e.getCacheKey()]=t)}garbageCollectCachedViews(){let t=this.getViewCache();if(t){let n=this.getAllChildViews().concat(this).map(r=>r.object.getCacheKey());for(let r in t)n.includes(r)||delete t[r]}}},Fs=class extends ae{constructor(){super(...arguments),this.objectGroup=this.object,this.viewClass=this.options.viewClass,delete this.options.viewClass}getChildViews(){return this.childViews.length||Array.from(this.objectGroup.getObjects()).forEach(t=>{this.findOrCreateCachedChildView(this.viewClass,t,this.options)}),this.childViews}createNodes(){let t=this.createContainerElement();return this.getChildViews().forEach(e=>{Array.from(e.getNodes()).forEach(n=>{t.appendChild(n)})}),[t]}createContainerElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.objectGroup.getDepth();return this.getChildViews()[0].createContainerElement(t)}},{css:ie}=R,Qn=class extends ae{constructor(){super(...arguments),this.attachment=this.object,this.attachment.uploadProgressDelegate=this,this.attachmentPiece=this.options.piece}createContentNodes(){return[]}createNodes(){let t,e=t=T({tagName:"figure",className:this.getClassName(),data:this.getData(),editable:!1}),n=this.getHref();return n&&(t=T({tagName:"a",editable:!1,attributes:{href:n,tabindex:-1}}),e.appendChild(t)),this.attachment.hasContent()?t.innerHTML=this.attachment.getContent():this.createContentNodes().forEach(r=>{t.appendChild(r)}),t.appendChild(this.createCaptionElement()),this.attachment.isPending()&&(this.progressElement=T({tagName:"progress",attributes:{class:ie.attachmentProgress,value:this.attachment.getUploadProgress(),max:100},data:{trixMutable:!0,trixStoreKey:["progressElement",this.attachment.id].join("/")}}),e.appendChild(this.progressElement)),[Pl("left"),e,Pl("right")]}createCaptionElement(){let t=T({tagName:"figcaption",className:ie.attachmentCaption}),e=this.attachmentPiece.getCaption();if(e)t.classList.add("".concat(ie.attachmentCaption,"--edited")),t.textContent=e;else{let n,r,s=this.getCaptionConfig();if(s.name&&(n=this.attachment.getFilename()),s.size&&(r=this.attachment.getFormattedFilesize()),n){let o=T({tagName:"span",className:ie.attachmentName,textContent:n});t.appendChild(o)}if(r){n&&t.appendChild(document.createTextNode(" "));let o=T({tagName:"span",className:ie.attachmentSize,textContent:r});t.appendChild(o)}}return t}getClassName(){let t=[ie.attachment,"".concat(ie.attachment,"--").concat(this.attachment.getType())],e=this.attachment.getExtension();return e&&t.push("".concat(ie.attachment,"--").concat(e)),t.join(" ")}getData(){let t={trixAttachment:JSON.stringify(this.attachment),trixContentType:this.attachment.getContentType(),trixId:this.attachment.id},{attributes:e}=this.attachmentPiece;return e.isEmpty()||(t.trixAttributes=JSON.stringify(e)),this.attachment.isPending()&&(t.trixSerialize=!1),t}getHref(){if(!Ip(this.attachment.getContent(),"a"))return this.attachment.getHref()}getCaptionConfig(){var t;let e=this.attachment.getType(),n=Jl((t=R.attachments[e])===null||t===void 0?void 0:t.caption);return e==="file"&&(n.name=!0),n}findProgressElement(){var t;return(t=this.findElement())===null||t===void 0?void 0:t.querySelector("progress")}attachmentDidChangeUploadProgress(){let t=this.attachment.getUploadProgress(),e=this.findProgressElement();e&&(e.value=t)}},Pl=i=>T({tagName:"span",textContent:eo,data:{trixCursorTarget:i,trixSerialize:!1}}),Ip=function(i,t){let e=T("div");return e.innerHTML=i||"",e.querySelector(t)},Ws=class extends Qn{constructor(){super(...arguments),this.attachment.previewDelegate=this}createContentNodes(){return this.image=T({tagName:"img",attributes:{src:""},data:{trixMutable:!0}}),this.refresh(this.image),[this.image]}createCaptionElement(){let t=super.createCaptionElement(...arguments);return t.textContent||t.setAttribute("data-trix-placeholder",R.lang.captionPlaceholder),t}refresh(t){if(!t){var e;t=(e=this.findElement())===null||e===void 0?void 0:e.querySelector("img")}if(t)return this.updateAttributesForImage(t)}updateAttributesForImage(t){let e=this.attachment.getURL(),n=this.attachment.getPreviewURL();if(t.src=n||e,n===e)t.removeAttribute("data-trix-serialized-attributes");else{let a=JSON.stringify({src:e});t.setAttribute("data-trix-serialized-attributes",a)}let r=this.attachment.getWidth(),s=this.attachment.getHeight();r!=null&&(t.width=r),s!=null&&(t.height=s);let o=["imageElement",this.attachment.id,t.src,t.width,t.height].join("/");t.dataset.trixStoreKey=o}attachmentDidChangeAttributes(){return this.refresh(this.image),this.refresh()}},Hs=class extends ae{constructor(){super(...arguments),this.piece=this.object,this.attributes=this.piece.getAttributes(),this.textConfig=this.options.textConfig,this.context=this.options.context,this.piece.attachment?this.attachment=this.piece.attachment:this.string=this.piece.toString()}createNodes(){let t=this.attachment?this.createAttachmentNodes():this.createStringNodes(),e=this.createElement();if(e){let n=Rm(e);Array.from(t).forEach(r=>{n.appendChild(r)}),t=[e]}return t}createAttachmentNodes(){let t=this.attachment.isPreviewable()?Ws:Qn;return this.createChildView(t,this.piece.attachment,{piece:this.piece}).getNodes()}createStringNodes(){var t;if((t=this.textConfig)!==null&&t!==void 0&&t.plaintext)return[document.createTextNode(this.string)];{let e=[],n=this.string.split(`
`);for(let r=0;r<n.length;r++){let s=n[r];if(r>0){let o=T("br");e.push(o)}if(s.length){let o=document.createTextNode(this.preserveSpaces(s));e.push(o)}}return e}}createElement(){let t,e,n,r={};for(e in this.attributes){n=this.attributes[e];let o=Os(e);if(o){if(o.tagName){var s;let a=T(o.tagName);s?(s.appendChild(a),s=a):t=s=a}if(o.styleProperty&&(r[o.styleProperty]=n),o.style)for(e in o.style)n=o.style[e],r[e]=n}}if(Object.keys(r).length){t||(t=T("span"));for(e in r)n=r[e],t.style[e]=n}return t}createContainerElement(){for(let t in this.attributes){let e=this.attributes[t],n=Os(t);if(n&&n.groupTagName){let r={};return r[t]=e,T(n.groupTagName,r)}}}preserveSpaces(t){return this.context.isLast&&(t=t.replace(/\ $/,Pe)),t=t.replace(/(\S)\ {3}(\S)/g,"$1 ".concat(Pe," $2")).replace(/\ {2}/g,"".concat(Pe," ")).replace(/\ {2}/g," ".concat(Pe)),(this.context.isFirst||this.context.followsWhitespace)&&(t=t.replace(/^\ /,Pe)),t}},js=class extends ae{constructor(){super(...arguments),this.text=this.object,this.textConfig=this.options.textConfig}createNodes(){let t=[],e=Qi.groupObjects(this.getPieces()),n=e.length-1;for(let s=0;s<e.length;s++){let o=e[s],a={};s===0&&(a.isFirst=!0),s===n&&(a.isLast=!0),Np(r)&&(a.followsWhitespace=!0);let d=this.findOrCreateCachedChildView(Hs,o,{textConfig:this.textConfig,context:a});t.push(...Array.from(d.getNodes()||[]));var r=o}return t}getPieces(){return Array.from(this.text.getPieces()).filter(t=>!t.hasAttribute("blockBreak"))}},Np=i=>/\s$/.test(i?.toString()),{css:Il}=R,qs=class extends ae{constructor(){super(...arguments),this.block=this.object,this.attributes=this.block.getAttributes()}createNodes(){let e=[document.createComment("block")];if(this.block.isEmpty())e.push(T("br"));else{var n;let r=(n=q(this.block.getLastAttribute()))===null||n===void 0?void 0:n.text,s=this.findOrCreateCachedChildView(js,this.block.text,{textConfig:r});e.push(...Array.from(s.getNodes()||[])),this.shouldAddExtraNewlineElement()&&e.push(T("br"))}if(this.attributes.length)return e;{let r,{tagName:s}=R.blockAttributes.default;this.block.isRTL()&&(r={dir:"rtl"});let o=T({tagName:s,attributes:r});return e.forEach(a=>o.appendChild(a)),[o]}}createContainerElement(t){let e,n,r=this.attributes[t],{tagName:s}=q(r);if(t===0&&this.block.isRTL()&&(e={dir:"rtl"}),r==="attachmentGallery"){let o=this.block.getBlockBreakPosition();n="".concat(Il.attachmentGallery," ").concat(Il.attachmentGallery,"--").concat(o)}return T({tagName:s,className:n,attributes:e})}shouldAddExtraNewlineElement(){return/\n\n$/.test(this.block.toString())}},Zi=class extends ae{static render(t){let e=T("div"),n=new this(t,{element:e});return n.render(),n.sync(),e}constructor(){super(...arguments),this.element=this.options.element,this.elementStore=new Bs,this.setDocument(this.object)}setDocument(t){t.isEqualTo(this.document)||(this.document=this.object=t)}render(){if(this.childViews=[],this.shadowElement=T("div"),!this.document.isEmpty()){let t=Qi.groupObjects(this.document.getBlocks(),{asTree:!0});Array.from(t).forEach(e=>{let n=this.findOrCreateCachedChildView(qs,e);Array.from(n.getNodes()).map(r=>this.shadowElement.appendChild(r))})}}isSynced(){return Mp(this.shadowElement,this.element)}sync(){let t=this.createDocumentFragmentForSync();for(;this.element.lastChild;)this.element.removeChild(this.element.lastChild);return this.element.appendChild(t),this.didSync()}didSync(){return this.elementStore.reset(Nl(this.element)),so(()=>this.garbageCollectCachedViews())}createDocumentFragmentForSync(){let t=document.createDocumentFragment();return Array.from(this.shadowElement.childNodes).forEach(e=>{t.appendChild(e.cloneNode(!0))}),Array.from(Nl(t)).forEach(e=>{let n=this.elementStore.remove(e);n&&e.parentNode.replaceChild(n,e)}),t}},Nl=i=>i.querySelectorAll("[data-trix-store-key]"),Mp=(i,t)=>Ml(i.innerHTML)===Ml(t.innerHTML),Ml=i=>i.replace(/&nbsp;/g," "),Bp="[data-trix-serialize=false]",Fp=["contenteditable","data-trix-id","data-trix-store-key","data-trix-mutable","data-trix-placeholder","tabindex"],Vs="data-trix-serialized-attributes",Wp="[".concat(Vs,"]"),Hp=new RegExp("<!--block-->","g"),jp={"application/json":function(i){let t;if(i instanceof rt)t=i;else if(i instanceof HTMLElement)t=He.parse(i.innerHTML).getDocument();else throw new Error("unserializable object");return t.toSerializableDocument().toJSONString()},"text/html":function(i){let t;if(i instanceof rt)t=Zi.render(i);else if(i instanceof HTMLElement)t=i.cloneNode(!0);else throw new Error("unserializable object");return Array.from(t.querySelectorAll(Bp)).forEach(e=>{re(e)}),Fp.forEach(e=>{Array.from(t.querySelectorAll("[".concat(e,"]"))).forEach(n=>{n.removeAttribute(e)})}),Array.from(t.querySelectorAll(Wp)).forEach(e=>{try{let n=JSON.parse(e.getAttribute(Vs));e.removeAttribute(Vs);for(let r in n){let s=n[r];e.setAttribute(r,s)}}catch{}}),t.innerHTML.replace(Hp,"")}};var qp=function(i,t){let e=jp[t];if(e)return e(i);throw new Error("unknown content type: ".concat(t))};var nc="data-trix-mutable",Vp="[".concat(nc,"]"),Up={attributes:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},Us=class extends B{constructor(t){super(t),this.didMutate=this.didMutate.bind(this),this.element=t,this.observer=new window.MutationObserver(this.didMutate),this.start()}start(){return this.reset(),this.observer.observe(this.element,Up)}stop(){return this.observer.disconnect()}didMutate(t){if(this.mutations.push(...Array.from(this.findSignificantMutations(t)||[])),this.mutations.length){var e,n;return(e=this.delegate)===null||e===void 0||(n=e.elementDidMutate)===null||n===void 0||n.call(e,this.getMutationSummary()),this.reset()}}reset(){this.mutations=[]}findSignificantMutations(t){return t.filter(e=>this.mutationIsSignificant(e))}mutationIsSignificant(t){if(this.nodeIsMutable(t.target))return!1;for(let e of Array.from(this.nodesModifiedByMutation(t)))if(this.nodeIsSignificant(e))return!0;return!1}nodeIsSignificant(t){return t!==this.element&&!this.nodeIsMutable(t)&&!zl(t)}nodeIsMutable(t){return ne(t,{matchingSelector:Vp})}nodesModifiedByMutation(t){let e=[];switch(t.type){case"attributes":t.attributeName!==nc&&e.push(t.target);break;case"characterData":e.push(t.target.parentNode),e.push(t.target);break;case"childList":e.push(...Array.from(t.addedNodes||[])),e.push(...Array.from(t.removedNodes||[]));break}return e}getMutationSummary(){return this.getTextMutationSummary()}getTextMutationSummary(){let{additions:t,deletions:e}=this.getTextChangesFromCharacterData(),n=this.getTextChangesFromChildList();Array.from(n.additions).forEach(a=>{Array.from(t).includes(a)||t.push(a)}),e.push(...Array.from(n.deletions||[]));let r={},s=t.join("");s&&(r.textAdded=s);let o=e.join("");return o&&(r.textDeleted=o),r}getMutationsByType(t){return Array.from(this.mutations).filter(e=>e.type===t)}getTextChangesFromChildList(){let t,e,n=[],r=[];Array.from(this.getMutationsByType("childList")).forEach(d=>{n.push(...Array.from(d.addedNodes||[])),r.push(...Array.from(d.removedNodes||[]))}),n.length===0&&r.length===1&&ai(r[0])?(t=[],e=[`
`]):(t=$s(n),e=$s(r));let o=t.filter((d,f)=>d!==e[f]).map(zi),a=e.filter((d,f)=>d!==t[f]).map(zi);return{additions:o,deletions:a}}getTextChangesFromCharacterData(){let t,e,n=this.getMutationsByType("characterData");if(n.length){let r=n[0],s=n[n.length-1],o=zi(r.oldValue),a=zi(s.target.data),d=np(o,a);t=d.added,e=d.removed}return{additions:t?[t]:[],deletions:e?[e]:[]}}},$s=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=[];for(let e of Array.from(i))switch(e.nodeType){case Node.TEXT_NODE:t.push(e.data);break;case Node.ELEMENT_NODE:nt(e)==="br"?t.push(`
`):t.push(...Array.from($s(e.childNodes)||[]));break}return t},zs=class extends B{},Ks=class extends ui{constructor(t){super(...arguments),this.file=t}perform(t){let e=new FileReader;return e.onerror=()=>t(!1),e.onload=()=>{e.onerror=null;try{e.abort()}catch{}return t(!0,this.file)},e.readAsArrayBuffer(this.file)}},tn=class extends B{constructor(t){super(...arguments),this.element=t,this.mutationObserver=new Us(this.element),this.mutationObserver.delegate=this;for(let e in this.constructor.events)I(e,{onElement:this.element,withCallback:this.handlerFor(e)})}elementDidMutate(t){}editorWillSyncDocumentView(){return this.mutationObserver.stop()}editorDidSyncDocumentView(){return this.mutationObserver.start()}requestRender(){var t,e;return(t=this.delegate)===null||t===void 0||(e=t.inputControllerDidRequestRender)===null||e===void 0?void 0:e.call(t)}requestReparse(){var t,e;return(t=this.delegate)===null||t===void 0||(e=t.inputControllerDidRequestReparse)===null||e===void 0||e.call(t),this.requestRender()}attachFiles(t){let e=Array.from(t).map(n=>new Ks(n));return Promise.all(e).then(n=>{this.handleInput(function(){var r,s;return(r=this.delegate)===null||r===void 0||r.inputControllerWillAttachFiles(),(s=this.responder)===null||s===void 0||s.insertFiles(n),this.requestRender()})})}handlerFor(t){return e=>{e.defaultPrevented||this.handleInput(()=>{no(this.element)||(this.eventName=t,this.constructor.events[t].call(this,e))})}}handleInput(t){try{var e;(e=this.delegate)===null||e===void 0||e.inputControllerWillHandleInput(),t.call(this)}finally{var n;(n=this.delegate)===null||n===void 0||n.inputControllerDidHandleInput()}}createLinkHTML(t,e){let n=document.createElement("a");return n.href=t,n.textContent=e||t,n.outerHTML}};ht(tn,"events",{});var _s,Bl,{browser:$p,keyNames:rc}=R,zp=0,Ot=class extends tn{constructor(){super(...arguments),this.resetInputSummary()}setInputSummary(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.inputSummary.eventName=this.eventName;for(let e in t){let n=t[e];this.inputSummary[e]=n}return this.inputSummary}resetInputSummary(){this.inputSummary={}}reset(){return this.resetInputSummary(),We.reset()}elementDidMutate(t){if(this.isComposing()){var e,n;return(e=this.delegate)===null||e===void 0||(n=e.inputControllerDidAllowUnhandledInput)===null||n===void 0?void 0:n.call(e)}else return this.handleInput(function(){return this.mutationIsSignificant(t)&&(this.mutationIsExpected(t)?this.requestRender():this.requestReparse()),this.reset()})}mutationIsExpected(t){let{textAdded:e,textDeleted:n}=t;if(this.inputSummary.preferDocument)return!0;let r=e!=null?e===this.inputSummary.textAdded:!this.inputSummary.textAdded,s=n!=null?this.inputSummary.didDelete:!this.inputSummary.didDelete,o=[`
`,` 
`].includes(e)&&!r,a=n===`
`&&!s;if(o&&!a||a&&!o){let p=this.getSelectedRange();if(p){var f;let b=o?e.replace(/\n$/,"").length||-1:e?.length||1;if((f=this.responder)!==null&&f!==void 0&&f.positionIsBlockBreak(p[1]+b))return!0}}return r&&s}mutationIsSignificant(t){var e;let n=Object.keys(t).length>0,r=((e=this.compositionInput)===null||e===void 0?void 0:e.getEndData())==="";return n||!r}getCompositionInput(){if(this.isComposing())return this.compositionInput;this.compositionInput=new kt(this)}isComposing(){return this.compositionInput&&!this.compositionInput.isEnded()}deleteInDirection(t,e){var n;if(((n=this.responder)===null||n===void 0?void 0:n.deleteInDirection(t))===!1){if(e)return e.preventDefault(),this.requestRender()}else return this.setInputSummary({didDelete:!0})}serializeSelectionToDataTransfer(t){var e;if(!Zm(t))return;let n=(e=this.responder)===null||e===void 0?void 0:e.getSelectedDocument().toSerializableDocument();return t.setData("application/x-trix-document",JSON.stringify(n)),t.setData("text/html",Zi.render(n).innerHTML),t.setData("text/plain",n.toString().replace(/\n$/,"")),!0}canAcceptDataTransfer(t){let e={};return Array.from(t?.types||[]).forEach(n=>{e[n]=!0}),e.Files||e["application/x-trix-document"]||e["text/html"]||e["text/plain"]}getPastedHTMLUsingHiddenElement(t){let e=this.getSelectedRange(),n={position:"absolute",left:"".concat(window.pageXOffset,"px"),top:"".concat(window.pageYOffset,"px"),opacity:0},r=T({style:n,tagName:"div",editable:!0});return document.body.appendChild(r),r.focus(),requestAnimationFrame(()=>{let s=r.innerHTML;return re(r),this.setSelectedRange(e),t(s)})}};ht(Ot,"events",{keydown(i){this.isComposing()||this.resetInputSummary(),this.inputSummary.didInput=!0;let t=rc[i.keyCode];if(t){var e;let r=this.keys;["ctrl","alt","shift","meta"].forEach(s=>{if(i["".concat(s,"Key")]){var o;s==="ctrl"&&(s="control"),r=(o=r)===null||o===void 0?void 0:o[s]}}),((e=r)===null||e===void 0?void 0:e[t])!=null&&(this.setInputSummary({keyName:t}),We.reset(),r[t].call(this,i))}if(Gl(i)){let r=String.fromCharCode(i.keyCode).toLowerCase();if(r){var n;let s=["alt","shift"].map(o=>{if(i["".concat(o,"Key")])return o}).filter(o=>o);s.push(r),(n=this.delegate)!==null&&n!==void 0&&n.inputControllerDidReceiveKeyboardCommand(s)&&i.preventDefault()}}},keypress(i){if(this.inputSummary.eventName!=null||i.metaKey||i.ctrlKey&&!i.altKey)return;let t=Gp(i);if(t){var e,n;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(n=this.responder)===null||n===void 0||n.insertString(t),this.setInputSummary({textAdded:t,didDelete:this.selectionIsExpanded()})}},textInput(i){let{data:t}=i,{textAdded:e}=this.inputSummary;if(e&&e!==t&&e.toUpperCase()===t){var n;let r=this.getSelectedRange();return this.setSelectedRange([r[0],r[1]+e.length]),(n=this.responder)===null||n===void 0||n.insertString(t),this.setInputSummary({textAdded:t}),this.setSelectedRange(r)}},dragenter(i){i.preventDefault()},dragstart(i){var t,e;return this.serializeSelectionToDataTransfer(i.dataTransfer),this.draggedRange=this.getSelectedRange(),(t=this.delegate)===null||t===void 0||(e=t.inputControllerDidStartDrag)===null||e===void 0?void 0:e.call(t)},dragover(i){if(this.draggedRange||this.canAcceptDataTransfer(i.dataTransfer)){i.preventDefault();let n={x:i.clientX,y:i.clientY};if(!en(n,this.draggingPoint)){var t,e;return this.draggingPoint=n,(t=this.delegate)===null||t===void 0||(e=t.inputControllerDidReceiveDragOverPoint)===null||e===void 0?void 0:e.call(t,this.draggingPoint)}}},dragend(i){var t,e;(t=this.delegate)===null||t===void 0||(e=t.inputControllerDidCancelDrag)===null||e===void 0||e.call(t),this.draggedRange=null,this.draggingPoint=null},drop(i){var t,e;i.preventDefault();let n=(t=i.dataTransfer)===null||t===void 0?void 0:t.files,r=i.dataTransfer.getData("application/x-trix-document"),s={x:i.clientX,y:i.clientY};if((e=this.responder)===null||e===void 0||e.setLocationRangeFromPointRange(s),n!=null&&n.length)this.attachFiles(n);else if(this.draggedRange){var o,a;(o=this.delegate)===null||o===void 0||o.inputControllerWillMoveText(),(a=this.responder)===null||a===void 0||a.moveTextFromRange(this.draggedRange),this.draggedRange=null,this.requestRender()}else if(r){var d;let f=rt.fromJSONString(r);(d=this.responder)===null||d===void 0||d.insertDocument(f),this.requestRender()}this.draggedRange=null,this.draggingPoint=null},cut(i){var t;if((t=this.responder)!==null&&t!==void 0&&t.selectionIsExpanded()){var e;if(this.serializeSelectionToDataTransfer(i.clipboardData)&&i.preventDefault(),(e=this.delegate)===null||e===void 0||e.inputControllerWillCutText(),this.deleteInDirection("backward"),i.defaultPrevented)return this.requestRender()}},copy(i){var t;(t=this.responder)!==null&&t!==void 0&&t.selectionIsExpanded()&&this.serializeSelectionToDataTransfer(i.clipboardData)&&i.preventDefault()},paste(i){let t=i.clipboardData||i.testClipboardData,e={clipboard:t};if(!t||Jp(i)){this.getPastedHTMLUsingHiddenElement(h=>{var u,S,L;return e.type="text/html",e.html=h,(u=this.delegate)===null||u===void 0||u.inputControllerWillPaste(e),(S=this.responder)===null||S===void 0||S.insertHTML(e.html),this.requestRender(),(L=this.delegate)===null||L===void 0?void 0:L.inputControllerDidPaste(e)});return}let n=t.getData("URL"),r=t.getData("text/html"),s=t.getData("public.url-name");if(n){var o,a,d;let h;e.type="text/html",s?h=ao(s).trim():h=n,e.html=this.createLinkHTML(n,h),(o=this.delegate)===null||o===void 0||o.inputControllerWillPaste(e),this.setInputSummary({textAdded:h,didDelete:this.selectionIsExpanded()}),(a=this.responder)===null||a===void 0||a.insertHTML(e.html),this.requestRender(),(d=this.delegate)===null||d===void 0||d.inputControllerDidPaste(e)}else if(Yl(t)){var f,p,b;e.type="text/plain",e.string=t.getData("text/plain"),(f=this.delegate)===null||f===void 0||f.inputControllerWillPaste(e),this.setInputSummary({textAdded:e.string,didDelete:this.selectionIsExpanded()}),(p=this.responder)===null||p===void 0||p.insertString(e.string),this.requestRender(),(b=this.delegate)===null||b===void 0||b.inputControllerDidPaste(e)}else if(r){var y,A,_;e.type="text/html",e.html=r,(y=this.delegate)===null||y===void 0||y.inputControllerWillPaste(e),(A=this.responder)===null||A===void 0||A.insertHTML(e.html),this.requestRender(),(_=this.delegate)===null||_===void 0||_.inputControllerDidPaste(e)}else if(Array.from(t.types).includes("Files")){var w,E,g;let h=(w=t.items)===null||w===void 0||(E=w[0])===null||E===void 0||(g=E.getAsFile)===null||g===void 0?void 0:g.call(E);if(h){var m,c,l;let u=Kp(h);!h.name&&u&&(h.name="pasted-file-".concat(++zp,".").concat(u)),e.type="File",e.file=h,(m=this.delegate)===null||m===void 0||m.inputControllerWillAttachFiles(),(c=this.responder)===null||c===void 0||c.insertFile(e.file),this.requestRender(),(l=this.delegate)===null||l===void 0||l.inputControllerDidPaste(e)}}i.preventDefault()},compositionstart(i){return this.getCompositionInput().start(i.data)},compositionupdate(i){return this.getCompositionInput().update(i.data)},compositionend(i){return this.getCompositionInput().end(i.data)},beforeinput(i){this.inputSummary.didInput=!0},input(i){return this.inputSummary.didInput=!0,i.stopPropagation()}});ht(Ot,"keys",{backspace(i){var t;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.deleteInDirection("backward",i)},delete(i){var t;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.deleteInDirection("forward",i)},return(i){var t,e;return this.setInputSummary({preferDocument:!0}),(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(e=this.responder)===null||e===void 0?void 0:e.insertLineBreak()},tab(i){var t;if((t=this.responder)!==null&&t!==void 0&&t.canIncreaseNestingLevel()){var e;(e=this.responder)===null||e===void 0||e.increaseNestingLevel(),this.requestRender(),i.preventDefault()}},left(i){if(this.selectionIsInCursorTarget()){var t;return i.preventDefault(),(t=this.responder)===null||t===void 0?void 0:t.moveCursorInDirection("backward")}},right(i){if(this.selectionIsInCursorTarget()){var t;return i.preventDefault(),(t=this.responder)===null||t===void 0?void 0:t.moveCursorInDirection("forward")}},control:{d(i){var t;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.deleteInDirection("forward",i)},h(i){var t;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.deleteInDirection("backward",i)},o(i){var t,e;return i.preventDefault(),(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(e=this.responder)===null||e===void 0||e.insertString(`
`,{updatePosition:!1}),this.requestRender()}},shift:{return(i){var t,e;(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(e=this.responder)===null||e===void 0||e.insertString(`
`),this.requestRender(),i.preventDefault()},tab(i){var t;if((t=this.responder)!==null&&t!==void 0&&t.canDecreaseNestingLevel()){var e;(e=this.responder)===null||e===void 0||e.decreaseNestingLevel(),this.requestRender(),i.preventDefault()}},left(i){if(this.selectionIsInCursorTarget())return i.preventDefault(),this.expandSelectionInDirection("backward")},right(i){if(this.selectionIsInCursorTarget())return i.preventDefault(),this.expandSelectionInDirection("forward")}},alt:{backspace(i){var t;return this.setInputSummary({preferDocument:!1}),(t=this.delegate)===null||t===void 0?void 0:t.inputControllerWillPerformTyping()}},meta:{backspace(i){var t;return this.setInputSummary({preferDocument:!1}),(t=this.delegate)===null||t===void 0?void 0:t.inputControllerWillPerformTyping()}}});Ot.proxyMethod("responder?.getSelectedRange");Ot.proxyMethod("responder?.setSelectedRange");Ot.proxyMethod("responder?.expandSelectionInDirection");Ot.proxyMethod("responder?.selectionIsInCursorTarget");Ot.proxyMethod("responder?.selectionIsExpanded");var Kp=i=>{var t,e;return(t=i.type)===null||t===void 0||(e=t.match(/\/(\w+)$/))===null||e===void 0?void 0:e[1]},Yp=!!((_s=(Bl=" ").codePointAt)!==null&&_s!==void 0&&_s.call(Bl,0)),Gp=function(i){if(i.key&&Yp&&i.key.codePointAt(0)===i.keyCode)return i.key;{let t;if(i.which===null?t=i.keyCode:i.which!==0&&i.charCode!==0&&(t=i.charCode),t!=null&&rc[t]!=="escape")return Be.fromCodepoints([t]).toString()}},Jp=function(i){let t=i.clipboardData;if(t)if(t.types.includes("text/html")){for(let e of t.types){let n=/^CorePasteboardFlavorType/.test(e),r=/^dyn\./.test(e)&&t.getData(e);if(n||r)return!0}return!1}else{let e=t.types.includes("com.apple.webarchive"),n=t.types.includes("com.apple.flat-rtfd");return e||n}},kt=class extends B{constructor(t){super(...arguments),this.inputController=t,this.responder=this.inputController.responder,this.delegate=this.inputController.delegate,this.inputSummary=this.inputController.inputSummary,this.data={}}start(t){if(this.data.start=t,this.isSignificant()){var e;if(this.inputSummary.eventName==="keypress"&&this.inputSummary.textAdded){var n;(n=this.responder)===null||n===void 0||n.deleteInDirection("left")}this.selectionIsExpanded()||(this.insertPlaceholder(),this.requestRender()),this.range=(e=this.responder)===null||e===void 0?void 0:e.getSelectedRange()}}update(t){if(this.data.update=t,this.isSignificant()){let e=this.selectPlaceholder();e&&(this.forgetPlaceholder(),this.range=e)}}end(t){if(this.data.end=t,this.isSignificant()){if(this.forgetPlaceholder(),this.canApplyToDocument()){var e,n,r,s;return this.setInputSummary({preferDocument:!0,didInput:!1}),(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(n=this.responder)===null||n===void 0||n.setSelectedRange(this.range),(r=this.responder)===null||r===void 0||r.insertString(this.data.end),(s=this.responder)===null||s===void 0?void 0:s.setSelectedRange(this.range[0]+this.data.end.length)}else if(this.data.start!=null||this.data.update!=null)return this.requestReparse(),this.inputController.reset()}else return this.inputController.reset()}getEndData(){return this.data.end}isEnded(){return this.getEndData()!=null}isSignificant(){return $p.composesExistingText?this.inputSummary.didInput:!0}canApplyToDocument(){var t,e;return((t=this.data.start)===null||t===void 0?void 0:t.length)===0&&((e=this.data.end)===null||e===void 0?void 0:e.length)>0&&this.range}};kt.proxyMethod("inputController.setInputSummary");kt.proxyMethod("inputController.requestRender");kt.proxyMethod("inputController.requestReparse");kt.proxyMethod("responder?.selectionIsExpanded");kt.proxyMethod("responder?.insertPlaceholder");kt.proxyMethod("responder?.selectPlaceholder");kt.proxyMethod("responder?.forgetPlaceholder");var di=class extends tn{constructor(){super(...arguments),this.render=this.render.bind(this)}elementDidMutate(){if(this.scheduledRender){if(this.composing){var t,e;return(t=this.delegate)===null||t===void 0||(e=t.inputControllerDidAllowUnhandledInput)===null||e===void 0?void 0:e.call(t)}}else return this.reparse()}scheduleRender(){return this.scheduledRender?this.scheduledRender:this.scheduledRender=requestAnimationFrame(this.render)}render(){var t;if(cancelAnimationFrame(this.scheduledRender),this.scheduledRender=null,!this.composing){var e;(e=this.delegate)===null||e===void 0||e.render()}(t=this.afterRender)===null||t===void 0||t.call(this),this.afterRender=null}reparse(){var t;return(t=this.delegate)===null||t===void 0?void 0:t.reparse()}insertString(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var r;return(r=this.responder)===null||r===void 0?void 0:r.insertString(e,n)})}toggleAttributeIfSupported(t){if(Ds().includes(t)){var e;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformFormatting(t),this.withTargetDOMRange(function(){var n;return(n=this.responder)===null||n===void 0?void 0:n.toggleCurrentAttribute(t)})}}activateAttributeIfSupported(t,e){if(Ds().includes(t)){var n;return(n=this.delegate)===null||n===void 0||n.inputControllerWillPerformFormatting(t),this.withTargetDOMRange(function(){var r;return(r=this.responder)===null||r===void 0?void 0:r.setCurrentAttribute(t,e)})}}deleteInDirection(t){let{recordUndoEntry:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{recordUndoEntry:!0};if(e){var n;(n=this.delegate)===null||n===void 0||n.inputControllerWillPerformTyping()}let r=()=>{var o;return(o=this.responder)===null||o===void 0?void 0:o.deleteInDirection(t)},s=this.getTargetDOMRange({minLength:2});return s?this.withTargetDOMRange(s,r):r()}withTargetDOMRange(t,e){if(typeof t=="function"&&(e=t,t=this.getTargetDOMRange()),t){var n;return(n=this.responder)===null||n===void 0?void 0:n.withTargetDOMRange(t,e.bind(this))}else return We.reset(),e.call(this)}getTargetDOMRange(){var t,e;let{minLength:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{minLength:0},r=(t=(e=this.event).getTargetRanges)===null||t===void 0?void 0:t.call(e);if(r&&r.length){let s=Xp(r[0]);if(n===0||s.toString().length>=n)return s}}withEvent(t,e){let n;this.event=t;try{n=e.call(this)}finally{this.event=null}return n}};ht(di,"events",{keydown(i){if(Gl(i)){var t;let e=tg(i);(t=this.delegate)!==null&&t!==void 0&&t.inputControllerDidReceiveKeyboardCommand(e)&&i.preventDefault()}else{let e=i.key;i.altKey&&(e+="+Alt"),i.shiftKey&&(e+="+Shift");let n=this.constructor.keys[e];if(n)return this.withEvent(i,n)}},paste(i){var t;let e,n=(t=i.clipboardData)===null||t===void 0?void 0:t.getData("URL");if(Qp(i))return i.preventDefault(),this.attachFiles(i.clipboardData.files);if(Zp(i)){var r,s,o;return i.preventDefault(),e={type:"text/plain",string:i.clipboardData.getData("text/plain")},(r=this.delegate)===null||r===void 0||r.inputControllerWillPaste(e),(s=this.responder)===null||s===void 0||s.insertString(e.string),this.render(),(o=this.delegate)===null||o===void 0?void 0:o.inputControllerDidPaste(e)}else if(n){var a,d,f;return i.preventDefault(),e={type:"text/html",html:this.createLinkHTML(n)},(a=this.delegate)===null||a===void 0||a.inputControllerWillPaste(e),(d=this.responder)===null||d===void 0||d.insertHTML(e.html),this.render(),(f=this.delegate)===null||f===void 0?void 0:f.inputControllerDidPaste(e)}},beforeinput(i){let t=this.constructor.inputTypes[i.inputType];if(t)return this.withEvent(i,t),this.scheduleRender()},input(i){return We.reset()},dragstart(i){var t;if((t=this.responder)!==null&&t!==void 0&&t.selectionContainsAttachments()){var e;i.dataTransfer.setData("application/x-trix-dragging",!0),this.dragging={range:(e=this.responder)===null||e===void 0?void 0:e.getSelectedRange(),point:Ts(i)}}},dragenter(i){xs(i)&&i.preventDefault()},dragover(i){if(this.dragging){i.preventDefault();let e=Ts(i);if(!en(e,this.dragging.point)){var t;return this.dragging.point=e,(t=this.responder)===null||t===void 0?void 0:t.setLocationRangeFromPointRange(e)}}else xs(i)&&i.preventDefault()},drop(i){if(this.dragging){var t,e;return i.preventDefault(),(t=this.delegate)===null||t===void 0||t.inputControllerWillMoveText(),(e=this.responder)===null||e===void 0||e.moveTextFromRange(this.dragging.range),this.dragging=null,this.scheduleRender()}else if(xs(i)){var n;i.preventDefault();let r=Ts(i);return(n=this.responder)===null||n===void 0||n.setLocationRangeFromPointRange(r),this.attachFiles(i.dataTransfer.files)}},dragend(){if(this.dragging){var i;(i=this.responder)===null||i===void 0||i.setSelectedRange(this.dragging.range),this.dragging=null}},compositionend(i){if(this.composing)return this.composing=!1,this.scheduleRender()}});ht(di,"keys",{ArrowLeft(){var i;if((i=this.responder)!==null&&i!==void 0&&i.shouldManageMovingCursorInDirection("backward")){var t;return this.event.preventDefault(),(t=this.responder)===null||t===void 0?void 0:t.moveCursorInDirection("backward")}},ArrowRight(){var i;if((i=this.responder)!==null&&i!==void 0&&i.shouldManageMovingCursorInDirection("forward")){var t;return this.event.preventDefault(),(t=this.responder)===null||t===void 0?void 0:t.moveCursorInDirection("forward")}},Backspace(){var i;if((i=this.responder)!==null&&i!==void 0&&i.shouldManageDeletingInDirection("backward")){var t,e;return this.event.preventDefault(),(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(e=this.responder)===null||e===void 0||e.deleteInDirection("backward"),this.render()}},Tab(){var i;if((i=this.responder)!==null&&i!==void 0&&i.canIncreaseNestingLevel()){var t;return this.event.preventDefault(),(t=this.responder)===null||t===void 0||t.increaseNestingLevel(),this.render()}},"Tab+Shift"(){var i;if((i=this.responder)!==null&&i!==void 0&&i.canDecreaseNestingLevel()){var t;return this.event.preventDefault(),(t=this.responder)===null||t===void 0||t.decreaseNestingLevel(),this.render()}}});ht(di,"inputTypes",{deleteByComposition(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteByCut(){return this.deleteInDirection("backward")},deleteByDrag(){return this.event.preventDefault(),this.withTargetDOMRange(function(){var i;this.deleteByDragRange=(i=this.responder)===null||i===void 0?void 0:i.getSelectedRange()})},deleteCompositionText(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteContent(){return this.deleteInDirection("backward")},deleteContentBackward(){return this.deleteInDirection("backward")},deleteContentForward(){return this.deleteInDirection("forward")},deleteEntireSoftLine(){return this.deleteInDirection("forward")},deleteHardLineBackward(){return this.deleteInDirection("backward")},deleteHardLineForward(){return this.deleteInDirection("forward")},deleteSoftLineBackward(){return this.deleteInDirection("backward")},deleteSoftLineForward(){return this.deleteInDirection("forward")},deleteWordBackward(){return this.deleteInDirection("backward")},deleteWordForward(){return this.deleteInDirection("forward")},formatBackColor(){return this.activateAttributeIfSupported("backgroundColor",this.event.data)},formatBold(){return this.toggleAttributeIfSupported("bold")},formatFontColor(){return this.activateAttributeIfSupported("color",this.event.data)},formatFontName(){return this.activateAttributeIfSupported("font",this.event.data)},formatIndent(){var i;if((i=this.responder)!==null&&i!==void 0&&i.canIncreaseNestingLevel())return this.withTargetDOMRange(function(){var t;return(t=this.responder)===null||t===void 0?void 0:t.increaseNestingLevel()})},formatItalic(){return this.toggleAttributeIfSupported("italic")},formatJustifyCenter(){return this.toggleAttributeIfSupported("justifyCenter")},formatJustifyFull(){return this.toggleAttributeIfSupported("justifyFull")},formatJustifyLeft(){return this.toggleAttributeIfSupported("justifyLeft")},formatJustifyRight(){return this.toggleAttributeIfSupported("justifyRight")},formatOutdent(){var i;if((i=this.responder)!==null&&i!==void 0&&i.canDecreaseNestingLevel())return this.withTargetDOMRange(function(){var t;return(t=this.responder)===null||t===void 0?void 0:t.decreaseNestingLevel()})},formatRemove(){this.withTargetDOMRange(function(){for(let e in(i=this.responder)===null||i===void 0?void 0:i.getCurrentAttributes()){var i,t;(t=this.responder)===null||t===void 0||t.removeCurrentAttribute(e)}})},formatSetBlockTextDirection(){return this.activateAttributeIfSupported("blockDir",this.event.data)},formatSetInlineTextDirection(){return this.activateAttributeIfSupported("textDir",this.event.data)},formatStrikeThrough(){return this.toggleAttributeIfSupported("strike")},formatSubscript(){return this.toggleAttributeIfSupported("sub")},formatSuperscript(){return this.toggleAttributeIfSupported("sup")},formatUnderline(){return this.toggleAttributeIfSupported("underline")},historyRedo(){var i;return(i=this.delegate)===null||i===void 0?void 0:i.inputControllerWillPerformRedo()},historyUndo(){var i;return(i=this.delegate)===null||i===void 0?void 0:i.inputControllerWillPerformUndo()},insertCompositionText(){return this.composing=!0,this.insertString(this.event.data)},insertFromComposition(){return this.composing=!1,this.insertString(this.event.data)},insertFromDrop(){let i=this.deleteByDragRange;if(i){var t;return this.deleteByDragRange=null,(t=this.delegate)===null||t===void 0||t.inputControllerWillMoveText(),this.withTargetDOMRange(function(){var e;return(e=this.responder)===null||e===void 0?void 0:e.moveTextFromRange(i)})}},insertFromPaste(){var i;let{dataTransfer:t}=this.event,e={dataTransfer:t},n=t.getData("URL"),r=t.getData("text/html");if(n){var s;let f;this.event.preventDefault(),e.type="text/html";let p=t.getData("public.url-name");p?f=ao(p).trim():f=n,e.html=this.createLinkHTML(n,f),(s=this.delegate)===null||s===void 0||s.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var b;return(b=this.responder)===null||b===void 0?void 0:b.insertHTML(e.html)}),this.afterRender=()=>{var b;return(b=this.delegate)===null||b===void 0?void 0:b.inputControllerDidPaste(e)}}else if(Yl(t)){var o;e.type="text/plain",e.string=t.getData("text/plain"),(o=this.delegate)===null||o===void 0||o.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var f;return(f=this.responder)===null||f===void 0?void 0:f.insertString(e.string)}),this.afterRender=()=>{var f;return(f=this.delegate)===null||f===void 0?void 0:f.inputControllerDidPaste(e)}}else if(r){var a;this.event.preventDefault(),e.type="text/html",e.html=r,(a=this.delegate)===null||a===void 0||a.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var f;return(f=this.responder)===null||f===void 0?void 0:f.insertHTML(e.html)}),this.afterRender=()=>{var f;return(f=this.delegate)===null||f===void 0?void 0:f.inputControllerDidPaste(e)}}else if((i=t.files)!==null&&i!==void 0&&i.length){var d;e.type="File",e.file=t.files[0],(d=this.delegate)===null||d===void 0||d.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var f;return(f=this.responder)===null||f===void 0?void 0:f.insertFile(e.file)}),this.afterRender=()=>{var f;return(f=this.delegate)===null||f===void 0?void 0:f.inputControllerDidPaste(e)}}},insertFromYank(){return this.insertString(this.event.data)},insertLineBreak(){return this.insertString(`
`)},insertLink(){return this.activateAttributeIfSupported("href",this.event.data)},insertOrderedList(){return this.toggleAttributeIfSupported("number")},insertParagraph(){var i;return(i=this.delegate)===null||i===void 0||i.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var t;return(t=this.responder)===null||t===void 0?void 0:t.insertLineBreak()})},insertReplacementText(){return this.insertString(this.event.dataTransfer.getData("text/plain"),{updatePosition:!1})},insertText(){var i;return this.insertString(this.event.data||((i=this.event.dataTransfer)===null||i===void 0?void 0:i.getData("text/plain")))},insertTranspose(){return this.insertString(this.event.data)},insertUnorderedList(){return this.toggleAttributeIfSupported("bullet")}});var Xp=function(i){let t=document.createRange();return t.setStart(i.startContainer,i.startOffset),t.setEnd(i.endContainer,i.endOffset),t},xs=i=>{var t;return Array.from(((t=i.dataTransfer)===null||t===void 0?void 0:t.types)||[]).includes("Files")},Qp=function(i){let t=i.clipboardData;if(t)return t.types.includes("Files")&&t.types.length===1&&t.files.length>=1},Zp=function(i){let t=i.clipboardData;if(t)return t.types.includes("text/plain")&&t.types.length===1},tg=function(i){let t=[];return i.altKey&&t.push("alt"),i.shiftKey&&t.push("shift"),t.push(i.key),t},Ts=i=>({x:i.clientX,y:i.clientY}),{lang:Ls,css:ke,keyNames:eg}=R,Rs=function(i){return function(){let t=i.apply(this,arguments);t.do(),this.undos||(this.undos=[]),this.undos.push(t.undo)}},Ys=class extends B{constructor(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(...arguments),ht(this,"makeElementMutable",Rs(()=>({do:()=>{this.element.dataset.trixMutable=!0},undo:()=>delete this.element.dataset.trixMutable}))),ht(this,"addToolbar",Rs(()=>{let s=T({tagName:"div",className:ke.attachmentToolbar,data:{trixMutable:!0},childNodes:T({tagName:"div",className:"trix-button-row",childNodes:T({tagName:"span",className:"trix-button-group trix-button-group--actions",childNodes:T({tagName:"button",className:"trix-button trix-button--remove",textContent:Ls.remove,attributes:{title:Ls.remove},data:{trixAction:"remove"}})})})});return this.attachment.isPreviewable()&&s.appendChild(T({tagName:"div",className:ke.attachmentMetadataContainer,childNodes:T({tagName:"span",className:ke.attachmentMetadata,childNodes:[T({tagName:"span",className:ke.attachmentName,textContent:this.attachment.getFilename(),attributes:{title:this.attachment.getFilename()}}),T({tagName:"span",className:ke.attachmentSize,textContent:this.attachment.getFormattedFilesize()})]})})),I("click",{onElement:s,withCallback:this.didClickToolbar}),I("click",{onElement:s,matchingSelector:"[data-trix-action]",withCallback:this.didClickActionButton}),{do:()=>this.element.appendChild(s),undo:()=>re(s)}})),ht(this,"installCaptionEditor",Rs(()=>{let s=T({tagName:"textarea",className:ke.attachmentCaptionEditor,attributes:{placeholder:Ls.captionPlaceholder},data:{trixMutable:!0}});s.value=this.attachmentPiece.getCaption();let o=s.cloneNode();o.classList.add("trix-autoresize-clone"),o.tabIndex=-1;let a=function(){o.value=s.value,s.style.height=o.scrollHeight+"px"};I("input",{onElement:s,withCallback:a}),I("input",{onElement:s,withCallback:this.didInputCaption}),I("keydown",{onElement:s,withCallback:this.didKeyDownCaption}),I("change",{onElement:s,withCallback:this.didChangeCaption}),I("blur",{onElement:s,withCallback:this.didBlurCaption});let d=this.element.querySelector("figcaption"),f=d.cloneNode();return{do:()=>{if(d.style.display="none",f.appendChild(s),f.appendChild(o),f.classList.add("".concat(ke.attachmentCaption,"--editing")),d.parentElement.insertBefore(f,d),a(),this.options.editCaption)return so(()=>s.focus())},undo(){re(f),d.style.display=null}}})),this.didClickToolbar=this.didClickToolbar.bind(this),this.didClickActionButton=this.didClickActionButton.bind(this),this.didKeyDownCaption=this.didKeyDownCaption.bind(this),this.didInputCaption=this.didInputCaption.bind(this),this.didChangeCaption=this.didChangeCaption.bind(this),this.didBlurCaption=this.didBlurCaption.bind(this),this.attachmentPiece=t,this.element=e,this.container=n,this.options=r,this.attachment=this.attachmentPiece.attachment,nt(this.element)==="a"&&(this.element=this.element.firstChild),this.install()}install(){this.makeElementMutable(),this.addToolbar(),this.attachment.isPreviewable()&&this.installCaptionEditor()}uninstall(){var t;let e=this.undos.pop();for(this.savePendingCaption();e;)e(),e=this.undos.pop();(t=this.delegate)===null||t===void 0||t.didUninstallAttachmentEditor(this)}savePendingCaption(){if(this.pendingCaption){let s=this.pendingCaption;if(this.pendingCaption=null,s){var t,e;(t=this.delegate)===null||t===void 0||(e=t.attachmentEditorDidRequestUpdatingAttributesForAttachment)===null||e===void 0||e.call(t,{caption:s},this.attachment)}else{var n,r;(n=this.delegate)===null||n===void 0||(r=n.attachmentEditorDidRequestRemovingAttributeForAttachment)===null||r===void 0||r.call(n,"caption",this.attachment)}}}didClickToolbar(t){return t.preventDefault(),t.stopPropagation()}didClickActionButton(t){var e;switch(t.target.getAttribute("data-trix-action")){case"remove":return(e=this.delegate)===null||e===void 0?void 0:e.attachmentEditorDidRequestRemovalOfAttachment(this.attachment)}}didKeyDownCaption(t){if(eg[t.keyCode]==="return"){var e,n;return t.preventDefault(),this.savePendingCaption(),(e=this.delegate)===null||e===void 0||(n=e.attachmentEditorDidRequestDeselectingAttachment)===null||n===void 0?void 0:n.call(e,this.attachment)}}didInputCaption(t){this.pendingCaption=t.target.value.replace(/\s/g," ").trim()}didChangeCaption(t){return this.savePendingCaption()}didBlurCaption(t){return this.savePendingCaption()}},Gs=class extends B{constructor(t,e){super(...arguments),this.didFocus=this.didFocus.bind(this),this.didBlur=this.didBlur.bind(this),this.didClickAttachment=this.didClickAttachment.bind(this),this.element=t,this.composition=e,this.documentView=new Zi(this.composition.document,{element:this.element}),I("focus",{onElement:this.element,withCallback:this.didFocus}),I("blur",{onElement:this.element,withCallback:this.didBlur}),I("click",{onElement:this.element,matchingSelector:"a[contenteditable=false]",preventDefault:!0}),I("mousedown",{onElement:this.element,matchingSelector:Ne,withCallback:this.didClickAttachment}),I("click",{onElement:this.element,matchingSelector:"a".concat(Ne),preventDefault:!0})}didFocus(t){var e;let n=()=>{if(!this.focused){var r,s;return this.focused=!0,(r=this.delegate)===null||r===void 0||(s=r.compositionControllerDidFocus)===null||s===void 0?void 0:s.call(r)}};return((e=this.blurPromise)===null||e===void 0?void 0:e.then(n))||n()}didBlur(t){this.blurPromise=new Promise(e=>so(()=>{if(!no(this.element)){var n,r;this.focused=null,(n=this.delegate)===null||n===void 0||(r=n.compositionControllerDidBlur)===null||r===void 0||r.call(n)}return this.blurPromise=null,e()}))}didClickAttachment(t,e){var n,r;let s=this.findAttachmentForElement(e),o=!!ne(t.target,{matchingSelector:"figcaption"});return(n=this.delegate)===null||n===void 0||(r=n.compositionControllerDidSelectAttachment)===null||r===void 0?void 0:r.call(n,s,{editCaption:o})}getSerializableElement(){return this.isEditingAttachment()?this.documentView.shadowElement:this.element}render(){var t,e;if(this.revision!==this.composition.revision&&(this.documentView.setDocument(this.composition.document),this.documentView.render(),this.revision=this.composition.revision),this.canSyncDocumentView()&&!this.documentView.isSynced()){var n,r,s,o;(n=this.delegate)===null||n===void 0||(r=n.compositionControllerWillSyncDocumentView)===null||r===void 0||r.call(n),this.documentView.sync(),(s=this.delegate)===null||s===void 0||(o=s.compositionControllerDidSyncDocumentView)===null||o===void 0||o.call(s)}return(t=this.delegate)===null||t===void 0||(e=t.compositionControllerDidRender)===null||e===void 0?void 0:e.call(t)}rerenderViewForObject(t){return this.invalidateViewForObject(t),this.render()}invalidateViewForObject(t){return this.documentView.invalidateViewForObject(t)}isViewCachingEnabled(){return this.documentView.isViewCachingEnabled()}enableViewCaching(){return this.documentView.enableViewCaching()}disableViewCaching(){return this.documentView.disableViewCaching()}refreshViewCache(){return this.documentView.garbageCollectCachedViews()}isEditingAttachment(){return!!this.attachmentEditor}installAttachmentEditorForAttachment(t,e){var n;if(((n=this.attachmentEditor)===null||n===void 0?void 0:n.attachment)===t)return;let r=this.documentView.findElementForObject(t);if(!r)return;this.uninstallAttachmentEditor();let s=this.composition.document.getAttachmentPieceForAttachment(t);this.attachmentEditor=new Ys(s,r,this.element,e),this.attachmentEditor.delegate=this}uninstallAttachmentEditor(){var t;return(t=this.attachmentEditor)===null||t===void 0?void 0:t.uninstall()}didUninstallAttachmentEditor(){return this.attachmentEditor=null,this.render()}attachmentEditorDidRequestUpdatingAttributesForAttachment(t,e){var n,r;return(n=this.delegate)===null||n===void 0||(r=n.compositionControllerWillUpdateAttachment)===null||r===void 0||r.call(n,e),this.composition.updateAttributesForAttachment(t,e)}attachmentEditorDidRequestRemovingAttributeForAttachment(t,e){var n,r;return(n=this.delegate)===null||n===void 0||(r=n.compositionControllerWillUpdateAttachment)===null||r===void 0||r.call(n,e),this.composition.removeAttributeForAttachment(t,e)}attachmentEditorDidRequestRemovalOfAttachment(t){var e,n;return(e=this.delegate)===null||e===void 0||(n=e.compositionControllerDidRequestRemovalOfAttachment)===null||n===void 0?void 0:n.call(e,t)}attachmentEditorDidRequestDeselectingAttachment(t){var e,n;return(e=this.delegate)===null||e===void 0||(n=e.compositionControllerDidRequestDeselectingAttachment)===null||n===void 0?void 0:n.call(e,t)}canSyncDocumentView(){return!this.isEditingAttachment()}findAttachmentForElement(t){return this.composition.document.getAttachmentById(parseInt(t.dataset.trixId,10))}},Js="[data-trix-attribute]",Xs="[data-trix-action]",ig="".concat(Js,", ").concat(Xs),er="[data-trix-dialog]",ng="".concat(er,"[data-trix-active]"),rg="".concat(er," [data-trix-method]"),Fl="".concat(er," [data-trix-input]"),Wl=(i,t)=>(t||(t=oi(i)),i.querySelector("[data-trix-input][name='".concat(t,"']"))),Hl=i=>i.getAttribute("data-trix-action"),oi=i=>i.getAttribute("data-trix-attribute")||i.getAttribute("data-trix-dialog-attribute"),sg=i=>i.getAttribute("data-trix-dialog"),Qs=class extends B{constructor(t){super(t),this.didClickActionButton=this.didClickActionButton.bind(this),this.didClickAttributeButton=this.didClickAttributeButton.bind(this),this.didClickDialogButton=this.didClickDialogButton.bind(this),this.didKeyDownDialogInput=this.didKeyDownDialogInput.bind(this),this.element=t,this.attributes={},this.actions={},this.resetDialogInputs(),I("mousedown",{onElement:this.element,matchingSelector:Xs,withCallback:this.didClickActionButton}),I("mousedown",{onElement:this.element,matchingSelector:Js,withCallback:this.didClickAttributeButton}),I("click",{onElement:this.element,matchingSelector:ig,preventDefault:!0}),I("click",{onElement:this.element,matchingSelector:rg,withCallback:this.didClickDialogButton}),I("keydown",{onElement:this.element,matchingSelector:Fl,withCallback:this.didKeyDownDialogInput})}didClickActionButton(t,e){var n;(n=this.delegate)===null||n===void 0||n.toolbarDidClickButton(),t.preventDefault();let r=Hl(e);if(this.getDialog(r))return this.toggleDialog(r);var s;return(s=this.delegate)===null||s===void 0?void 0:s.toolbarDidInvokeAction(r)}didClickAttributeButton(t,e){var n;(n=this.delegate)===null||n===void 0||n.toolbarDidClickButton(),t.preventDefault();let r=oi(e);if(this.getDialog(r))this.toggleDialog(r);else{var s;(s=this.delegate)===null||s===void 0||s.toolbarDidToggleAttribute(r)}return this.refreshAttributeButtons()}didClickDialogButton(t,e){let n=ne(e,{matchingSelector:er}),r=e.getAttribute("data-trix-method");return this[r].call(this,n)}didKeyDownDialogInput(t,e){if(t.keyCode===13){t.preventDefault();let n=e.getAttribute("name"),r=this.getDialog(n);this.setAttribute(r)}if(t.keyCode===27)return t.preventDefault(),this.hideDialog()}updateActions(t){return this.actions=t,this.refreshActionButtons()}refreshActionButtons(){return this.eachActionButton((t,e)=>{t.disabled=this.actions[e]===!1})}eachActionButton(t){return Array.from(this.element.querySelectorAll(Xs)).map(e=>t(e,Hl(e)))}updateAttributes(t){return this.attributes=t,this.refreshAttributeButtons()}refreshAttributeButtons(){return this.eachAttributeButton((t,e)=>(t.disabled=this.attributes[e]===!1,this.attributes[e]||this.dialogIsVisible(e)?(t.setAttribute("data-trix-active",""),t.classList.add("trix-active")):(t.removeAttribute("data-trix-active"),t.classList.remove("trix-active"))))}eachAttributeButton(t){return Array.from(this.element.querySelectorAll(Js)).map(e=>t(e,oi(e)))}applyKeyboardCommand(t){let e=JSON.stringify(t.sort());for(let n of Array.from(this.element.querySelectorAll("[data-trix-key]"))){let r=n.getAttribute("data-trix-key").split("+");if(JSON.stringify(r.sort())===e)return jn("mousedown",{onElement:n}),!0}return!1}dialogIsVisible(t){let e=this.getDialog(t);if(e)return e.hasAttribute("data-trix-active")}toggleDialog(t){return this.dialogIsVisible(t)?this.hideDialog():this.showDialog(t)}showDialog(t){var e,n;this.hideDialog(),(e=this.delegate)===null||e===void 0||e.toolbarWillShowDialog();let r=this.getDialog(t);r.setAttribute("data-trix-active",""),r.classList.add("trix-active"),Array.from(r.querySelectorAll("input[disabled]")).forEach(o=>{o.removeAttribute("disabled")});let s=oi(r);if(s){let o=Wl(r,t);o&&(o.value=this.attributes[s]||"",o.select())}return(n=this.delegate)===null||n===void 0?void 0:n.toolbarDidShowDialog(t)}setAttribute(t){let e=oi(t),n=Wl(t,e);if(n.willValidate&&!n.checkValidity())return n.setAttribute("data-trix-validate",""),n.classList.add("trix-validate"),n.focus();var r;return(r=this.delegate)===null||r===void 0||r.toolbarDidUpdateAttribute(e,n.value),this.hideDialog()}removeAttribute(t){var e;let n=oi(t);return(e=this.delegate)===null||e===void 0||e.toolbarDidRemoveAttribute(n),this.hideDialog()}hideDialog(){let t=this.element.querySelector(ng);if(t){var e;return t.removeAttribute("data-trix-active"),t.classList.remove("trix-active"),this.resetDialogInputs(),(e=this.delegate)===null||e===void 0?void 0:e.toolbarDidHideDialog(sg(t))}}resetDialogInputs(){Array.from(this.element.querySelectorAll(Fl)).forEach(t=>{t.setAttribute("disabled","disabled"),t.removeAttribute("data-trix-validate"),t.classList.remove("trix-validate")})}getDialog(t){return this.element.querySelector("[data-trix-dialog=".concat(t,"]"))}},og=(i,t)=>tr(i.selectedRange,t.selectedRange)&&i.document.isEqualTo(t.document),fi=class extends zs{constructor(t){let{editorElement:e,document:n,html:r}=t;super(...arguments),this.editorElement=e,this.selectionManager=new jt(this.editorElement),this.selectionManager.delegate=this,this.composition=new Dt,this.composition.delegate=this,this.attachmentManager=new zn(this.composition.getAttachments()),this.attachmentManager.delegate=this,this.inputController=R.input.getLevel()===2?new di(this.editorElement):new Ot(this.editorElement),this.inputController.delegate=this,this.inputController.responder=this.composition,this.compositionController=new Gs(this.editorElement,this.composition),this.compositionController.delegate=this,this.toolbarController=new Qs(this.editorElement.toolbarElement),this.toolbarController.delegate=this,this.editor=new Gn(this.composition,this.selectionManager,this.editorElement),n?this.editor.loadDocument(n):this.editor.loadHTML(r)}registerSelectionManager(){return We.registerSelectionManager(this.selectionManager)}unregisterSelectionManager(){return We.unregisterSelectionManager(this.selectionManager)}render(){return this.compositionController.render()}reparse(){return this.composition.replaceHTML(this.editorElement.innerHTML)}compositionDidChangeDocument(t){if(this.notifyEditorElement("document-change"),!this.handlingInput)return this.render()}compositionDidChangeCurrentAttributes(t){return this.currentAttributes=t,this.toolbarController.updateAttributes(this.currentAttributes),this.updateCurrentActions(),this.notifyEditorElement("attributes-change",{attributes:this.currentAttributes})}compositionDidPerformInsertionAtRange(t){this.pasting&&(this.pastedRange=t)}compositionShouldAcceptFile(t){return this.notifyEditorElement("file-accept",{file:t})}compositionDidAddAttachment(t){let e=this.attachmentManager.manageAttachment(t);return this.notifyEditorElement("attachment-add",{attachment:e})}compositionDidEditAttachment(t){this.compositionController.rerenderViewForObject(t);let e=this.attachmentManager.manageAttachment(t);return this.notifyEditorElement("attachment-edit",{attachment:e}),this.notifyEditorElement("change")}compositionDidChangeAttachmentPreviewURL(t){return this.compositionController.invalidateViewForObject(t),this.notifyEditorElement("change")}compositionDidRemoveAttachment(t){let e=this.attachmentManager.unmanageAttachment(t);return this.notifyEditorElement("attachment-remove",{attachment:e})}compositionDidStartEditingAttachment(t,e){return this.attachmentLocationRange=this.composition.document.getLocationRangeOfAttachment(t),this.compositionController.installAttachmentEditorForAttachment(t,e),this.selectionManager.setLocationRange(this.attachmentLocationRange)}compositionDidStopEditingAttachment(t){this.compositionController.uninstallAttachmentEditor(),this.attachmentLocationRange=null}compositionDidRequestChangingSelectionToLocationRange(t){if(!(this.loadingSnapshot&&!this.isFocused())&&(this.requestedLocationRange=t,this.compositionRevisionWhenLocationRangeRequested=this.composition.revision,!this.handlingInput))return this.render()}compositionWillLoadSnapshot(){this.loadingSnapshot=!0}compositionDidLoadSnapshot(){this.compositionController.refreshViewCache(),this.render(),this.loadingSnapshot=!1}getSelectionManager(){return this.selectionManager}attachmentManagerDidRequestRemovalOfAttachment(t){return this.removeAttachment(t)}compositionControllerWillSyncDocumentView(){return this.inputController.editorWillSyncDocumentView(),this.selectionManager.lock(),this.selectionManager.clearSelection()}compositionControllerDidSyncDocumentView(){return this.inputController.editorDidSyncDocumentView(),this.selectionManager.unlock(),this.updateCurrentActions(),this.notifyEditorElement("sync")}compositionControllerDidRender(){this.requestedLocationRange&&(this.compositionRevisionWhenLocationRangeRequested===this.composition.revision&&this.selectionManager.setLocationRange(this.requestedLocationRange),this.requestedLocationRange=null,this.compositionRevisionWhenLocationRangeRequested=null),this.renderedCompositionRevision!==this.composition.revision&&(this.runEditorFilters(),this.composition.updateCurrentAttributes(),this.notifyEditorElement("render")),this.renderedCompositionRevision=this.composition.revision}compositionControllerDidFocus(){return this.isFocusedInvisibly()&&this.setLocationRange({index:0,offset:0}),this.toolbarController.hideDialog(),this.notifyEditorElement("focus")}compositionControllerDidBlur(){return this.notifyEditorElement("blur")}compositionControllerDidSelectAttachment(t,e){return this.toolbarController.hideDialog(),this.composition.editAttachment(t,e)}compositionControllerDidRequestDeselectingAttachment(t){let e=this.attachmentLocationRange||this.composition.document.getLocationRangeOfAttachment(t);return this.selectionManager.setLocationRange(e[1])}compositionControllerWillUpdateAttachment(t){return this.editor.recordUndoEntry("Edit Attachment",{context:t.id,consolidatable:!0})}compositionControllerDidRequestRemovalOfAttachment(t){return this.removeAttachment(t)}inputControllerWillHandleInput(){this.handlingInput=!0,this.requestedRender=!1}inputControllerDidRequestRender(){this.requestedRender=!0}inputControllerDidHandleInput(){if(this.handlingInput=!1,this.requestedRender)return this.requestedRender=!1,this.render()}inputControllerDidAllowUnhandledInput(){return this.notifyEditorElement("change")}inputControllerDidRequestReparse(){return this.reparse()}inputControllerWillPerformTyping(){return this.recordTypingUndoEntry()}inputControllerWillPerformFormatting(t){return this.recordFormattingUndoEntry(t)}inputControllerWillCutText(){return this.editor.recordUndoEntry("Cut")}inputControllerWillPaste(t){return this.editor.recordUndoEntry("Paste"),this.pasting=!0,this.notifyEditorElement("before-paste",{paste:t})}inputControllerDidPaste(t){return t.range=this.pastedRange,this.pastedRange=null,this.pasting=null,this.notifyEditorElement("paste",{paste:t})}inputControllerWillMoveText(){return this.editor.recordUndoEntry("Move")}inputControllerWillAttachFiles(){return this.editor.recordUndoEntry("Drop Files")}inputControllerWillPerformUndo(){return this.editor.undo()}inputControllerWillPerformRedo(){return this.editor.redo()}inputControllerDidReceiveKeyboardCommand(t){return this.toolbarController.applyKeyboardCommand(t)}inputControllerDidStartDrag(){this.locationRangeBeforeDrag=this.selectionManager.getLocationRange()}inputControllerDidReceiveDragOverPoint(t){return this.selectionManager.setLocationRangeFromPointRange(t)}inputControllerDidCancelDrag(){this.selectionManager.setLocationRange(this.locationRangeBeforeDrag),this.locationRangeBeforeDrag=null}locationRangeDidChange(t){return this.composition.updateCurrentAttributes(),this.updateCurrentActions(),this.attachmentLocationRange&&!tr(this.attachmentLocationRange,t)&&this.composition.stopEditingAttachment(),this.notifyEditorElement("selection-change")}toolbarDidClickButton(){if(!this.getLocationRange())return this.setLocationRange({index:0,offset:0})}toolbarDidInvokeAction(t){return this.invokeAction(t)}toolbarDidToggleAttribute(t){if(this.recordFormattingUndoEntry(t),this.composition.toggleCurrentAttribute(t),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarDidUpdateAttribute(t,e){if(this.recordFormattingUndoEntry(t),this.composition.setCurrentAttribute(t,e),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarDidRemoveAttribute(t){if(this.recordFormattingUndoEntry(t),this.composition.removeCurrentAttribute(t),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarWillShowDialog(t){return this.composition.expandSelectionForEditing(),this.freezeSelection()}toolbarDidShowDialog(t){return this.notifyEditorElement("toolbar-dialog-show",{dialogName:t})}toolbarDidHideDialog(t){return this.thawSelection(),this.editorElement.focus(),this.notifyEditorElement("toolbar-dialog-hide",{dialogName:t})}freezeSelection(){if(!this.selectionFrozen)return this.selectionManager.lock(),this.composition.freezeSelection(),this.selectionFrozen=!0,this.render()}thawSelection(){if(this.selectionFrozen)return this.composition.thawSelection(),this.selectionManager.unlock(),this.selectionFrozen=!1,this.render()}canInvokeAction(t){if(this.actionIsExternal(t))return!0;var e,n;return!!((e=this.actions[t])!==null&&e!==void 0&&(n=e.test)!==null&&n!==void 0&&n.call(this))}invokeAction(t){if(this.actionIsExternal(t))return this.notifyEditorElement("action-invoke",{actionName:t});var e,n;return(e=this.actions[t])===null||e===void 0||(n=e.perform)===null||n===void 0?void 0:n.call(this)}actionIsExternal(t){return/^x-./.test(t)}getCurrentActions(){let t={};for(let e in this.actions)t[e]=this.canInvokeAction(e);return t}updateCurrentActions(){let t=this.getCurrentActions();if(!en(t,this.currentActions))return this.currentActions=t,this.toolbarController.updateActions(this.currentActions),this.notifyEditorElement("actions-change",{actions:this.currentActions})}runEditorFilters(){let t=this.composition.getSnapshot();if(Array.from(this.editor.filters).forEach(e=>{let{document:n,selectedRange:r}=t;t=e.call(this.editor,t)||{},t.document||(t.document=n),t.selectedRange||(t.selectedRange=r)}),!og(t,this.composition.getSnapshot()))return this.composition.loadSnapshot(t)}updateInputElement(){let t=this.compositionController.getSerializableElement(),e=qp(t,"text/html");return this.editorElement.setInputElementValue(e)}notifyEditorElement(t,e){switch(t){case"document-change":this.documentChangedSinceLastRender=!0;break;case"render":this.documentChangedSinceLastRender&&(this.documentChangedSinceLastRender=!1,this.notifyEditorElement("change"));break;case"change":case"attachment-add":case"attachment-edit":case"attachment-remove":this.updateInputElement();break}return this.editorElement.notify(t,e)}removeAttachment(t){return this.editor.recordUndoEntry("Delete Attachment"),this.composition.removeAttachment(t),this.render()}recordFormattingUndoEntry(t){let e=q(t),n=this.selectionManager.getLocationRange();if(e||!Ft(n))return this.editor.recordUndoEntry("Formatting",{context:this.getUndoContext(),consolidatable:!0})}recordTypingUndoEntry(){return this.editor.recordUndoEntry("Typing",{context:this.getUndoContext(this.currentAttributes),consolidatable:!0})}getUndoContext(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return[this.getLocationContext(),this.getTimeContext(),...Array.from(e)]}getLocationContext(){let t=this.selectionManager.getLocationRange();return Ft(t)?t[0].index:t}getTimeContext(){return R.undoInterval>0?Math.floor(new Date().getTime()/R.undoInterval):0}isFocused(){var t;return this.editorElement===((t=this.editorElement.ownerDocument)===null||t===void 0?void 0:t.activeElement)}isFocusedInvisibly(){return this.isFocused()&&!this.getLocationRange()}get actions(){return this.constructor.actions}};ht(fi,"actions",{undo:{test(){return this.editor.canUndo()},perform(){return this.editor.undo()}},redo:{test(){return this.editor.canRedo()},perform(){return this.editor.redo()}},link:{test(){return this.editor.canActivateAttribute("href")}},increaseNestingLevel:{test(){return this.editor.canIncreaseNestingLevel()},perform(){return this.editor.increaseNestingLevel()&&this.render()}},decreaseNestingLevel:{test(){return this.editor.canDecreaseNestingLevel()},perform(){return this.editor.decreaseNestingLevel()&&this.render()}},attachFiles:{test(){return!0},perform(){return R.input.pickFiles(this.editor.insertFiles)}}});fi.proxyMethod("getSelectionManager().setLocationRange");fi.proxyMethod("getSelectionManager().getLocationRange");Kl("trix-toolbar",`%t {
  display: block;
}

%t {
  white-space: nowrap;
}

%t [data-trix-dialog] {
  display: none;
}

%t [data-trix-dialog][data-trix-active] {
  display: block;
}

%t [data-trix-dialog] [data-trix-validate]:invalid {
  background-color: #ffdddd;
}`);var Zs=class extends HTMLElement{connectedCallback(){this.innerHTML===""&&(this.innerHTML=R.toolbar.getDefaultHTML())}};window.customElements.define("trix-toolbar",Zs);var ag=0,lg=function(i){if(!document.querySelector(":focus")&&i.hasAttribute("autofocus")&&document.querySelector("[autofocus]")===i)return i.focus()},cg=function(i){if(!i.hasAttribute("contenteditable"))return i.setAttribute("contenteditable",""),Lm("focus",{onElement:i,withCallback(){return ug(i)}})},ug=function(i){return hg(i),dg(i)},hg=function(i){var t,e;if((t=(e=document).queryCommandSupported)!==null&&t!==void 0&&t.call(e,"enableObjectResizing"))return document.execCommand("enableObjectResizing",!1,!1),I("mscontrolselect",{onElement:i,preventDefault:!0})},dg=function(i){var t,e;if((t=(e=document).queryCommandSupported)!==null&&t!==void 0&&t.call(e,"DefaultParagraphSeparator")){let{tagName:n}=R.blockAttributes.default;if(["div","p"].includes(n))return document.execCommand("DefaultParagraphSeparator",!1,n)}},fg=function(i){if(!i.hasAttribute("role"))return i.setAttribute("role","textbox")},mg=function(i){if(i.hasAttribute("aria-label")||i.hasAttribute("aria-labelledby"))return;let t=function(){let n=Array.from(i.labels).map(r=>{if(!r.contains(i))return r.textContent}).filter(r=>r).join(" ");return n?i.setAttribute("aria-label",n):i.removeAttribute("aria-label")};return t(),I("focus",{onElement:i,withCallback:t})},jl=function(){return R.browser.forcesObjectResizing?{display:"inline",width:"auto"}:{display:"inline-block",width:"1px"}}();Kl("trix-editor",`%t {
    display: block;
}

%t:empty:not(:focus)::before {
    content: attr(placeholder);
    color: graytext;
    cursor: text;
    pointer-events: none;
    white-space: pre-line;
}

%t a[contenteditable=false] {
    cursor: text;
}

%t img {
    max-width: 100%;
    height: auto;
}

%t `.concat(Ne,` figcaption textarea {
    resize: none;
}

%t `).concat(Ne,` figcaption textarea.trix-autoresize-clone {
    position: absolute;
    left: -9999px;
    max-height: 0px;
}

%t `).concat(Ne,` figcaption[data-trix-placeholder]:empty::before {
    content: attr(data-trix-placeholder);
    color: graytext;
}

%t [data-trix-cursor-target] {
    display: `).concat(jl.display,` !important;
    width: `).concat(jl.width,` !important;
    padding: 0 !important;
    margin: 0 !important;
    border: none !important;
}

%t [data-trix-cursor-target=left] {
    vertical-align: top !important;
    margin-left: -1px !important;
}

%t [data-trix-cursor-target=right] {
    vertical-align: bottom !important;
    margin-right: -1px !important;
}`));var to=class extends HTMLElement{get trixId(){return this.hasAttribute("trix-id")?this.getAttribute("trix-id"):(this.setAttribute("trix-id",++ag),this.trixId)}get labels(){let t=[];this.id&&this.ownerDocument&&t.push(...Array.from(this.ownerDocument.querySelectorAll("label[for='".concat(this.id,"']"))||[]));let e=ne(this,{matchingSelector:"label"});return e&&[this,null].includes(e.control)&&t.push(e),t}get toolbarElement(){if(this.hasAttribute("toolbar")){var t;return(t=this.ownerDocument)===null||t===void 0?void 0:t.getElementById(this.getAttribute("toolbar"))}else if(this.parentNode){let e="trix-toolbar-".concat(this.trixId);this.setAttribute("toolbar",e);let n=T("trix-toolbar",{id:e});return this.parentNode.insertBefore(n,this),n}else return}get form(){var t;return(t=this.inputElement)===null||t===void 0?void 0:t.form}get inputElement(){if(this.hasAttribute("input")){var t;return(t=this.ownerDocument)===null||t===void 0?void 0:t.getElementById(this.getAttribute("input"))}else if(this.parentNode){let e="trix-input-".concat(this.trixId);this.setAttribute("input",e);let n=T("input",{type:"hidden",id:e});return this.parentNode.insertBefore(n,this.nextElementSibling),n}else return}get editor(){var t;return(t=this.editorController)===null||t===void 0?void 0:t.editor}get name(){var t;return(t=this.inputElement)===null||t===void 0?void 0:t.name}get value(){var t;return(t=this.inputElement)===null||t===void 0?void 0:t.value}set value(t){var e;this.defaultValue=t,(e=this.editor)===null||e===void 0||e.loadHTML(this.defaultValue)}notify(t,e){if(this.editorController)return jn("trix-".concat(t),{onElement:this,attributes:e})}setInputElementValue(t){this.inputElement&&(this.inputElement.value=t)}connectedCallback(){this.hasAttribute("data-trix-internal")||(cg(this),fg(this),mg(this),this.editorController||(jn("trix-before-initialize",{onElement:this}),this.editorController=new fi({editorElement:this,html:this.defaultValue=this.value}),requestAnimationFrame(()=>jn("trix-initialize",{onElement:this}))),this.editorController.registerSelectionManager(),this.registerResetListener(),this.registerClickListener(),lg(this))}disconnectedCallback(){var t;return(t=this.editorController)===null||t===void 0||t.unregisterSelectionManager(),this.unregisterResetListener(),this.unregisterClickListener()}registerResetListener(){return this.resetListener=this.resetBubbled.bind(this),window.addEventListener("reset",this.resetListener,!1)}unregisterResetListener(){return window.removeEventListener("reset",this.resetListener,!1)}registerClickListener(){return this.clickListener=this.clickBubbled.bind(this),window.addEventListener("click",this.clickListener,!1)}unregisterClickListener(){return window.removeEventListener("click",this.clickListener,!1)}resetBubbled(t){if(!t.defaultPrevented&&t.target===this.form)return this.reset()}clickBubbled(t){if(t.defaultPrevented||this.contains(t.target))return;let e=ne(t.target,{matchingSelector:"label"});if(!!e&&!!Array.from(this.labels).includes(e))return this.focus()}reset(){this.value=this.defaultValue}};window.customElements.define("trix-editor",to);var ac={exports:{}};(function(i,t){(function(e){i.exports=e()})(function(e){var n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(g,m){var c=g[0],l=g[1],h=g[2],u=g[3];c+=(l&h|~l&u)+m[0]-680876936|0,c=(c<<7|c>>>25)+l|0,u+=(c&l|~c&h)+m[1]-389564586|0,u=(u<<12|u>>>20)+c|0,h+=(u&c|~u&l)+m[2]+606105819|0,h=(h<<17|h>>>15)+u|0,l+=(h&u|~h&c)+m[3]-1044525330|0,l=(l<<22|l>>>10)+h|0,c+=(l&h|~l&u)+m[4]-176418897|0,c=(c<<7|c>>>25)+l|0,u+=(c&l|~c&h)+m[5]+1200080426|0,u=(u<<12|u>>>20)+c|0,h+=(u&c|~u&l)+m[6]-1473231341|0,h=(h<<17|h>>>15)+u|0,l+=(h&u|~h&c)+m[7]-45705983|0,l=(l<<22|l>>>10)+h|0,c+=(l&h|~l&u)+m[8]+1770035416|0,c=(c<<7|c>>>25)+l|0,u+=(c&l|~c&h)+m[9]-1958414417|0,u=(u<<12|u>>>20)+c|0,h+=(u&c|~u&l)+m[10]-42063|0,h=(h<<17|h>>>15)+u|0,l+=(h&u|~h&c)+m[11]-1990404162|0,l=(l<<22|l>>>10)+h|0,c+=(l&h|~l&u)+m[12]+1804603682|0,c=(c<<7|c>>>25)+l|0,u+=(c&l|~c&h)+m[13]-40341101|0,u=(u<<12|u>>>20)+c|0,h+=(u&c|~u&l)+m[14]-1502002290|0,h=(h<<17|h>>>15)+u|0,l+=(h&u|~h&c)+m[15]+1236535329|0,l=(l<<22|l>>>10)+h|0,c+=(l&u|h&~u)+m[1]-165796510|0,c=(c<<5|c>>>27)+l|0,u+=(c&h|l&~h)+m[6]-1069501632|0,u=(u<<9|u>>>23)+c|0,h+=(u&l|c&~l)+m[11]+643717713|0,h=(h<<14|h>>>18)+u|0,l+=(h&c|u&~c)+m[0]-373897302|0,l=(l<<20|l>>>12)+h|0,c+=(l&u|h&~u)+m[5]-701558691|0,c=(c<<5|c>>>27)+l|0,u+=(c&h|l&~h)+m[10]+38016083|0,u=(u<<9|u>>>23)+c|0,h+=(u&l|c&~l)+m[15]-660478335|0,h=(h<<14|h>>>18)+u|0,l+=(h&c|u&~c)+m[4]-405537848|0,l=(l<<20|l>>>12)+h|0,c+=(l&u|h&~u)+m[9]+568446438|0,c=(c<<5|c>>>27)+l|0,u+=(c&h|l&~h)+m[14]-1019803690|0,u=(u<<9|u>>>23)+c|0,h+=(u&l|c&~l)+m[3]-187363961|0,h=(h<<14|h>>>18)+u|0,l+=(h&c|u&~c)+m[8]+1163531501|0,l=(l<<20|l>>>12)+h|0,c+=(l&u|h&~u)+m[13]-1444681467|0,c=(c<<5|c>>>27)+l|0,u+=(c&h|l&~h)+m[2]-51403784|0,u=(u<<9|u>>>23)+c|0,h+=(u&l|c&~l)+m[7]+1735328473|0,h=(h<<14|h>>>18)+u|0,l+=(h&c|u&~c)+m[12]-1926607734|0,l=(l<<20|l>>>12)+h|0,c+=(l^h^u)+m[5]-378558|0,c=(c<<4|c>>>28)+l|0,u+=(c^l^h)+m[8]-2022574463|0,u=(u<<11|u>>>21)+c|0,h+=(u^c^l)+m[11]+1839030562|0,h=(h<<16|h>>>16)+u|0,l+=(h^u^c)+m[14]-35309556|0,l=(l<<23|l>>>9)+h|0,c+=(l^h^u)+m[1]-1530992060|0,c=(c<<4|c>>>28)+l|0,u+=(c^l^h)+m[4]+1272893353|0,u=(u<<11|u>>>21)+c|0,h+=(u^c^l)+m[7]-155497632|0,h=(h<<16|h>>>16)+u|0,l+=(h^u^c)+m[10]-1094730640|0,l=(l<<23|l>>>9)+h|0,c+=(l^h^u)+m[13]+681279174|0,c=(c<<4|c>>>28)+l|0,u+=(c^l^h)+m[0]-358537222|0,u=(u<<11|u>>>21)+c|0,h+=(u^c^l)+m[3]-722521979|0,h=(h<<16|h>>>16)+u|0,l+=(h^u^c)+m[6]+76029189|0,l=(l<<23|l>>>9)+h|0,c+=(l^h^u)+m[9]-640364487|0,c=(c<<4|c>>>28)+l|0,u+=(c^l^h)+m[12]-421815835|0,u=(u<<11|u>>>21)+c|0,h+=(u^c^l)+m[15]+530742520|0,h=(h<<16|h>>>16)+u|0,l+=(h^u^c)+m[2]-995338651|0,l=(l<<23|l>>>9)+h|0,c+=(h^(l|~u))+m[0]-198630844|0,c=(c<<6|c>>>26)+l|0,u+=(l^(c|~h))+m[7]+1126891415|0,u=(u<<10|u>>>22)+c|0,h+=(c^(u|~l))+m[14]-1416354905|0,h=(h<<15|h>>>17)+u|0,l+=(u^(h|~c))+m[5]-57434055|0,l=(l<<21|l>>>11)+h|0,c+=(h^(l|~u))+m[12]+1700485571|0,c=(c<<6|c>>>26)+l|0,u+=(l^(c|~h))+m[3]-1894986606|0,u=(u<<10|u>>>22)+c|0,h+=(c^(u|~l))+m[10]-1051523|0,h=(h<<15|h>>>17)+u|0,l+=(u^(h|~c))+m[1]-2054922799|0,l=(l<<21|l>>>11)+h|0,c+=(h^(l|~u))+m[8]+1873313359|0,c=(c<<6|c>>>26)+l|0,u+=(l^(c|~h))+m[15]-30611744|0,u=(u<<10|u>>>22)+c|0,h+=(c^(u|~l))+m[6]-1560198380|0,h=(h<<15|h>>>17)+u|0,l+=(u^(h|~c))+m[13]+1309151649|0,l=(l<<21|l>>>11)+h|0,c+=(h^(l|~u))+m[4]-145523070|0,c=(c<<6|c>>>26)+l|0,u+=(l^(c|~h))+m[11]-1120210379|0,u=(u<<10|u>>>22)+c|0,h+=(c^(u|~l))+m[2]+718787259|0,h=(h<<15|h>>>17)+u|0,l+=(u^(h|~c))+m[9]-343485551|0,l=(l<<21|l>>>11)+h|0,g[0]=c+g[0]|0,g[1]=l+g[1]|0,g[2]=h+g[2]|0,g[3]=u+g[3]|0}function s(g){var m=[],c;for(c=0;c<64;c+=4)m[c>>2]=g.charCodeAt(c)+(g.charCodeAt(c+1)<<8)+(g.charCodeAt(c+2)<<16)+(g.charCodeAt(c+3)<<24);return m}function o(g){var m=[],c;for(c=0;c<64;c+=4)m[c>>2]=g[c]+(g[c+1]<<8)+(g[c+2]<<16)+(g[c+3]<<24);return m}function a(g){var m=g.length,c=[1732584193,-271733879,-1732584194,271733878],l,h,u,S,L,O;for(l=64;l<=m;l+=64)r(c,s(g.substring(l-64,l)));for(g=g.substring(l-64),h=g.length,u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=0;l<h;l+=1)u[l>>2]|=g.charCodeAt(l)<<(l%4<<3);if(u[l>>2]|=128<<(l%4<<3),l>55)for(r(c,u),l=0;l<16;l+=1)u[l]=0;return S=m*8,S=S.toString(16).match(/(.*?)(.{0,8})$/),L=parseInt(S[2],16),O=parseInt(S[1],16)||0,u[14]=L,u[15]=O,r(c,u),c}function d(g){var m=g.length,c=[1732584193,-271733879,-1732584194,271733878],l,h,u,S,L,O;for(l=64;l<=m;l+=64)r(c,o(g.subarray(l-64,l)));for(g=l-64<m?g.subarray(l-64):new Uint8Array(0),h=g.length,u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=0;l<h;l+=1)u[l>>2]|=g[l]<<(l%4<<3);if(u[l>>2]|=128<<(l%4<<3),l>55)for(r(c,u),l=0;l<16;l+=1)u[l]=0;return S=m*8,S=S.toString(16).match(/(.*?)(.{0,8})$/),L=parseInt(S[2],16),O=parseInt(S[1],16)||0,u[14]=L,u[15]=O,r(c,u),c}function f(g){var m="",c;for(c=0;c<4;c+=1)m+=n[g>>c*8+4&15]+n[g>>c*8&15];return m}function p(g){var m;for(m=0;m<g.length;m+=1)g[m]=f(g[m]);return g.join("")}p(a("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function g(m,c){return m=m|0||0,m<0?Math.max(m+c,0):Math.min(m,c)}ArrayBuffer.prototype.slice=function(m,c){var l=this.byteLength,h=g(m,l),u=l,S,L,O,H;return c!==e&&(u=g(c,l)),h>u?new ArrayBuffer(0):(S=u-h,L=new ArrayBuffer(S),O=new Uint8Array(L),H=new Uint8Array(this,h,S),O.set(H),L)}}();function b(g){return/[\u0080-\uFFFF]/.test(g)&&(g=unescape(encodeURIComponent(g))),g}function y(g,m){var c=g.length,l=new ArrayBuffer(c),h=new Uint8Array(l),u;for(u=0;u<c;u+=1)h[u]=g.charCodeAt(u);return m?h:l}function A(g){return String.fromCharCode.apply(null,new Uint8Array(g))}function _(g,m,c){var l=new Uint8Array(g.byteLength+m.byteLength);return l.set(new Uint8Array(g)),l.set(new Uint8Array(m),g.byteLength),c?l:l.buffer}function w(g){var m=[],c=g.length,l;for(l=0;l<c-1;l+=2)m.push(parseInt(g.substr(l,2),16));return String.fromCharCode.apply(String,m)}function E(){this.reset()}return E.prototype.append=function(g){return this.appendBinary(b(g)),this},E.prototype.appendBinary=function(g){this._buff+=g,this._length+=g.length;var m=this._buff.length,c;for(c=64;c<=m;c+=64)r(this._hash,s(this._buff.substring(c-64,c)));return this._buff=this._buff.substring(c-64),this},E.prototype.end=function(g){var m=this._buff,c=m.length,l,h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u;for(l=0;l<c;l+=1)h[l>>2]|=m.charCodeAt(l)<<(l%4<<3);return this._finish(h,c),u=p(this._hash),g&&(u=w(u)),this.reset(),u},E.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},E.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},E.prototype.setState=function(g){return this._buff=g.buff,this._length=g.length,this._hash=g.hash,this},E.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},E.prototype._finish=function(g,m){var c=m,l,h,u;if(g[c>>2]|=128<<(c%4<<3),c>55)for(r(this._hash,g),c=0;c<16;c+=1)g[c]=0;l=this._length*8,l=l.toString(16).match(/(.*?)(.{0,8})$/),h=parseInt(l[2],16),u=parseInt(l[1],16)||0,g[14]=h,g[15]=u,r(this._hash,g)},E.hash=function(g,m){return E.hashBinary(b(g),m)},E.hashBinary=function(g,m){var c=a(g),l=p(c);return m?w(l):l},E.ArrayBuffer=function(){this.reset()},E.ArrayBuffer.prototype.append=function(g){var m=_(this._buff.buffer,g,!0),c=m.length,l;for(this._length+=g.byteLength,l=64;l<=c;l+=64)r(this._hash,o(m.subarray(l-64,l)));return this._buff=l-64<c?new Uint8Array(m.buffer.slice(l-64)):new Uint8Array(0),this},E.ArrayBuffer.prototype.end=function(g){var m=this._buff,c=m.length,l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],h,u;for(h=0;h<c;h+=1)l[h>>2]|=m[h]<<(h%4<<3);return this._finish(l,c),u=p(this._hash),g&&(u=w(u)),this.reset(),u},E.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},E.ArrayBuffer.prototype.getState=function(){var g=E.prototype.getState.call(this);return g.buff=A(g.buff),g},E.ArrayBuffer.prototype.setState=function(g){return g.buff=y(g.buff,!0),E.prototype.setState.call(this,g)},E.ArrayBuffer.prototype.destroy=E.prototype.destroy,E.ArrayBuffer.prototype._finish=E.prototype._finish,E.ArrayBuffer.hash=function(g,m){var c=d(new Uint8Array(g)),l=p(c);return m?w(l):l},E})})(ac);var pg=ac.exports,gg=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,nn=class{static create(t,e){new nn(t).create(e)}constructor(t){this.file=t,this.chunkSize=2097152,this.chunkCount=Math.ceil(this.file.size/this.chunkSize),this.chunkIndex=0}create(t){this.callback=t,this.md5Buffer=new pg.ArrayBuffer,this.fileReader=new FileReader,this.fileReader.addEventListener("load",e=>this.fileReaderDidLoad(e)),this.fileReader.addEventListener("error",e=>this.fileReaderDidError(e)),this.readNextChunk()}fileReaderDidLoad(t){if(this.md5Buffer.append(t.target.result),!this.readNextChunk()){let e=this.md5Buffer.end(!0),n=btoa(e);this.callback(null,n)}}fileReaderDidError(t){this.callback(`Error reading ${this.file.name}`)}readNextChunk(){if(this.chunkIndex<this.chunkCount||this.chunkIndex==0&&this.chunkCount==0){let t=this.chunkIndex*this.chunkSize,e=Math.min(t+this.chunkSize,this.file.size),n=gg.call(this.file,t,e);return this.fileReader.readAsArrayBuffer(n),this.chunkIndex++,!0}else return!1}};function vg(i){let t=lc(document.head,`meta[name="${i}"]`);if(t)return t.getAttribute("content")}function bg(i,t){typeof i=="string"&&(t=i,i=document);let e=i.querySelectorAll(t);return uc(e)}function lc(i,t){return typeof i=="string"&&(t=i,i=document),i.querySelector(t)}function cc(i,t,e={}){let{disabled:n}=i,{bubbles:r,cancelable:s,detail:o}=e,a=document.createEvent("Event");a.initEvent(t,r||!0,s||!0),a.detail=o||{};try{i.disabled=!1,i.dispatchEvent(a)}finally{i.disabled=n}return a}function uc(i){return Array.isArray(i)?i:Array.from?Array.from(i):[].slice.call(i)}var co=class{constructor(t,e,n){this.file=t,this.attributes={filename:t.name,content_type:t.type||"application/octet-stream",byte_size:t.size,checksum:e},this.xhr=new XMLHttpRequest,this.xhr.open("POST",n,!0),this.xhr.responseType="json",this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("Accept","application/json"),this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");let r=vg("csrf-token");r!=null&&this.xhr.setRequestHeader("X-CSRF-Token",r),this.xhr.addEventListener("load",s=>this.requestDidLoad(s)),this.xhr.addEventListener("error",s=>this.requestDidError(s))}get status(){return this.xhr.status}get response(){let{responseType:t,response:e}=this.xhr;return t=="json"?e:JSON.parse(e)}create(t){this.callback=t,this.xhr.send(JSON.stringify({blob:this.attributes}))}requestDidLoad(t){if(this.status>=200&&this.status<300){let{response:e}=this,{direct_upload:n}=e;delete e.direct_upload,this.attributes=e,this.directUploadData=n,this.callback(null,this.toJSON())}else this.requestDidError(t)}requestDidError(t){this.callback(`Error creating Blob for "${this.file.name}". Status: ${this.status}`)}toJSON(){let t={};for(let e in this.attributes)t[e]=this.attributes[e];return t}},uo=class{constructor(t){this.blob=t,this.file=t.file;let{url:e,headers:n}=t.directUploadData;this.xhr=new XMLHttpRequest,this.xhr.open("PUT",e,!0),this.xhr.responseType="text";for(let r in n)this.xhr.setRequestHeader(r,n[r]);this.xhr.addEventListener("load",r=>this.requestDidLoad(r)),this.xhr.addEventListener("error",r=>this.requestDidError(r))}create(t){this.callback=t,this.xhr.send(this.file.slice())}requestDidLoad(t){let{status:e,response:n}=this.xhr;e>=200&&e<300?this.callback(null,n):this.requestDidError(t)}requestDidError(t){this.callback(`Error storing "${this.file.name}". Status: ${this.xhr.status}`)}},yg=0,rn=class{constructor(t,e,n){this.id=++yg,this.file=t,this.url=e,this.delegate=n}create(t){nn.create(this.file,(e,n)=>{if(e){t(e);return}let r=new co(this.file,n,this.url);sc(this.delegate,"directUploadWillCreateBlobWithXHR",r.xhr),r.create(s=>{if(s)t(s);else{let o=new uo(r);sc(this.delegate,"directUploadWillStoreFileWithXHR",o.xhr),o.create(a=>{a?t(a):t(null,r.toJSON())})}})})}};function sc(i,t,...e){if(i&&typeof i[t]=="function")return i[t](...e)}var ho=class{constructor(t,e){this.input=t,this.file=e,this.directUpload=new rn(this.file,this.url,this),this.dispatch("initialize")}start(t){let e=document.createElement("input");e.type="hidden",e.name=this.input.name,this.input.insertAdjacentElement("beforebegin",e),this.dispatch("start"),this.directUpload.create((n,r)=>{n?(e.parentNode.removeChild(e),this.dispatchError(n)):e.value=r.signed_id,this.dispatch("end"),t(n)})}uploadRequestDidProgress(t){let e=t.loaded/t.total*100;e&&this.dispatch("progress",{progress:e})}get url(){return this.input.getAttribute("data-direct-upload-url")}dispatch(t,e={}){return e.file=this.file,e.id=this.directUpload.id,cc(this.input,`direct-upload:${t}`,{detail:e})}dispatchError(t){this.dispatch("error",{error:t}).defaultPrevented||alert(t)}directUploadWillCreateBlobWithXHR(t){this.dispatch("before-blob-request",{xhr:t})}directUploadWillStoreFileWithXHR(t){this.dispatch("before-storage-request",{xhr:t}),t.upload.addEventListener("progress",e=>this.uploadRequestDidProgress(e))}},Eg="input[type=file][data-direct-upload-url]:not([disabled])",fo=class{constructor(t){this.form=t,this.inputs=bg(t,Eg).filter(e=>e.files.length)}start(t){let e=this.createDirectUploadControllers(),n=()=>{let r=e.shift();r?r.start(s=>{s?(t(s),this.dispatch("end")):n()}):(t(),this.dispatch("end"))};this.dispatch("start"),n()}createDirectUploadControllers(){let t=[];return this.inputs.forEach(e=>{uc(e.files).forEach(n=>{let r=new ho(e,n);t.push(r)})}),t}dispatch(t,e={}){return cc(this.form,`direct-uploads:${t}`,{detail:e})}},lo="data-direct-uploads-processing",mo=new WeakMap,oc=!1;function Ag(){oc||(oc=!0,document.addEventListener("click",wg,!0),document.addEventListener("submit",Sg,!0),document.addEventListener("ajax:before",Cg))}function wg(i){let{target:t}=i;(t.tagName=="INPUT"||t.tagName=="BUTTON")&&t.type=="submit"&&t.form&&mo.set(t.form,t)}function Sg(i){hc(i)}function Cg(i){i.target.tagName=="FORM"&&hc(i)}function hc(i){let t=i.target;if(t.hasAttribute(lo)){i.preventDefault();return}let e=new fo(t),{inputs:n}=e;n.length&&(i.preventDefault(),t.setAttribute(lo,""),n.forEach(xg),e.start(r=>{t.removeAttribute(lo),r?n.forEach(Tg):_g(t)}))}function _g(i){let t=mo.get(i)||lc(i,"input[type=submit], button[type=submit]");if(t){let{disabled:e}=t;t.disabled=!1,t.focus(),t.click(),t.disabled=e}else t=document.createElement("input"),t.type="submit",t.style.display="none",i.appendChild(t),t.click(),i.removeChild(t);mo.delete(i)}function xg(i){i.disabled=!0}function Tg(i){i.disabled=!1}function Lg(){window.ActiveStorage&&Ag()}setTimeout(Lg,1);var ir=class{constructor(t,e){this.attachment=t,this.element=e,this.directUpload=new rn(t.file,this.directUploadUrl,this)}start(){this.directUpload.create(this.directUploadDidComplete.bind(this))}directUploadWillStoreFileWithXHR(t){t.upload.addEventListener("progress",e=>{let n=e.loaded/e.total*100;this.attachment.setUploadProgress(n)})}directUploadDidComplete(t,e){if(t)throw new Error(`Direct upload failed: ${t}`);this.attachment.setAttributes({sgid:e.attachable_sgid,url:this.createBlobUrl(e.signed_id,e.filename)})}createBlobUrl(t,e){return this.blobUrlTemplate.replace(":signed_id",t).replace(":filename",encodeURIComponent(e))}get directUploadUrl(){return this.element.dataset.directUploadUrl}get blobUrlTemplate(){return this.element.dataset.blobUrlTemplate}};addEventListener("trix-attachment-add",i=>{let{attachment:t,target:e}=i;t.file&&new ir(t,e).start()});})();
/*!
  * Bootstrap v5.1.3 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
